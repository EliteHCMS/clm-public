import{l as j,_ as O,y as s,ap as r,bq as t,bO as p,d as e,bP as Q,aq as i,aw as V,ab as b,D as U,bQ as E,b4 as S,bR as pe,z as q,F as J,b3 as X,E as L,r as w,bS as fe,bT as _e,bU as N,w as R,bV as M,a7 as n,B as h,bs as A}from"./index.a03c16e1.js";import{Q as W,a as ve}from"./QHeader.4f94a314.js";import{Q as ye}from"./QMenu.85d00748.js";import{Q as F}from"./QToolbar.e42c8dd7.js";import{Q as be}from"./QImg.9b304398.js";import{Q as T}from"./QList.ace1fffd.js";import{Q as I}from"./QSelect.b38e663e.js";import{Q as ge,a as ke}from"./QDrawer.228aeb88.js";import{Q as he,a as qe}from"./QLayout.bcd9c34b.js";import{C as K}from"./ClosePopup.0c5c1f69.js";import{Q as we}from"./QBadge.62558377.js";import{M as Me,Q as Qe}from"./MenuSubLink.f60dd20c.js";import{u as Se}from"./use-quasar.581262ce.js";import{u as $e}from"./i18n.8ef2ea34.js";import{u as Ce,b as Ue,c as Le,q as G}from"./app.8e730c48.js";import{_ as xe}from"./KioskLogin.255665e4.js";import{_ as Be}from"./languageSelector.ba970179.js";import{_ as Ve}from"./version.2966e165.js";import{h as Ee}from"./HelpDeskTicket.ce5d0b05.js";import"./QResizeObserver.38a632bf.js";import"./position-engine.869e6998.js";import"./selection.a756df5b.js";import"./QChip.2bf5e9f7.js";import"./rtl.b51694b1.js";import"./TouchPan.168e9541.js";import"./touch.3df10340.js";import"./QSlideTransition.a1a4d822.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.8e614a0b.js";import"./localForage.8d2e0f2e.js";import"./index.04bc0a32.js";import"./vee-validate.esm.53bf4a95.js";import"./array.164cfe36.js";import"./QTooltip.9a46f6bc.js";import"./QFile.6583df3e.js";import"./QSpinnerGears.5e74fac3.js";import"./QForm.04328203.js";const Te=j({name:"MenuLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null},count:{type:Number,default:null}}});function Ie(a,f,$,_,l,v){return s(),r(E,{to:a.to,class:U(["rounded-borders bg-white",{"q-ma-sm":!a.mini,"q-ma-xs":a.mini}]),"active-class":a.mini?"brand-active-menu text-white":"brand-active-menu text-white q-py-md",exact:""},{default:t(()=>[a.icon?(s(),r(p,{key:0,avatar:""},{default:t(()=>[e(Q,{name:a.icon},null,8,["name"])]),_:1})):i("",!0),e(p,null,{default:t(()=>[e(I,null,{default:t(()=>[V(b(a.title),1)]),_:1})]),_:1}),a.count?(s(),r(p,{key:1,side:"",top:""},{default:t(()=>[e(we,{color:"primary",label:a.count},null,8,["label"])]),_:1})):i("",!0)]),_:1},8,["to","class","active-class"])}var je=O(Te,[["render",Ie]]);const Oe=j({name:"MenuExpanded",components:{MenuSubLink:Me},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Pe(a,f,$,_,l,v){const y=S("MenuSubLink");return s(),r(Qe,{icon:a.icon,label:a.title,class:U(["rounded-borders bg-white",{"q-ma-sm":!a.mini,"q-ma-xs":a.mini}]),"active-class":"brand-active-menu text-white",exact:""},{default:t(()=>[e(pe),e(p,null,{default:t(()=>[e(T,null,{default:t(()=>[(s(!0),q(J,null,X(a.subMenu,u=>(s(),r(y,L({key:u},u,{mini:a.mini}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["icon","label","class"])}var ze=O(Oe,[["render",Pe]]);const De=j({name:"MenuNav",components:{MenuLink:je,MenuExpanded:ze},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function He(a,f,$,_,l,v){const y=S("MenuLink"),u=S("MenuExpanded");return s(),q("div",null,[!a.subMenu&&a.to?(s(),r(y,L({key:0},{...a.$props,...a.$attrs},{mini:a.mini}),null,16,["mini"])):a.subMenu&&a.subMenu.length>0?(s(),r(u,L({key:1},{...a.$props,...a.$attrs},{mini:a.mini}),null,16,["mini"])):i("",!0)])}var Ne=O(De,[["render",He]]);const Re={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Ae={key:0},We={key:1},Fe={class:"q-gutter-sm row items-center no-wrap"},Ke={class:"row no-wrap q-pa-md"},Ge={class:"column items-center"},Je={class:"text-subtitle1 q-mt-md q-mb-xs"},Et={__name:"MainLayout",setup(a){const f=Se(),{locale:$}=$e(),_=w(!1),l=w(!1),v=w(!1),y=w(!1),u=fe(),g=_e(),k=Ce(),P=Ue(),Y=Le(),{getUnReadCount:Z}=N(Y),{openWindow:ee,toolbarTitle:te}=P,{getUserType:C}=k,{onKiosk:d,activeMenu:ae,startPageEnabled:z,kioskActive:se,homeButtonEnabled:ne}=N(P),x=w(!1),B=async o=>{await G.checkKioskStatus(o)||(y.value=!0)};if(d.value&&B(!0),g.query&&g.query.office_id){const o=Object.assign({},g.query);delete o.office_id,delete o.qr,u.replace({query:o})}R(se,o=>{!o&&d.value&&B()}),R(()=>g.query,async()=>{if(d.value&&B(!1),g.query.office_id){const o=Object.assign({},g.query);delete o.office_id,o.qr&&(G.checkInUser(),delete o.qr),u.replace({query:o})}});const D=async()=>{d.value&&($.value="en-US"),k.logout().then(()=>{z.value&&d.value?u.replace({name:"start"}):u.replace({name:"login"})})},H=()=>{D()},oe=()=>{l.value===!0&&(v.value=!1)},le=()=>{l.value===!0&&(v.value=!0)},re=()=>{f.screen.gt.sm?(l.value=!l.value,l.value===!0&&(v.value=!0)):_.value=!_.value},ie=o=>{l.value&&(l.value=!1,o.stopPropagation())},ue=o=>{ee(null,{url:"https://www.myworkday.com/brandsafway/wdhelp/helpcenter/create",name:"Workday Help"})},me=async()=>{u.push({name:"settings"})};return(o,m)=>{const ce=S("router-view"),de=S("v-idle");return s(),r(he,{view:"hHh lpR fFf"},{default:t(()=>[e(ve,{elevated:""},{default:t(()=>[e(F,{style:{height:"62px"}},{default:t(()=>[e(M,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:re}),n(f).screen.gt.sm?(s(),q("img",Re)):i("",!0),e(W,null,{default:t(()=>[n(f).screen.lt.sm?(s(),q("span",Ae)):(s(),q("span",We,b(n(te)),1))]),_:1}),h("div",Fe,[e(Be,{dense:"",borderless:"",class:"lang-white"}),e(M,{flat:"",dense:"",color:"white"},{default:t(()=>[h("div",null,b(n(k).getUser[35])+" "+b(n(k).getUser[37]),1),e(Q,{right:"",size:"2.2em",name:"account_circle"}),e(ye,null,{default:t(()=>[h("div",Ke,[h("div",Ge,[e(Q,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),h("div",Je,b(n(k).getUser[35])+" "+b(n(k).getUser[37]),1),A(e(M,{color:"primary",label:o.$t("settings"),push:"",size:"sm",class:"q-mb-xs",onClick:me},null,8,["label"]),[[K]]),A(e(M,{color:"primary",label:o.$t("logout"),push:"",size:"sm",onClick:D},null,8,["label"]),[[K]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),e(ke,{modelValue:_.value,"onUpdate:modelValue":m[1]||(m[1]=c=>_.value=c),side:"left","show-if-above":"",bordered:"",mini:l.value&&v.value,onMouseover:oe,onMouseout:le,onClickCapture:ie,class:"text-primary bg-white"},{default:t(()=>[e(ge,{class:"fit"},{default:t(()=>[n(f).screen.lt.sm?(s(),r(F,{key:0,style:{height:"64px"}},{default:t(()=>[e(W,{class:"items-center"},{default:t(()=>[e(be,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):i("",!0),e(T,{class:"q-mt-sm"},{default:t(()=>[(s(!0),q(J,null,X(n(ae),c=>(s(),r(Ne,L({key:c.title},c,{mini:l.value}),null,16,["mini"]))),128))]),_:1}),n(C)==="Project User"||n(C)==="QuickBase User"?(s(),r(T,{key:1,class:"q-mt-sm"},{default:t(()=>[h("div",null,[n(C)==="Project User"?(s(),r(E,{key:0,class:U(["rounded-borders bg-white",{"q-ma-sm":!l.value,"q-ma-xs":l.value}]),clickable:"",onClick:m[0]||(m[0]=c=>x.value=!0)},{default:t(()=>[e(p,{avatar:""},{default:t(()=>[e(Q,{name:"fa-solid fa-circle-info"})]),_:1}),e(p,null,{default:t(()=>[e(I,null,{default:t(()=>[V("Request Support "+b(n(Z)),1)]),_:1})]),_:1})]),_:1},8,["class"])):i("",!0),n(C)==="QuickBase User"?(s(),r(E,{key:1,class:U(["rounded-borders bg-white",{"q-ma-sm":!l.value,"q-ma-xs":l.value}]),clickable:"",onClick:ue},{default:t(()=>[e(p,{avatar:""},{default:t(()=>[e(Q,{name:"fa-solid fa-circle-info"})]),_:1}),e(p,null,{default:t(()=>[e(I,null,{default:t(()=>[V("Workday Help")]),_:1})]),_:1})]),_:1},8,["class"])):i("",!0)])]),_:1})):i("",!0)]),_:1})]),_:1},8,["modelValue","mini"]),e(qe,null,{default:t(()=>[e(ce)]),_:1}),n(d)?(s(),r(xe,{key:0,modelValue:y.value,"onUpdate:modelValue":m[2]||(m[2]=c=>y.value=c)},null,8,["modelValue"])):i("",!0),n(d)?(s(),r(de,{key:1,onIdle:H,duration:300,style:{display:"none"}})):i("",!0),n(d)&&n(z)&&n(ne)?(s(),r(M,{key:2,icon:"o_home",onClick:H,class:"z-max home-button-main",size:"xl",ripple:!0})):i("",!0),e(Ve),e(Ee,{modelValue:x.value,"onUpdate:modelValue":m[3]||(m[3]=c=>x.value=c)},null,8,["modelValue"])]),_:1})}}};export{Et as default};
