import{l as M,bS as V,_ as D,y as t,ap as l,bq as a,d as o,cU as O,B as n,ab as d,z as i,aq as k,cW as P,bV as f,cT as U,r as h,c as Q,D as $,aw as R,bT as F,w as I,b4 as q,bP as W,bs as G,F as J,b3 as K,E as X}from"./index.8e33b0c3.js";import{a as Y,Q as E}from"./QHeader.db27a7f8.js";import{Q as Z}from"./QMenu.d82e9973.js";import{Q as N}from"./QToolbar.50e50760.js";import{Q as x}from"./QImg.196caa27.js";import{Q as ee}from"./QList.84cef65e.js";import{a as te,Q as oe}from"./QDrawer.6a052701.js";import{a as se,Q as ae}from"./QLayout.244a003f.js";import{C as re}from"./ClosePopup.db552d34.js";import{u as ne}from"./use-quasar.cb503685.js";import{u as le}from"./useQuerySaver.d29ff9ee.js";import{u as ie,b as me,q as ce}from"./app.b339b179.js";import{u as T}from"./dataStore.876ce2d7.js";import{_ as ue}from"./version.615ef6c0.js";import{M as de}from"./MenuNav.09db83f8.js";import{_ as pe}from"./languageSelector.dcb38b20.js";import"./dayjs.5512aee7.js";import{Q as ye}from"./QSpinnerBall.a8844c4f.js";import{a as ge}from"./syncEmployeeWithWorkday.0144a020.js";import"./QResizeObserver.e268dbef.js";import"./position-engine.c86eec0a.js";import"./selection.4231ac67.js";import"./TouchPan.0204735a.js";import"./touch.3df10340.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.aedf7e5a.js";import"./index.04bc0a32.js";import"./i18n.3befcc18.js";import"./QSelect.8316c945.js";import"./QChip.12e4a464.js";import"./rtl.b51694b1.js";import"./QBadge.13545b4d.js";import"./MenuSubLink.6675d7bd.js";import"./QSlideTransition.88c9e546.js";const fe=M({props:{employee:Object,mini:Boolean},setup(e){const s=V();return T(),{props:e,goToTermination:()=>{s.push({name:"ee-termination"})}}}}),ke={class:"text-h5 text-white q-mb-sm"},ve={key:0,class:"text-body1 text-white q-mb-sm"},we={class:"text-body1 text-white"};function he(e,s,p,v,r,y){return t(),l(U,{class:"bg-accent q-my-lg q-pt-none",flat:"",square:""},{default:a(()=>[o(O,{class:"text-center q-pb-xs"},{default:a(()=>[n("div",ke,d(e.employee[24]),1),e.employee[378]!==""?(t(),i("div",ve,"ID: "+d(e.employee[378]),1)):k("",!0),n("div",we,d(e.employee[25]),1)]),_:1}),e.$can("manage","employees")?(t(),l(P,{key:0,class:"q-pb-xs",align:"center"},{default:a(()=>[e.$can("create","releases")&&e.$route.name!=="ee-termination"&&e.$route.name!=="view-ee-release"&&!e.employee[581]&&e.employee[408]==="Active"&&e.employee[79]===7?(t(),l(f,{key:0,label:"Release",color:"primary",dense:"",onClick:e.goToTermination},null,8,["onClick"])):k("",!0)]),_:1})):k("",!0)]),_:1})}var be=D(fe,[["render",he]]);const $e=M({name:"Last Workday Sync",props:{employee:Object},setup(e){const s=h(!0),{setWorkdayData:p,updateViewedEmployees:v,getEmployee:r}=T(),y=async c=>{s.value=!0;const{clm:w,sync:b}=await ge({clm:e.employee},c);b&&(p({id:w[3],data:b}),v({id:w[3],dataset:"workday",data:b})),s.value=!1},m=Q(()=>r(e.employee[3])&&r(e.employee[3]).workday?r(e.employee[3]).workday:null),g=Q(()=>{if(m.value){const{employmentData:c}=m.value;return c&&c.workerStatus&&c.workerStatus.active?"Active":"Terminated"}else return"N/A"});return y(!1),{syncing:s,checkWorkday:y,workday:m,workerStatus:g}}}),qe={key:1};function Ce(e,s,p,v,r,y){return t(),i("div",null,[e.syncing?(t(),i("div",{key:0,class:$(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},[R(" Checking Workday Now... "),o(ye,{class:"q-ml-sm",color:"primary",size:e.$q.screen.gt.lg?"3em":"2em"},null,8,["size"])],2)):k("",!0),e.workday&&!e.syncing?(t(),i("div",qe,[e.workday[22]?(t(),i("div",{key:0,class:$(["text-primary",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"No Data in Workday",2)):(t(),i("div",{key:1,class:$(e.$q.screen.gt.lg?"text-body2":"text-caption")},[n("span",{class:$(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Worker Status:",2),n("span",{class:$(["text-primary text-weight-bold",e.$q.screen.gt.lg?"text-body2":"text-caption"])},d(e.workerStatus),3)],2)),n("div",null,[n("span",{class:$(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Last Check in Workday:",2),n("span",{class:$(["text-weight-light text-secondary text-italic",e.$q.screen.gt.lg?"text-body2":"text-caption"])},d(e.$dayjs(e.workday[1].$d).fromNow()),3),o(f,{color:"accent",label:"Check Now",flat:"",icon:"refresh",size:"sm",onClick:s[0]||(s[0]=m=>e.checkWorkday(!0))})])])):k("",!0)])}var Se=D($e,[["render",Ce]]);const _e=M({name:"View Employee",components:{MenuNav:de,version:ue,languageSelector:pe,BasicEmployeeCard:be,LastWorkdaySync:Se},setup(){const e=h(null),s=h(!1),p=ne(),v=h(!1),r=h(!1),y=h(!1),m=h(!1),g=V(),c=F(),w=ie(),{getUserType:b}=w,{toolbarTitle:S,viewEmployeeMenu:u}=me(),{setEmployees:L,getEmployee:z,updateViewedEmployees:ze}=T(),B=Q(()=>z(c.params.id)),H=async()=>{const{state:C}=g.options.history;e.value=C.back,p.loading.show();const{data:_}=await ce.fetchFromHiringApp({fields:[le({type:"employee",query:"",id:c.params.id})]},{action:"read",type:"employee"});L({id:_[3],data:_}),p.loading.hide()},A=async()=>{w.logout().then(()=>{g.replace({name:"login"})})};H(),I(B,(C,_)=>{});const j=()=>{g.options.history.state.back?g.go(-1):g.push({name:"home"})};return{tab:h("mails"),fab:s,userStore:w,leftDrawerOpen:v,rightDrawerOpen:y,miniState:r,miniHover:m,miniMouseOver(){r.value===!0&&(m.value=!1)},miniMouseOut(){r.value===!0&&(m.value=!0)},toggleLeftDrawer(){p.screen.gt.sm?(r.value=!r.value,r.value===!0&&(m.value=!0)):v.value=!v.value},toggleRightDrawer(){y.value=!y.value},drawerClick(C){r.value&&(r.value=!1,C.stopPropagation())},logout:A,toolbarTitle:S,viewEmployeeMenu:u,employee:B,getUserType:b,opener:e,closeWindow(){window.close()},goBack:j}}}),Qe={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Me={key:0},De={key:1},Te={class:"q-gutter-sm row items-center no-wrap"},Be={class:"row no-wrap q-pa-md"},We={class:"column items-center"},Ee={class:"text-subtitle1 q-mt-md q-mb-xs"},Ne={class:"row items-start"},Ve={class:"col-8"},Oe={key:0,class:"col-4 text-right"},Ue={key:1,class:"col-4 text-right"};function Le(e,s,p,v,r,y){const m=q("languageSelector"),g=q("basic-employee-card"),c=q("MenuNav"),w=q("last-workday-sync"),b=q("router-view"),S=q("version");return t(),l(ae,{view:"hHh lpR fFf"},{default:a(()=>[o(Y,{elevated:""},{default:a(()=>[o(N,{style:{height:"62px"}},{default:a(()=>[o(f,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(t(),i("img",Qe)):k("",!0),o(E,null,{default:a(()=>[e.$q.screen.lt.sm?(t(),i("span",Me)):(t(),i("span",De,d(e.toolbarTitle),1))]),_:1}),n("div",Te,[o(m,{dense:"",borderless:"",class:"lang-white"}),o(f,{flat:"",dense:"",color:"white"},{default:a(()=>[n("div",null,d(e.userStore.getUser[35])+" "+d(e.userStore.getUser[37]),1),o(W,{right:"",size:"2.2em",name:"account_circle"}),o(Z,null,{default:a(()=>[n("div",Be,[n("div",We,[o(W,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),n("div",Ee,d(e.userStore.getUser[35])+" "+d(e.userStore.getUser[37]),1),G(o(f,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[re]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),o(te,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[0]||(s[0]=u=>e.leftDrawerOpen=u),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-accent print-hide"},{default:a(()=>[o(oe,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(t(),l(N,{key:0,class:"bg-white",style:{height:"64px"}},{default:a(()=>[o(E,{class:"items-center"},{default:a(()=>[o(x,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):k("",!0),e.employee?(t(),l(g,{key:1,employee:e.employee,mini:e.miniState},null,8,["employee","mini"])):k("",!0),o(ee,{class:"q-mt-sm"},{default:a(()=>[(t(!0),i(J,null,K(e.viewEmployeeMenu,u=>(t(),l(c,X({key:u.title},u,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),o(se,null,{default:a(()=>[o(U,{class:"print-hide",flat:""},{default:a(()=>[o(O,{class:"q-pb-xs q-pt-sm"},{default:a(()=>[n("div",Ne,[n("div",Ve,[e.employee?(t(),l(w,{key:0,employee:e.employee},null,8,["employee"])):k("",!0)]),e.getUserType==="QuickBase User"?(t(),i("div",Oe,[e.$q.screen.gt.sm?(t(),l(f,{key:0,icon:"close",label:"Close",color:"dark",onClick:s[1]||(s[1]=u=>e.closeWindow())})):(t(),l(f,{key:1,icon:"close",round:"",color:"dark",onClick:s[2]||(s[2]=u=>e.closeWindow())}))])):(t(),i("div",Ue,[e.$q.screen.gt.sm?(t(),l(f,{key:0,icon:"keyboard_return",label:"Go Back",color:"dark",onClick:s[3]||(s[3]=u=>e.goBack())})):(t(),l(f,{key:1,icon:"keyboard_return",round:"",color:"dark",onClick:s[4]||(s[4]=u=>e.goBack())}))]))])]),_:1})]),_:1}),o(b)]),_:1}),o(S)]),_:1})}var ht=D(_e,[["render",Le]]);export{ht as default};
