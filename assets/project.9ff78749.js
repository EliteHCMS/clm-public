import{n as o}from"./index.b35eeed3.js";import{q as i}from"./app.31ce29fc.js";const u=o("viewProject",{state:()=>({project:{},options:{orientations:null,drugScreens:null,fitTests:null,medical:null,backgrounds:null}}),getters:{projectData:e=>e.project,projectCrafts(){return this.project.crafts?this.project.crafts:null}},actions:{async fetchOrientations(){if(this.options.orientations&&this.options.orientations.length>0)return this.options.orientations;{const{data:e}=await i.fetchFromCredentialsAndTrainingApp({fields:[{6:{value:"bp6rvwu6i"},7:{value:"Table Query"},8:{value:"{'7'.EX.'Active'}"},9:{value:1},14:{value:20}}]});return this.options.orientations=e,e}},async fetchDrugScreens(){if(this.options.drugScreens&&this.options.drugScreens.length>0)return this.options.drugScreens;{const{data:e}=await i.fetchFromCredentialsAndTrainingApp({fields:[{6:{value:"bp6rvxmg3"},7:{value:"Table Query"},8:{value:"{'10'.EX.'Active'}"},9:{value:1},14:{value:15}}]});return this.options.drugScreens=e,e}},async fetchBackgroundScreens(){if(this.options.backgrounds&&this.options.backgrounds.length>0)return this.options.backgrounds;{const{data:e}=await i.fetchFromCredentialsAndTrainingApp({fields:[{6:{value:"bp6rvyr7k"},7:{value:"Table Query"},8:{value:"{'6'.GT.0}AND{'11'.XEX.'true'}"},9:{value:1},14:{value:17}}]});return this.options.backgrounds=e,e}},async fetchFitTests(){if(this.options.fitTests&&this.options.fitTests.length>0)return this.options.fitTests;{const{data:e}=await i.fetchFromCredentialsAndTrainingApp({fields:[{6:{value:"bp6rv4qnn"},7:{value:"Table Query"},8:{value:"{'9'.EX.'Active'}"},9:{value:1},14:{value:16}}]});return this.options.fitTests=e,e}},async fetchMedicalScreens(){if(this.options.medical&&this.options.medical.length>0)return this.options.medical;{const{data:e}=await i.fetchFromCredentialsAndTrainingApp({fields:[{6:{value:"bp6rv3ne3"},7:{value:"Table Query"},8:{value:"{'7'.EX.'Active'}"},9:{value:1},14:{value:12}}]});return this.options.medical=e,e}},async fetchProject({id:e}){if(this.project[3]&&this.project[3]===e)return this.project;try{const t=[{9:{value:e},7:{value:"Project"}}],{data:s}=await i.fetchFromProjectsApp({fields:t},{action:"read",type:"project"}),a=await this.fetchProjectRoster(e),r=await this.fetchProjectPipeline(e);return Object.assign(s,{roster:a,pipeline:r}),this.project=s,this.project}catch(t){throw{message:"Something went wrong",error:t}}},async fetchProjectRoster(e){const{data:t}=await i.fetchFromHiringApp({fields:[{6:{value:"bp3gazpqj"},7:{value:"Table Query"},8:{value:`{'173'.EX.'${e}'}AND{'21'.EX.'In Process'}AND{'102'.EX.'Active'}`},9:{value:1},14:{value:132}}]});return t},async fetchProjectPipeline(e){const t=await this.getInProcesses(e),s=await this.getDispatches(e),a=await this.getDeployments(e);return{inProcess:t.sort((r,n)=>r[3]>n[3]?-1:1),dispatches:s.sort((r,n)=>r[3]>n[3]?-1:1),deployments:a.sort((r,n)=>r[3]>n[3]?-1:1)}},async getInProcesses(e){const{data:t}=await i.fetchFromHiringApp({fields:[{6:{value:"bp3gawbee"},7:{value:"Table Query"},8:{value:`{'108'.EX.'${e}'}AND{'37'.EX.'In Process'}`},9:{value:1},14:{value:239}}]});return t},async getDispatches(e){const{data:t}=await i.fetchFromHiringApp({fields:[{6:{value:"bp3gaxedv"},7:{value:"Table Query"},8:{value:`{'94'.EX.'${e}'}AND{'17'.EX.'In Process'}`},9:{value:1},14:{value:193}}]});return t},async getDeployments(e){const{data:t}=await i.fetchFromHiringApp({fields:[{6:{value:"bp3gaymc3"},7:{value:"Table Query"},8:{value:`{'134'.EX.'${e}'}AND({'33'.OAF.'today'}OR{'33'.IR.'last 10 d'})AND({'20'.EX.'In Process'}OR{'20'.EX.'Complete'})AND{'128'.EX.'Yes'}AND({'27'.EX.'6'}OR{'27'.EX.'7'})`},9:{value:1},14:{value:201}}]});return t},pushNewObject({array:e,object:t}){this.project[e].unshift(t)},pushNewRequirementOptions({array:e,object:t}){this.options[e].unshift(t)},storeNewRequirements({index:e,array:t,object:s}){this.project.requirements[e][t].unshift(s)},removeObject({array:e,object:t}){const s=this.project[e].findIndex(a=>a[3]===t[3]);s>-1&&this.project[e].splice(s,1)},upsertProjectCraft({craft:e}){const t=this.project.crafts.findIndex(s=>s[3]===e[3]);t>-1?this.project.crafts[t]=e:this.project.crafts.push(e)}}});export{u};
