import{Q as Pe}from"./QPage.076a4a22.js";import{Q as K,a as ce,b as Z}from"./QTabPanels.8debf809.js";import{Q as be}from"./QTabs.809dd373.js";import{Q as De}from"./QToolbar.cdfb5494.js";import{u as ne}from"./use-quasar.8f886427.js";import{l as Y,c as F,_ as I,y as d,z as c,B as a,d as o,bq as l,cT as X,cU as Q,ab as m,ap as h,cV as T,aq as j,bR as Te,cW as ee,bV as $,bN as oe,bU as te,r as w,w as Re,b4 as M,F as H,b3 as G,cz as Fe,D,au as Ee,v as Ae,bP as x,aw as ye,bs as Ve,ds as Ce,bL as Ne}from"./index.ffe008a3.js";import{Q as ge}from"./QMarkupTable.790f93ea.js";import{a as _}from"./QSelect.ae55bb14.js";import{Q as ae}from"./QForm.6fe618de.js";import{Q as Qe}from"./QSplitter.1a7c0d5e.js";import{a as ie,u as U}from"./vee-validate.esm.d1883a78.js";import{a as B,f as Me,c as O,d as Ye}from"./array.164cfe36.js";import{e as Ie}from"./export-file.dc78ba05.js";import{o as W,u as Se,q as L,g as $e,p as re}from"./app.5c870bdd.js";import{dayjs as ve}from"./dayjs.90447d16.js";import{u as Oe}from"./project.4b5ad551.js";import{Q as Ue}from"./QSpace.df74a9a4.js";import{Q as he}from"./QTable.38b8ded1.js";import{p as Le}from"./VueTelInput.b9c1c80c.js";import{Q as ze}from"./QBadge.4a45e36f.js";import{Q as ke}from"./QSlideTransition.513b5081.js";import"./use-panel.71d52368.js";import"./touch.3df10340.js";import"./selection.67688afd.js";import"./QResizeObserver.825a34be.js";import"./rtl.b51694b1.js";import"./QChip.3ca5e7ec.js";import"./QMenu.1f533564.js";import"./position-engine.a8f2d15a.js";import"./TouchPan.ffe7de1c.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.24be37ee.js";import"./index.04bc0a32.js";import"./i18n.ee1ec30d.js";import"./QList.ec7dea95.js";import"./use-fullscreen.6e4ff1be.js";const Be=Y({props:{job:Object,craft:Object},setup(e,t){const u=ne(),{udpateProjectCrafts:f}=W(),{upsertProjectCraft:p}=Oe(),{getUser:b}=Se(),r=F(()=>e.craft.options.jobs.find(E=>E[3]===e.job[13]).aliases),s=F(()=>B({alias:B().required().label("Custom Job Title"),fixedRate:Me().moreThan(7.25,"Fixed rate must be greater than minimum wage.").lessThan(1e3).label("Fixed Rate").nullable()})),{meta:n,errors:R,handleSubmit:V,handleReset:J}=ie({validationSchema:s,initialValues:{alias:{3:e.job[9],7:e.job[18]},fixedRate:e.job.fixedRate>0?e.job.fixedRate:null}}),{value:P}=U("alias"),{value:A}=U("fixedRate"),S=V(async C=>{console.log(C),u.loading.show();const E={3:{value:e.job[3]},20:{value:e.craft[3]}};P.value!=={3:e.job[9],7:e.job[18]}&&Object.assign(E,{9:{value:C.alias[3]}}),A.value&&A.value!==e.job.fixedRate&&Object.assign(E,{155:{value:C.fixedRate}});try{const{data:N}=await L.upsertRecordsXML({to:"bpzpx5m7x",data:[E],fieldsToReturn:[153],formatObject:153});N.length>0&&(b[64]==="Hiring Group"?p({craft:N[0][153]}):f({craft:N[0][153]}),J(),u.loading.hide(),u.notify({type:"positive",message:"New job added!"}),t.emit("closeEditJob"))}catch{u.notify({type:"negative",message:"Something went wrong"})}});async function q(C,E){u.dialog({title:"Confirm",message:`Confirm you want to add "${C}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:N}=await L.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:e.job[13]},7:{value:C},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});console.log(N),N.length>0&&(P.value=N[0][25],E(N[0][25]))}catch{u.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{E()})}return console.log(b),{formMeta:n,formErrors:R,submit:S,alias:P,fixedRate:A,aliasOptions:r,submitAlias:q}}}),Xe={class:"text-body1 text-white"},We={class:"text-caption"},He={class:"text-caption"};function Ge(e,t,u,f,p,b){return d(),c("div",null,[a("div",null,[o(ae,{onSubmit:oe(e.submit,["prevent"])},{default:l(()=>[o(X,null,{default:l(()=>[o(Q,{class:"bg-dark"},{default:l(()=>[a("div",Xe,"Edit "+m(e.craft[10])+" "+m(e.job[18]),1)]),_:1}),o(Q,null,{default:l(()=>[o(_,{class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[0]||(t[0]=r=>e.alias=r),options:e.aliasOptions,"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":"",behavior:e.$q.platform.is.ios===!0?"dialog":"menu"},{error:l(()=>[a("div",We,m(e.formErrors.alias),1)]),_:1},8,["modelValue","options","display-value","error","onNewValue","behavior"]),e.$can("manage","rates")?(d(),h(T,{key:0,step:"any",prefix:"$",type:"number",dense:"",label:"Fixed Rate",modelValue:e.fixedRate,"onUpdate:modelValue":t[1]||(t[1]=r=>e.fixedRate=r),error:!!e.formErrors.fixedRate,"bottom-slots":""},{error:l(()=>[a("div",He,m(e.formErrors.fixedRate),1)]),_:1},8,["modelValue","error"])):j("",!0)]),_:1}),o(Te),o(ee,{class:"bg-accent",align:"right"},{default:l(()=>[o($,{size:e.$q.screen.lt.md?"sm":"",color:"secondary",label:"Cancel",onClick:t[2]||(t[2]=r=>e.$emit("closeEditJob"))},null,8,["size"]),o($,{type:"submit",size:e.$q.screen.lt.md?"sm":"",color:"primary",label:"Save"},null,8,["size"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}var Ke=I(Be,[["render",Ge]]);const Ze=[{name:0,label:"Job Title",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Avg. Rate",align:"right",field:e=>e.avgRate,format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:3,label:"Times Requested",align:"right",field:e=>e.timesRequested,format:e=>`${e}`,sortable:!0},{name:4,label:"Quantity Requested",align:"right",field:e=>e.qtyRequested,format:e=>`${e}`,sortable:!0}],je=[{name:0,label:"Craft",align:"left",field:e=>e.craft,format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Job Title",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Contract Rate",align:"left",field:e=>e.rate,format:e=>`${e}`,sortable:!0,required:!0}],_e=Y({components:{EditJobDialog:Ke},setup(){const e=ne(),{projectCrafts:t,active:u}=te(W()),{udpateProjectCrafts:f}=W(),p=w(t.value[0][3]),b=w(!1),r=w(!1),s=w(null),n=w(null);Re(u,(y,g)=>{p.value=y.crafts.sort((i,v)=>i.order>v.order?1:-1)[0][3]});const R=F(()=>{const y=[];return t.value.forEach(g=>{for(let i=0;i<g.classifications.length;i++)y.push({craft:g[10],title:g.classifications[i][18],rate:g.classifications[i].fixedRate>0?`$${g.classifications[i].fixedRate.toFixed(2)}`:"N/A"})}),y}),V=F(()=>{const y=t.value.find(g=>g[3]===p.value).classifications;return y!==void 0?y.sort((g,i)=>g.order>i.order||g.order===i.order&&g.fixedRate>i.fixedRate?-1:1):[]}),J=B({job:B().required("Job is required."),alias:B().required("Alias is required.").nullable()}),{meta:P,errors:A,handleSubmit:S,handleReset:q}=ie({validationSchema:J}),{value:C}=U("job"),{value:E}=U("alias"),N=S(async y=>{const g=t.value.find(i=>i[9]===y.job[13]);if(g===void 0)e.notify({type:"negative",message:"Something went wrong"});else try{const{data:i}=await L.upsertRecordsXML({to:"bpzpx5m7x",data:[{9:{value:y.alias[3]},13:{value:y.job[3]},20:{value:g[3]}}],fieldsToReturn:[153],formatObject:153});i.length>0&&(f({craft:i[0][153]}),q(),b.value=!1,e.notify({type:"positive",message:"New job added!"}))}catch{e.notify({type:"negative",message:"Something went wrong"})}});async function k(y,g){e.dialog({title:"Confirm",message:`Confirm you want to add "${y}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:i}=await L.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:C.value[3]},7:{value:y},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});console.log(i),i.length>0&&(E.value=i[0][25],g(i[0][25]))}catch{e.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{g()})}function z(){b.value=!1,q()}function le({craft:y,job:g}){s.value=y,n.value=g,r.value=!0,console.log(y),console.log(g)}function de(){s.value=null,n.value=null,r.value=!1}function ue(y,g,i){let v=g!==void 0?g(y,i):y;return v=v==null?"":String(v),v=v.split('"').join('""'),`"${v}"`}return{projectCrafts:t,tab:p,columns:Ze,initialPagination:{rowsPerPage:100},splitValue:w(20),showAddJob:b,showEditJob:r,formMeta:P,formErrors:A,job:C,alias:E,submitJob:N,submitAlias:k,cancelAddJob:z,editJob:le,rows:V,editJobCraft:s,editJobJob:n,closeEditJob:de,exportAllJobs(){const y=[je.map(i=>ue(i.label))].concat(R.value.map(i=>je.map(v=>ue(typeof v.field=="function"?v.field(i):i[v.field===void 0?v.name:v.field],v.format,i)).join(","))).join(`\r
`);Ie(`${ve().format("MM.DD.YYYY")} ${u.value[20]} All-Jobs-Export.csv`,y,"text/csv")!==!0&&e.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}}}),xe={key:0},et={key:0,class:"q-mb-sm"},tt=a("thead",{class:"bg-dark text-white"},[a("tr",null,[a("th",{class:"text-left"},"Job Title"),a("th",{class:"text-right"},"Fixed Rate"),a("th",{class:"text-right"},"Times Requested"),a("th",{class:"text-right"},"Qty Requested"),a("th")])],-1),ot={class:"text-left"},at={class:"text-right"},lt={class:"text-right"},st={class:"text-right"},rt={class:"text-right"},nt={key:1},it={class:"row justify-between"},dt={class:"col-5"},ut={class:"text-caption"},mt={class:"col-6"},pt={class:"text-caption"},ft={key:1},ct={key:0},bt={class:"q-mb-sm"},gt=a("thead",{class:"bg-dark text-white"},[a("tr",null,[a("th",{class:"text-left"},"Job Title"),a("th",{class:"text-right"},"Fixed Rate"),a("th",{class:"text-right"},"Avg. Rate"),a("th",{class:"text-right"},"Times Requested"),a("th",{class:"text-right"},"Quantity"),a("th")])],-1),vt={class:"text-left"},yt={class:"text-right"},ht={class:"text-right"},$t={class:"text-right"},wt={class:"text-right"},qt={class:"text-right"},Vt={key:1},Ct={class:"text-caption"},Nt={class:"text-caption"};function kt(e,t,u,f,p,b){const r=M("edit-job-dialog");return d(),c("div",null,[e.$q.screen.gt.sm?(d(),h(Qe,{key:0,modelValue:e.splitValue,"onUpdate:modelValue":t[5]||(t[5]=s=>e.splitValue=s)},{before:l(()=>[o(be,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=s=>e.tab=s),vertical:e.$q.screen.gt.md,align:"left","indicator-color":"accent","active-bg-color":"dark","active-color":"white"},{default:l(()=>[(d(!0),c(H,null,G(e.projectCrafts,s=>(d(),h(K,{key:s[3],name:s[3],label:s[10]},null,8,["name","label"]))),128))]),_:1},8,["modelValue","vertical"])]),after:l(()=>[o(ce,{modelValue:e.tab,"onUpdate:modelValue":t[4]||(t[4]=s=>e.tab=s),animated:"",vertical:e.$q.screen.gt.md},{default:l(()=>[(d(!0),c(H,null,G(e.projectCrafts,s=>(d(),h(Z,{key:s[3],name:s[3],class:"q-pt-none"},{default:l(()=>[e.showAddJob?(d(),c("div",nt,[o(ae,{onSubmit:oe(e.submitJob,["prevent"])},{default:l(()=>[o(X,{flat:""},{default:l(()=>[o(Q,null,{default:l(()=>[a("div",it,[a("div",dt,[o(_,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[2]||(t[2]=n=>e.job=n),options:s.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:l(()=>[a("div",ut,m(e.formErrors.job),1)]),_:2},1032,["modelValue","options","display-value","error"])]),a("div",mt,[o(_,{disable:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[3]||(t[3]=n=>e.alias=n),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":"",behavior:e.$q.platform.is.ios===!0?"dialog":"menu"},{error:l(()=>[a("div",pt,m(e.formErrors.alias),1)]),_:1},8,["disable","modelValue","options","display-value","error","onNewValue","behavior"])])])]),_:2},1024),o(ee,{align:"right"},{default:l(()=>[o($,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),o($,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:2},1024)]),_:2},1032,["onSubmit"])])):(d(),c("div",xe,[e.$can("create","jobs")?(d(),c("div",et,[o($,{color:"primary",label:"Add Another Job",onClick:t[1]||(t[1]=n=>e.showAddJob=!0)}),e.$can("read","jobs")?(d(),h($,{key:0,class:"q-ml-sm",color:"info",label:"Export All Jobs",onClick:e.exportAllJobs},null,8,["onClick"])):j("",!0)])):j("",!0),o(ge,null,{default:l(()=>[tt,a("tbody",null,[(d(!0),c(H,null,G(e.rows,n=>(d(),c("tr",{key:n[3]},[a("td",ot,m(n[18]),1),a("td",at,m(n.fixedRate>0?`$ ${n.fixedRate.toFixed(2)}`:"Edit to Add"),1),a("td",lt,m(n.timesRequested),1),a("td",st,m(n.qtyRequested),1),a("td",rt,[e.$can("manage","jobs")?(d(),h($,{key:0,size:"sm",label:"edit",color:"primary",onClick:R=>e.editJob({craft:s,job:n})},null,8,["onClick"])):j("",!0)])]))),128))])]),_:2},1024)]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","vertical"])]),_:1},8,["modelValue"])):(d(),c("div",ft,[o(be,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=s=>e.tab=s),align:"left",class:"shadow-2","indicator-color":"accent"},{default:l(()=>[(d(!0),c(H,null,G(e.projectCrafts,s=>(d(),h(K,{key:s[3],name:s[3],label:s.abbr},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),o(ce,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=s=>e.tab=s),animated:""},{default:l(()=>[(d(!0),c(H,null,G(e.projectCrafts,s=>(d(),h(Z,{key:s[3],name:s[3]},{default:l(()=>[e.showAddJob?(d(),c("div",Vt,[o(ae,{onSubmit:oe(e.submitJob,["prevent"])},{default:l(()=>[o(X,{flat:""},{default:l(()=>[o(Q,null,{default:l(()=>[o(_,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[8]||(t[8]=n=>e.job=n),options:s.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:l(()=>[a("div",Ct,m(e.formErrors.job),1)]),_:2},1032,["modelValue","options","display-value","error"]),o(_,{disabled:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[9]||(t[9]=n=>e.alias=n),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":"",behavior:e.$q.platform.is.ios===!0?"dialog":"menu"},{error:l(()=>[a("div",Nt,m(e.formErrors.alias),1)]),_:1},8,["disabled","modelValue","options","display-value","error","onNewValue","behavior"])]),_:2},1024),o(ee,{align:"right"},{default:l(()=>[o($,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),o($,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:2},1024)]),_:2},1032,["onSubmit"])])):(d(),c("div",ct,[a("div",bt,[o($,{color:"primary",label:"Add Another Job",onClick:t[7]||(t[7]=n=>e.showAddJob=!0)})]),o(ge,null,{default:l(()=>[gt,a("tbody",null,[(d(!0),c(H,null,G(e.rows,n=>(d(),c("tr",{key:n[3]},[a("td",vt,m(n[18]),1),a("td",yt,m(n.fixedRate>0?`$ ${n.fixedRate.toFixed(2)}`:"N/A"),1),a("td",ht,"$ "+m(n.avgRate.toFixed(2)),1),a("td",$t,m(n.timesRequested),1),a("td",wt,m(n.qtyRequested),1),a("td",qt,[o($,{size:"sm",label:"edit",color:"primary",onClick:R=>e.editJob(n)},null,8,["onClick"])])]))),128))])]),_:1})]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])),o(Fe,{modelValue:e.showEditJob,"onUpdate:modelValue":t[11]||(t[11]=s=>e.showEditJob=s),persistent:""},{default:l(()=>[o(r,{craft:e.editJobCraft,job:e.editJobJob,onCloseEditJob:e.closeEditJob},null,8,["craft","job","onCloseEditJob"])]),_:1},8,["modelValue"])])}var jt=I(_e,[["render",kt]]);const Rt=Y({components:{phoneNumberInput:Le},setup(e,t){const u=ne(),f=w(10),p=w(null),{active:b}=te(W()),{userPermissions:r,getUser:s}=te(Se()),{addUser:n}=W(),R=F(()=>{const i=r.value.find(v=>v[7]==="create"&&v[16]==="users");return i!==void 0?i.roles:[]}),V=F(()=>{const i=new RegExp("^[0-9]{"+f.value+"}","g");return B({firstName:O().required().label("First Name"),lastName:O().required().label("Last Name"),email:O().email().required().label("Email"),phoneNumber:O().matches(i,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number"),role:B().required().nullable().label("Role"),workdayId:O().required().label("Workday ID")})}),{meta:J,errors:P,handleSubmit:A,handleReset:S}=ie({validationSchema:V}),{value:q}=U("firstName"),{value:C}=U("lastName"),{value:E}=U("email"),{value:N}=U("phoneNumber"),{value:k}=U("role"),{value:z}=U("workdayId"),le=A(async i=>{console.log(i);const v={userType:"Project User",phoneNumber:`+${p.value?p.value.dialCode:"1"}${i.phoneNumber}`,email:i.email};if(b.value.users.filter(se=>se[6]===v.email||se[8]===v.phoneNumber).length>0)u.dialog({title:"Alert",message:"Your project already has a user with that phone or email."}).onOk(()=>{t.emit("userAdded")});else{const se=await L.checkIfUserExist(v);if(se){const{data:me}=await L.upsertRecordsXML({to:"br598isx6",data:[{6:{value:se[3]},7:{value:"Project"},9:{value:b.value[3]}}],fieldsToReturn:[28],formatObject:28});me.length>0&&(n({user:me[0][28]}),u.notify({type:"positive",message:"User successfully added"}),t.emit("userAdded"))}else{const me=E.value.match(/^([^@]*)@/)[1],Je=Object.assign({phoneNumber:N.value},p.value),{data:qe}=await L.upsertRecordsXML({to:"br4pxrbs6",data:[{6:{value:i.email},7:{value:"temp"},8:{value:`+${p.value?p.value.dialCode:"1"}${i.phoneNumber}`},9:{value:JSON.stringify(Je)},10:{value:"Active"},11:{value:i.role[3]},17:{value:!0},23:{value:s.value[3]},24:{value:s.value[3]},25:{value:new Date},26:{value:new Date},32:{value:"Project User"},33:{value:me},35:{value:q.value},37:{value:C.value},49:{value:!0},50:{value:!0},70:{value:i.workdayId}}],fieldsToReturn:[3,96],formatObject:96});if(qe[0]!==void 0){const pe=await L.upsertRecordsXML({to:"br598isx6",data:[{6:{value:qe[0][3]},7:{value:"Project"},9:{value:b.value[3]}}],fieldsToReturn:[28],formatObject:28});pe.data[0]!==void 0&&(n({user:pe.data[0][28]}),console.log(pe.data[0][28]),u.dialog({title:"Confirm",message:"User successfully added. Would you like to send them an invite?",cancel:!0,persistent:!0}).onOk(async()=>{(await L.upsertRecordsXML({to:"br4pxrbs6",data:[{3:{value:pe.data[0][28][3]},93:{value:new Date}}],fieldsToReturn:[3]})).data[0]!==void 0&&(u.notify({type:"positive",message:"User successfully added"}),u.notify({type:"positive",message:"User invite submitted"}),t.emit("userAdded"))}).onCancel(()=>{u.notify({type:"positive",message:"User successfully added"}),t.emit("userAdded")}))}}}S()}),de=F(()=>{const i=[];return b.value.users.forEach(v=>{console.log(v),i.push(v[9].phoneNumber)}),i});Re(N,i=>{de.value.includes(i)&&u.notify({type:"negative",message:"Phone Number is already in use!",timeout:1e4,position:u.screen.lt.md?"top":"center"})});const ue=i=>{p.value=i},y=i=>{f.value=i};function g(){S(),t.emit("userCanceled")}return console.log(r.value,de.value),{updateCountry:ue,updatePhoneMaxLength:y,firstName:q,lastName:C,email:E,phoneNumber:N,role:k,workdayId:z,formMeta:J,formErrors:P,submitUser:le,active:b,roleOptions:R,cancel:g}}}),Et=a("div",{class:"text-primary text-h6 q-mb-sm"},"Add a New User",-1),At={class:"row justify-between"},St={class:"row justify-between"},Ut={class:"text-caption"},Jt={class:"text-caption"};function Pt(e,t,u,f,p,b){const r=M("phone-number-input");return d(),c("div",null,[o(X,null,{default:l(()=>[o(ae,{onSubmit:oe(e.submitUser,["prevent"])},{default:l(()=>[o(Q,null,{default:l(()=>[Et,a("div",At,[a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(T,{dense:"",outlined:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=s=>e.firstName=s),error:!!e.formErrors.firstName},null,8,["modelValue","error"])],2),a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(T,{dense:"",outlined:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=s=>e.lastName=s),error:!!e.formErrors.lastName},null,8,["modelValue","error"])],2),a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(T,{dense:"",outlined:"",label:"Workday ID",modelValue:e.workdayId,"onUpdate:modelValue":t[2]||(t[2]=s=>e.workdayId=s),error:!!e.formErrors.workdayId},null,8,["modelValue","error"])],2)]),a("div",St,[a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(r,{name:"phoneNumber",class:"col-xs-12 col-sm-12",outlined:"",modelValue:e.phoneNumber,"onUpdate:modelValue":t[3]||(t[3]=s=>e.phoneNumber=s),label:"Phone Number",tabindex:"3",onMaxLengthChanged:e.updatePhoneMaxLength,error:!!e.formErrors.phoneNumber,"error-message":e.formErrors.phoneNumber,onCountryChanged:e.updateCountry,dense:""},null,8,["modelValue","onMaxLengthChanged","error","error-message","onCountryChanged"])],2),a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(T,{dense:"",outlined:"",label:"Email","bottom-slots":"",modelValue:e.email,"onUpdate:modelValue":t[4]||(t[4]=s=>e.email=s),error:!!e.formErrors.email},{error:l(()=>[a("div",Ut,m(e.formErrors.email),1)]),_:1},8,["modelValue","error"])],2),a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(_,{dense:"",outlined:"",label:"Role","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.role,"onUpdate:modelValue":t[5]||(t[5]=s=>e.role=s),options:e.roleOptions,"option-label":"6","display-value":`${e.role?e.role[6]:""}`,"bottom-slots":"",error:!!e.formErrors.role},{error:l(()=>[a("div",Jt,m(e.formErrors.role),1)]),_:1},8,["modelValue","options","display-value","error"])],2)])]),_:1}),o(ee,{align:"right"},{default:l(()=>[o($,{color:"secondary",onClick:e.cancel,label:"Cancel"},null,8,["onClick"]),o($,{color:"primary",type:"submit",label:"Submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})])}var Dt=I(Rt,[["render",Pt]]);const Tt=[{name:0,label:"Date Created",align:"left",field:e=>e[1],format:e=>`${$e.formatDate(e.$d,"MM/DD/YYYY")}`,sortable:!0},{name:1,label:"Name",align:"left",field:e=>e[35],format:(e,t)=>`${e} ${t[37]}`,sortable:!0},{name:2,label:"Role",align:"left",field:e=>e[44],format:e=>`${e}`,sortable:!0},{name:3,label:"Email",align:"left",field:e=>e[6],format:e=>`${e}`,sortable:!0},{name:4,label:"Last Access",align:"left",field:e=>e.lastLogin,format:(e,t)=>`${t.registered?e.date:"Never"}`,sortable:!0}],Ft=Y({components:{CreateUser:Dt},setup(){const{usersForProject:e}=te(W()),t=w(!1);function u(){t.value=!1}function f(p){console.log(p)}return{usersForProject:e,columns:Tt,initialPagination:{rowsPerPage:100},showAddUser:t,userAdded:u,sendInvite:f}}}),Qt={key:1};function Mt(e,t,u,f,p,b){const r=M("create-user");return d(),c("div",null,[e.showAddUser?(d(),c("div",Qt,[o(r,{onUserAdded:e.userAdded,onUserCanceled:t[1]||(t[1]=s=>e.showAddUser=!1)},null,8,["onUserAdded"])])):(d(),h(he,{key:0,rows:e.usersForProject.sort((s,n)=>s[44]>n[44]?-1:1),columns:e.columns,"hide-pagination":!0,"row-key":"name",pagination:e.initialPagination,"table-header-class":"bg-dark text-white"},Ee({_:2},[e.$can("create","users")?{name:"top",fn:l(()=>[o($,{color:"primary",label:"Add Another User",onClick:t[0]||(t[0]=s=>e.showAddUser=!0)}),o(Ue)]),key:"0"}:void 0]),1032,["rows","columns","pagination"]))])}var Yt=I(Ft,[["render",Mt]]);const It=Y({setup(e,t){const u=w(10),f=w(null),{capitalize:p}=Ae,{updateNewEmployee:b}=re(),r=F(()=>{const q=new RegExp("^[0-9]{"+u.value+"}","g");return B({firstName:O().required().label("First Name"),lastName:O().required().label("Last Name"),phoneNumber:O().matches(q,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number")})}),{meta:s,errors:n,handleSubmit:R,handleReset:V}=ie({validationSchema:r}),{value:J}=U("firstName"),{value:P}=U("lastName"),{value:A}=U("phoneNumber"),S=R(async q=>{const C={20:p(q.firstName.trim().toLowerCase()),22:p(q.lastName.trim().toLowerCase()),25:q.phoneNumber};b({info:C}),t.emit("complete",1),V()});return{country:f,firstName:J,lastName:P,phoneNumber:A,formMeta:s,formErrors:n,submit:S,cancel(){V(),t.emit("cancel")}}}}),Ot={class:"row justify-between"},Lt={class:"text-caption"},zt={class:"text-caption"},Bt={class:"text-caption"};function Xt(e,t,u,f,p,b){return d(),c("div",null,[o(ae,{onSubmit:oe(e.submit,["prevent"])},{default:l(()=>[o(X,{flat:"",class:"q-pl-md q-mt-sm"},{default:l(()=>[o(Q,{class:"q-px-none q-pb-none"},{default:l(()=>[a("div",Ot,[a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(T,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=r=>e.firstName=r),error:!!e.formErrors.firstName,"bottom-slots":""},{error:l(()=>[a("div",Lt,m(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"])],2),a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(T,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=r=>e.lastName=r),error:!!e.formErrors.lastName,"bottom-slots":""},{error:l(()=>[a("div",zt,m(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])],2),a("div",{class:D(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(T,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=r=>e.phoneNumber=r),error:!!e.formErrors.phoneNumber,"bottom-slots":""},{error:l(()=>[a("div",Bt,m(e.formErrors.phoneNumber),1)]),_:1},8,["modelValue","error"])],2)])]),_:1}),o(ee,{align:"right"},{default:l(()=>[o($,{color:"secondary",label:"Cancel",onClick:e.cancel},null,8,["onClick"]),o($,{color:"primary",label:"Submit",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var Wt=I(It,[["render",Xt]]);const Ht=Y({setup(e,t){const u=w(!0),{updateNewEmployee:f}=re(),p=F(()=>B({ssn:O().matches(/^[0-9]{9}/g,{excludeEmptyString:!0,message:"9 Digits required."}).nullable().required().label("Social Security Number"),ssnConfirmation:O().oneOf([Ye("ssn"),null],"Social Security Number must match").required().nullable().label("Confirm Social Security Number")})),{meta:b,errors:r,handleSubmit:s,handleReset:n}=ie({validationSchema:p}),{value:R}=U("ssn"),{value:V}=U("ssnConfirmation"),J=s(async A=>{console.log(A);const S=await P();if(S)f({info:S}),t.emit("complete",2),n();else{const q={109:A.ssn};f({info:q}),t.emit("complete",2),n()}}),P=async()=>{const S=[{8:{value:`{'188'.EX.'${R.value}'}AND{'509'.EX.'false'}`},7:{value:"Employees"},9:{value:12}}],{data:q}=await L.fetchFromHiringApp({fields:S});return q[0]?q[0]:null};return{ssn:R,ssnConfirmation:V,formMeta:b,formErrors:r,submit:J,isPwd:u,cancel(){n(),t.emit("cancel")}}}}),Gt={class:"row"},Kt={class:"col-12 col-md-5"},Zt={class:"text-caption"},_t={class:"text-caption"};function xt(e,t,u,f,p,b){return d(),c("div",null,[o(ae,{onSubmit:oe(e.submit,["prevent"])},{default:l(()=>[o(X,{flat:"",class:"q-pl-md q-mt-sm"},{default:l(()=>[o(Q,{class:"q-px-none q-pb-none"},{default:l(()=>[a("div",Gt,[a("div",Kt,[o(T,{dense:"",label:"Enter Social Security Number",mask:"#########",modelValue:e.ssn,"onUpdate:modelValue":t[0]||(t[0]=r=>e.ssn=r),maxlength:"9",type:"password",error:!!e.formErrors.ssn,"bottom-slots":""},{error:l(()=>[a("div",Zt,m(e.formErrors.ssn),1)]),prepend:l(()=>[o(x,{name:"lock"})]),_:1},8,["modelValue","error"]),o(T,{dense:"",label:"Confirm Social Security Number",mask:"#########",modelValue:e.ssnConfirmation,"onUpdate:modelValue":t[2]||(t[2]=r=>e.ssnConfirmation=r),maxlength:"9",type:e.isPwd?"password":"text",error:!!e.formErrors.ssnConfirmation,"bottom-slots":""},{error:l(()=>[a("div",_t,m(e.formErrors.ssnConfirmation),1)]),prepend:l(()=>[o(x,{name:"lock"})]),append:l(()=>[o(x,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=r=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","error"])])])]),_:1}),o(ee,{align:"right"},{default:l(()=>[o($,{color:"secondary",label:"Cancel",onClick:e.cancel},null,8,["onClick"]),o($,{color:"primary",label:"Submit",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var eo=I(Ht,[["render",xt]]);const to=Y({components:{Personal:Wt,EnterSsn:eo},setup(){const e=w(0),{getNewEmployee:t}=re();return{step:e,personalComplete(u){e.value=u},ssnComplete(u){e.value=u,console.log(t)}}}});function oo(e,t,u,f,p,b){const r=M("personal"),s=M("enter-ssn");return d(),c("div",null,[o(X,null,{default:l(()=>[o(Q,null,{default:l(()=>[a("div",{class:D(["text-primary",e.$q.screen.gt.sm?"text-h6":"text-body1"])},"Add a New Employee",2),a("div",{class:D(["text-dark text-italic",e.$q.screen.gt.sm?"text-body2":"text-caption"])},"Follow these steps to add a new employee.",2)]),_:1}),o(Q,null,{default:l(()=>[a("div",{class:D([e.$q.screen.gt.sm?"text-body1":"text-body2",e.step===0?"text-info":e.step>0?"text-positive":"text-secondary"])},[e.$q.screen.gt.sm?(d(),h(x,{key:0,size:"md",color:e.step===0?"info":e.step>0?"positive":"secondary",name:"account_circle"},null,8,["color"])):j("",!0),ye(" Employee Personal Information ")],2),e.step===0?(d(),h(r,{key:0,onComplete:e.personalComplete,onCancel:t[0]||(t[0]=n=>e.$emit("cancelAddEmployee"))},null,8,["onComplete"])):j("",!0)]),_:1}),o(Q,null,{default:l(()=>[a("div",{class:D([e.$q.screen.gt.sm?"text-body1":"text-body2",e.step===1?"text-info":e.step>1?"text-positive":"text-secondary"])},[e.$q.screen.gt.sm?(d(),h(x,{key:0,size:"md",color:e.step===1?"info":e.step>1?"positive":"secondary",name:"admin_panel_settings"},null,8,["color"])):j("",!0),ye(" Identification ")],2),e.step===1?(d(),h(s,{key:0,onComplete:e.ssnComplete,onCancel:t[1]||(t[1]=n=>e.step=0)},null,8,["onComplete"])):j("",!0)]),_:1})]),_:1})])}var ao=I(to,[["render",oo]]);const{capitalize:fe}=Ae,we=e=>{const t=e[20]!==""?fe(e[20]):"",u=e[22]!==""?fe(e[22]):"",f=e[21]!==""?` ${fe(e[21])}`:"",p=e[23]!==""?` ${fe(e[23])}`:"";return`${u}${p}, ${t}${f}`},lo=[{name:1,label:"Name",align:"left",field:e=>e.employee[22],format:(e,t)=>`${we(t.employee)}`,sortable:!0},{name:7,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?$e.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],so=[{name:1,label:"Name",align:"left",field:e=>e.employee[22],format:(e,t)=>`${we(t.employee)}`,sortable:!0},{name:7,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?$e.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],ro=Y({name:"Table",components:{AddNewEmployee:ao},setup(){const e=ne(),t=re(),u=W(),{assignmentsForProject:f,getFlaggedAssignments:p}=te(t),b=f,{active:r}=te(W()),{getAssignments:s,flagAssignment:n}=re(),R=w(""),V=w(null),J=w(null),P=w(0),A=w(!1),S=w(!1);s();const q=F(()=>{let k=b.value;return k=V.value?k.filter(z=>ve(z[1].$d).tz("America/Chicago").format("MM/DD/YYYY")===ve(V.value).tz("America/Chicago").format("MM/DD/YYYY")):k,k=J.value?k.filter(z=>z[68]===J.value):k,k.sort((z,le)=>z.employee[24]>le.employee[24]?1:-1)}),C=F(()=>e.screen.lt.md?100:25),E=F(()=>[...new Map(f.value.map(k=>[k[68],k[68]])).values()]);async function N(k){n({record:k.rows[0],status:k.added})}return{columns:lo,mobileColumns:so,rows:q,initialPagination:{rowsPerPage:C},separator:"vertical",projectStore:u,active:r,search:R,startDateFilter:V,craftOptions:E,craftFilter:J,assignmentsForProject:f,tab:P,showEmployee:A,formatName:we,updateAssignment:N,getFlaggedAssignments:p,showAddEmployee:S}}}),no={class:"q-px-sm"},io={class:"row items-center"},uo={class:"col-12 col-md-4 q-px-sm"},mo={class:"col-12 col-md-4 q-px-sm"},po={class:"col-12 col-md-4 q-px-sm"},fo={class:"text-primary text-italic"},co={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},bo={class:"text-dark text-caption text-italic"},go={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function vo(e,t,u,f,p,b){const r=M("add-new-employee");return d(),c("div",no,[a("div",null,[o(ke,null,{default:l(()=>[Ve(a("div",null,[o(be,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=s=>e.tab=s),"bg-color":"none","indicator-color":"info",align:"left",dense:""},{default:l(()=>[o(K,{name:0,label:e.$q.screen.gt.xs?"All Employees":"Employees"},null,8,["label"]),o(K,{name:1,label:"Flagged to Remove"},{default:l(()=>[e.getFlaggedAssignments.length>0?(d(),h(ze,{key:0,color:"accent",floating:"",transparent:""},{default:l(()=>[ye(m(e.getFlaggedAssignments.length),1)]),_:1})):j("",!0)]),_:1})]),_:1},8,["modelValue"]),o(ce,{modelValue:e.tab,"onUpdate:modelValue":t[5]||(t[5]=s=>e.tab=s),animated:""},{default:l(()=>[o(Z,{class:"q-px-xs",name:0},{default:l(()=>[o(X,{flat:""},{default:l(()=>[o(Q,{class:"q-pt-none"},{default:l(()=>[a("div",io,[a("div",uo,[o(T,{dense:e.$q.screen.lt.md,modelValue:e.search,"onUpdate:modelValue":t[1]||(t[1]=s=>e.search=s),label:"Search"},null,8,["dense","modelValue"])]),a("div",mo,[o(T,{dense:e.$q.screen.lt.md,modelValue:e.startDateFilter,"onUpdate:modelValue":t[2]||(t[2]=s=>e.startDateFilter=s),label:"Arrival Date",type:"date","stack-label":""},null,8,["dense","modelValue"])]),a("div",po,[o(_,{dense:e.$q.screen.lt.md,label:"Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craftFilter,"onUpdate:modelValue":t[3]||(t[3]=s=>e.craftFilter=s),options:e.craftOptions,"use-chips":""},null,8,["dense","modelValue","options"])])])]),_:1})]),_:1}),o(he,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Employees":`Employees for ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,filter:e.search,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no employees for ${e.active[20]}`,grid:e.$q.screen.lt.sm,selection:"multiple",selected:e.getFlaggedAssignments,onSelection:e.updateAssignment},Ee({"top-right":l(()=>[a("div",fo,m(e.assignmentsForProject.length)+" total employees / "+m(e.getFlaggedAssignments.length)+" flagged to remove",1)]),"header-selection":l(s=>[o(Ce,{disable:"",modelValue:s.selected,"onUpdate:modelValue":n=>s.selected=n},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":l(s=>[o(Ce,{modelValue:s.selected,"onUpdate:modelValue":n=>s.selected=n},null,8,["modelValue","onUpdate:modelValue"])]),"no-data":l(({message:s})=>[a("div",co,[o(x,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),a("span",null,m(s),1)])]),_:2},[e.$can("manage","employees")?{name:"top-left",fn:l(()=>[o($,{color:"primary",label:"Add Another Employee",onClick:t[4]||(t[4]=s=>e.showAddEmployee=!0)}),o(Ue)]),key:"0"}:void 0]),1032,["title-class","title","columns","rows","filter","pagination","no-data-label","grid","selected","onSelection"])]),_:1}),o(Z,{class:"q-px-xs",name:1},{default:l(()=>[o(he,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Flagged to Remove":`Flagged to Remove from ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.getFlaggedAssignments,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no employees to remove from ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":l(()=>[a("div",bo,"(Total: "+m(e.getFlaggedAssignments.length)+" to remove)",1)]),"no-data":l(({message:s})=>[a("div",go,[o(x,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),a("span",null,m(s),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),_:1})]),_:1},8,["modelValue"])],512),[[Ne,!e.showAddEmployee]])]),_:1}),o(ke,null,{default:l(()=>[Ve(a("div",null,[o(r,{onCancelAddEmployee:t[6]||(t[6]=s=>e.showAddEmployee=!1)})],512),[[Ne,e.showAddEmployee]])]),_:1})])])}var yo=I(ro,[["render",vo],["__scopeId","data-v-de05665e"]]);const ho=Y({setup(){const{active:e}=te(W()),t=w(null);return{active:e,dayjs:ve,clicked:t}}}),$o={class:"q-px-sm"},wo={key:0,class:"row"},qo={class:"col-5 q-px-sm"},Vo=a("thead",{class:"bg-dark text-white"},[a("tr",null,[a("th"),a("th",{class:"text-left"},"Scheduled Date"),a("th",{class:"text-left"},"Status"),a("th",{class:"text-right"},"# of Releases")])],-1),Co={class:"text-left"},No={class:"text-left"},ko={class:"text-right"},jo={class:"col-7 q-px-sm"},Ro=a("thead",{class:"bg-dark text-white"},[a("tr",null,[a("th",{class:"text-left"},"Name"),a("th",{class:"text-left"},"Classification"),a("th",{class:"text-left"},"Employee ID")])],-1),Eo={class:"text-left"},Ao={class:"text-left"},So={class:"text-left"};function Uo(e,t,u,f,p,b){return d(),c("div",$o,[o(X,{flat:""},{default:l(()=>[o(ee,{align:"left"},{default:l(()=>[o($,{color:"primary",label:"Schedule Reduction in Force"})]),_:1}),o(Q,{class:"q-px-none"},{default:l(()=>[e.active.reduction.length>0?(d(),c("div",wo,[a("div",qo,[o(ge,{dense:""},{default:l(()=>[Vo,a("tbody",null,[(d(!0),c(H,null,G(e.active.reduction,r=>(d(),c("tr",{key:r[3]},[a("td",null,[o($,{label:e.clicked&&e.clicked[3]===r[3]?"Hide Roster":"View Roster",color:"info",size:"sm",onClick:s=>e.clicked?e.clicked=null:e.clicked=r},null,8,["label","onClick"])]),a("td",Co,m(e.dayjs(r[6].$d).format("MM/DD/YYYY")),1),a("td",No,m(r[13]),1),a("td",ko,m(r[12].length),1)]))),128))])]),_:1})]),a("div",jo,[e.clicked?(d(),h(ge,{key:0,dense:""},{default:l(()=>[Ro,a("tbody",null,[(d(!0),c(H,null,G(e.clicked[12],r=>(d(),c("tr",{key:r[3]},[a("td",Eo,m(r[75]),1),a("td",Ao,m(r[33]),1),a("td",So,m(r[104]),1)]))),128))])]),_:1})):j("",!0)])])):j("",!0)]),_:1})]),_:1})])}var Jo=I(ho,[["render",Uo]]);const Po=Y({name:"Projects",components:{JobsTab:jt,UsersTab:Yt,EmployeesTab:yo,ReductionTab:Jo},setup(){return ne(),{tab:w(0)}}}),Do={class:"q-px-sm"};function To(e,t,u,f,p,b){const r=M("jobs-tab"),s=M("users-tab"),n=M("employees-tab"),R=M("reduction-tab");return d(),c("div",Do,[o(De,{class:"bg-info text-white shadow-2 rounded-borders"},{default:l(()=>[o(be,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=V=>e.tab=V),"bg-color":"none","indicator-color":"accent",align:"justify",dense:""},{default:l(()=>[o(K,{name:0,label:e.$q.screen.gt.xs?"Available Jobs":"Jobs"},null,8,["label"]),e.$can("read","users")?(d(),h(K,{key:0,name:1,label:"Users"})):j("",!0),e.$can("manage","employees")?(d(),h(K,{key:1,name:2,label:"Roster"})):j("",!0),e.$can("manage","rifs")?(d(),h(K,{key:2,name:3,label:e.$q.screen.lt.md?"RIF":"Reduction in Force"},null,8,["label"])):j("",!0)]),_:1},8,["modelValue"])]),_:1}),o(ce,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=V=>e.tab=V),animated:""},{default:l(()=>[o(Z,{class:"q-px-xs",name:0},{default:l(()=>[o(r)]),_:1}),e.$can("read","users")?(d(),h(Z,{key:0,class:"q-px-xs",name:1},{default:l(()=>[o(s)]),_:1})):j("",!0),e.$can("manage","employees")?(d(),h(Z,{key:1,class:"q-px-xs",name:2},{default:l(()=>[o(n)]),_:1})):j("",!0),e.$can("manage","rifs")?(d(),h(Z,{key:2,class:"q-px-xs",name:3},{default:l(()=>[o(R)]),_:1})):j("",!0)]),_:1},8,["modelValue"])])}var Fo=I(Po,[["render",To]]);const Qo=Y({name:"PageIndex",components:{ProjectTabs:Fo},setup(){return{}}});function Mo(e,t,u,f,p,b){const r=M("project-tabs");return d(),h(Pe,{style:{"max-width":"100vw"}},{default:l(()=>[o(r)]),_:1})}var Ca=I(Qo,[["render",Mo]]);export{Ca as default};
