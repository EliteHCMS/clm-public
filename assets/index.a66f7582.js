import{bS as B,bU as k,r as n,w as q,aS as I,c as x,y as $,z as P,d as a,bq as l,cU as T,B as c,cT as N,cV as O,a7 as p,bP as U,D as Y,ab as z,bV as h,aw as A}from"./index.48ce5b72.js";import{Q as M}from"./QSpace.a1f8e64a.js";import{Q as E}from"./QTooltip.f21cfa79.js";import{Q as G}from"./QTd.3c8ae2d8.js";import{u as L}from"./use-quasar.468e1258.js";import{e as F}from"./export-file.dc78ba05.js";import{g as H}from"./app.5e67c239.js";import{dayjs as J}from"./dayjs.9bb68654.js";import{_ as K}from"./projectSelector.c3a9b73c.js";import{_ as W}from"./aTable.e3979bcd.js";import"./position-engine.a6f346a0.js";import"./selection.e8d17b8a.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.a179cfc1.js";import"./index.04bc0a32.js";import"./i18n.0c36ad49.js";import"./QSelect.06d0b9ce.js";import"./QChip.d193a000.js";import"./QMenu.62e1eee7.js";import"./rtl.b51694b1.js";import"./QTable.68f70e77.js";import"./QList.1735c3ac.js";import"./QMarkupTable.5a189cd0.js";import"./use-fullscreen.735db5b1.js";const X={class:"q-pa-md"},Z={class:"row items-center"},ee={class:"col-12 col-md-3 q-px-sm"},te={class:"col-12 col-md-5 q-px-sm"},Ce={__name:"index",setup(ae){const d=L(),S=B(),f=H(),{fetchRoster:v,fetchAllRosters:_}=f,{getRoster:D,getLoadingState:Q,getSelectedProject:r}=k(f),b=n("Roster"),V=n("rosters"),m=n(""),y=n({sortBy:"13",descending:!1,rowsPerPage:150});r.value?v({selectedId:r.value}):_({can:"read"}),q(r,()=>{r.value?v({selectedId:r.value}):_({can:"read"})});const C=n(new Date),R=setInterval(()=>{C.value=new Date},1e3);I(()=>{clearInterval(R)});const u=x(()=>[{name:"id",align:"left",label:"ID",field:"3",sortable:!1},{name:"name",align:"left",label:"Name",field:"298",sortable:!0},{name:"avgDRO",align:"center",label:"AVG DRO",field:"208",sortable:!0},{name:"openRequests",align:"center",label:"Open Request",field:"31",sortable:!0},{name:"action",align:"center",label:"",sortable:!1}]),i=x(()=>D.value(r.value).filter(o=>!0).sort((o,s)=>o[298].localeCompare(s[298]))),j=o=>{S.push({name:"view-project",params:{id:o[3]}})},g=(o,s,t)=>{let e=s!==void 0?s(o,t):o;return e=e==null?"":String(e),e=e.split('"').join('""'),`"${e}"`},w=()=>{const o=[u.value.map(t=>g(t.label))].concat(i.value.map(t=>u.value.map(e=>g(typeof e.field=="function"?e.field(t):t[e.field===void 0?e.name:e.field],e.format,t)).join(","))).join(`\r
`);F(`${b.value} ${J().format("MM.DD.YYYY")}.csv`,o,"text/csv")!==!0&&d.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(o,s)=>($(),P("div",X,[a(N,{flat:"",class:"q-pt-none"},{default:l(()=>[a(T,null,{default:l(()=>[c("div",Z,[c("div",ee,[a(K,{can:"read",styleSelection:!0})])])]),_:1})]),_:1}),a(W,{rows:i.value,columns:u.value,pagination:y.value,filter:m.value,title:b.value,separator:"vertical","row-key":"3",loading:p(Q)(V.value),downloadButton:!0,onDownload:w},{top:l(()=>[c("div",te,[a(O,{dense:p(d).screen.lt.md,modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),label:"Search...",clearable:""},{prepend:l(()=>[a(U,{name:"search"})]),_:1},8,["dense","modelValue"])]),a(M),c("div",{class:Y(["text-dark text-caption text-italic",p(d).screen.lt.md?"offset-xs-5":""])},"(Total: "+z(i.value.length)+")",3),a(h,{flat:"",round:"",color:"primary",icon:"download",disable:i.value.length<1,onClick:w},{default:l(()=>[a(E,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[A(" Download ")]),_:1})]),_:1},8,["disable"])]),"body-cell-action":l(t=>[a(G,{props:t},{default:l(()=>[a(h,{color:"primary",label:"View Project",onClick:e=>j(t.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading"])]))}};export{Ce as default};
