import{Q as It}from"./QPage.6f4063c4.js";import{u as Re}from"./use-quasar.6afddd70.js";import{u as Y,q as W,v as Ot,w as _e,x as _t,c as Rt}from"./app.31ce29fc.js";import{n as at,k as G,c as y,q as ve,bW as nt,c0 as Mt,cr as At,c3 as Lt,dB as Ft,r as F,w as we,aP as Et,ca as Bt,bX as Ht,h as A,g as lt,dC as Qt,ck as Ut,bv as zt,bs as Xe,bV as D,d2 as Yt,cz as it,l as je,_ as pe,y as C,ap as U,au as Me,bq as u,d as a,B as d,ab as I,E as Je,b4 as ee,cT as ie,cU as Q,cV as qe,z as x,aq as X,C as et,bP as Ke,cW as me,bN as Ae,bT as rt,bS as ut,bU as We,F as Ye,b3 as tt,D as st,bR as Wt,v as Xt}from"./index.b35eeed3.js";import{localforage as Z}from"./localForage.504e0e11.js";import{dayjs as O}from"./dayjs.c324749c.js";import{Q as Le}from"./QForm.6c8993a8.js";import{a as Jt,Q as Pe}from"./QStep.821b9b4d.js";import{a as De,b as Kt}from"./useQuerySaver.d29ff9ee.js";import{u as Gt}from"./dataStore.54140746.js";import{a as Fe,u as H}from"./vee-validate.esm.0c700e69.js";import{a as J,b as Zt,c as Ce,f as ot}from"./array.164cfe36.js";import{Q as fe}from"./QTooltip.42ac2309.js";import{a as ye}from"./QSelect.2ba35ed2.js";import{T as xt}from"./TouchPan.a718682d.js";import{Q as es}from"./QMenu.fc0510b6.js";import{u as ts,c as ss}from"./position-engine.301e00c6.js";import{C as ct}from"./ClosePopup.76a79f1e.js";import{P as os,f as as,n as ns}from"./pay-rate-v2.65465ab5.js";import{Q as dt}from"./QTd.a7c86421.js";import{Q as ft}from"./QTable.c08ed117.js";import{p as ls}from"./VueTelInput.708968f3.js";import"./disability.21d7dbc6.js";import{_ as is}from"./projectSelector.ce90f94e.js";import{_ as rs}from"./officeSelector.301b3575.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.04bc0a32.js";import"./i18n.a721d321.js";import"./use-panel.87525cc8.js";import"./touch.3df10340.js";import"./selection.423f1a2d.js";import"./QSlideTransition.5a4a5d45.js";import"./QChip.86c715a9.js";import"./rtl.b51694b1.js";import"./QList.5b498127.js";import"./QMarkupTable.39675ceb.js";import"./use-fullscreen.36eb3617.js";import"./QStepperNavigation.e091951f.js";const Se=at("newRequestDataStore",{state:()=>({selectedProject:null,humanizedData:{},humanizedClassificationData:[],dbData:{},dbClassificationData:[],jobNumbers:{},siteContacts:{},meetingLocations:{},perDiemSpecs:{},projectCrafts:{},projectCraftClassifications:{},requestedTimeStamps:{},v3EditData:{request:null,classifications:[],names:[]},v3Data:{request:null,project:null,general:null,time:null,shift:null,hours:null,classifications:[],names:[],matches:null,edit:!1},v3Options:{projects:[],jobNumbers:[],contacts:[],locations:[],perDiem:[],crafts:[],jobs:[],restrictions:[{value:"Name Request Only",description:"The hiring center will only hire the names you provide.",warning:"If you DO NOT provide enough names or if the people you request do not show up, the hiring center WILL NOT assist with filling this request."},{value:"Open",description:"The hiring center will fill positions by recruiting and selecting the most qualified candidates available.",warning:"You will NOT be able to add names to this type of request."},{value:"Mixed",description:"The hiring center will hire all of the names that you provide and fill remaining positions by recruiting and selecting the most qualified candidates available."}],reasons:[{value:"Backfill",label:"Backfill - (An employee was terminated)",description:"This request is to fill positions that are open because of an employee leaving the job site."},{value:"Increase in Manpower",label:"Increase in Manpower - (We need more employees on site)",description:"This request is to fill positions that are new because of an increased need in manpower. This may be due to a change in the scope of an existing contract, an additional contract awarded, etc."}],shift:[{value:"Day",label:"Day",description:"This request is for the selecting the shift."},{value:"Night",label:"Night",description:"This request is for the selecting the shift."}],hours:[{value:"40",label:"40",description:"This request is for the selecting the hours per day"},{value:"50+",label:"50+",description:"This request is for the selecting the hours per day"},{value:"60+",label:"60+",description:"This request is for the selecting the hours per day"},{value:"70+",label:"70+",description:"This request is for the selecting the hours per day"}]}}),getters:{getStoredData:e=>({type:t,key:s})=>!t||!s?[]:!e.requestedTimeStamps[s]||!e.requestedTimeStamps[s][t]||e.requestedTimeStamps[s][t].isBefore(O().subtract(10,"minute"))?[]:e[t][s],getHumanizedData:e=>e.humanizedData,getDbData:e=>e.dbData,getHumanizedClassificationData:e=>e.humanizedClassificationData,getDbClassificationData:e=>e.dbClassificationData,getRequestedTimeStamps(e){return e.requestedTimeStamps},getV3Data:e=>e.v3Data,getV3Options:e=>e.v3Options,getV3EditData:e=>e.v3EditData},actions:{setselectedProject(e){this.selectedProject=e},setTimeStamp({name:e,timeStamp:t,Id:s},o){if(this.requestedTimeStamps[s]?this.requestedTimeStamps[s][e]=t:this.requestedTimeStamps[s]={[e]:t},o){const n=JSON.parse(JSON.stringify(this.requestedTimeStamps));Z.setItem(`${G.storageProcessTimeStamps}`,n)}},setNewRequestData({humanized:e,database:t}){for(const[s,o]of Object.entries(e))Object.assign(this.humanizedData,{[s]:o});for(const[s,o]of Object.entries(t))Object.assign(this.dbData,{[s]:o})},setNewRequestClassificationData({humanized:e,database:t}){this.humanizedClassificationData=e,this.dbClassificationData=t},setStorageData({type:e,key:t,data:s,timestamp:o}){this.setTimeStamp({name:e,Id:t,timeStamp:o}),this[e][t]=s},setTimeStampState(e){this.requestedTimeStamps=e},async removeData({type:e,key:t,item:s,storageKey:o}){const n=this[e][t].findIndex(h=>h[3]===s[3]);n>-1&&this[e][t].splice(n,1);const r=this[e][t];Z.removeItem(`${G[o]}_${t}`),Z.getItem(`${G[o]}_${t}`)||Z.setItem(`${G[o]}_${t}`,r)},setV3Data({prop:e,data:t,push:s}){s?this.v3Data[e].push(t):this.v3Data[e]=t},setV3EditData({prop:e,data:t,push:s}){s?this.v3EditData[e].push(t):this.v3EditData[e]=t},setV3Options({prop:e,data:t}){this.v3Options[e]=t},resetV3Data(){this.v3Data={project:null,general:null,classifications:[],names:[],matches:null},this.v3Options={projects:[],jobNumbers:[],contacts:[],locations:[],perDiem:[],crafts:[],jobs:[],restrictions:[{value:"Name Request Only",description:"The hiring center will only hire the names you provide.",warning:"If you DO NOT provide enough names or if the people you request do not show up, the hiring center WILL NOT assist with filling this request."},{value:"Open",description:"The hiring center will fill positions by recruiting and selecting the most qualified candidates available.",warning:"You will NOT be able to add names to this type of request."},{value:"Mixed",description:"The hiring center will hire all of the names that you provide and fill remaining positions by recruiting and selecting the most qualified candidates available."}],reasons:[{value:"Backfill",label:"Backfill - (An employee was terminated)",description:"This request is to fill positions that are open because of an employee leaving the job site."},{value:"Increase in Manpower",label:"Increase in Manpower - (We need more employees on site)",description:"This request is to fill positions that are new because of an increased need in manpower. This may be due to a change in the scope of an existing contract, an additional contract awarded, etc."}],shift:[{value:"Day",label:"Day",description:"This request is for the selecting the shift."},{value:"Night",label:"Night",description:"This request is for the selecting the shift."}],hours:[{value:"40",label:"40",description:"This request is for the selecting the hours per day"},{value:"50+",label:"50+",description:"This request is for the selecting the hours per day"},{value:"60+",label:"60+",description:"This request is for the selecting the hours per day"},{value:"70+",label:"70+",description:"This request is for the selecting the hours per day"}]}}}}),mt=at("dataStore2",{state:()=>({selectedOffice:null,selfCheckIns:{},profiles:{},scheduledInterviews:{},inProcessInterviews:{},inProcess:{},pending:{},deployments:{},projects:{},openRequest:{},pendingRequest:{},closedRequest:{},openClassifications:{},pendingClassifications:{},closedClassifications:{},nameRequest:{},pendingProjects:{},requestedTimeStamps:{}}),getters:{getSelfCheckIns:e=>t=>{if(t)return e.selfCheckIns[t]?e.selfCheckIns[t]:[];{let s=[];return Object.keys(e.selfCheckIns).forEach(o=>{s=s.concat(e.selfCheckIns[o])}),s}},getProfiles:e=>t=>{if(t)return e.profiles[t]?e.profiles[t]:[];{let s=[];return Object.keys(e.profiles).forEach(o=>{s=s.concat(e.profiles[o])}),s}},getScheduledInterviews:e=>t=>{if(t)return e.scheduledInterviews[t]?e.scheduledInterviews[t]:[];{let s=[];return Object.keys(e.scheduledInterviews).forEach(o=>{s=s.concat(e.scheduledInterviews[o])}),s}},getInProcessInterviews:e=>t=>{if(t)return e.inProcessInterviews[t]?e.inProcessInterviews[t]:[];{let s=[];return Object.keys(e.inProcessInterviews).forEach(o=>{s=s.concat(e.inProcessInterviews[o])}),s}},getInProcess:e=>t=>{if(t)return e.inProcess[t]?e.inProcess[t]:[];{let s=[];return Object.keys(e.inProcess).forEach(o=>{s=s.concat(e.inProcess[o])}),s}},getPending:e=>t=>{if(t)return e.pending[t]?e.pending[t]:[];{let s=[];return Object.keys(e.pending).forEach(o=>{s=s.concat(e.pending[o])}),s}},getDeployments:e=>t=>{if(t)return e.deployments[t]?e.deployments[t]:[];{let s=[];return Object.keys(e.deployments).forEach(o=>{s=s.concat(e.deployments[o])}),s}},getProjects:e=>(t,s)=>{if(!s&&!t){let o=[];return Object.keys(e.projects).forEach(n=>{o=o.concat(e.projects[n])}),o}else if(!s&&t){const{userOffices:o}=Y();let n=[];return o(t).forEach(r=>{n=n.concat(e.projects[r[8]])}),n}else if(s&&t){const{getOffice:o}=Y(),n=o(s);return t==="read"&&n&&n[39]!==!0?[]:(t==="create"||t==="update")&&n&&n[40]!==!0?[]:t==="manage"&&n&&n[41]!==!0?[]:e.projects[s]?e.projects[s]:[]}else return e.projects[s]?e.projects[s]:[]},getPendingProjects:e=>t=>{if(t)return e.pendingProjects[t]?e.pendingProjects[t]:[];{let s=[];return Object.keys(e.pendingProjects).forEach(o=>{s=s.concat(e.pendingProjects[o])}),s}},getRequestedTimeStamps(e){return e.requestedTimeStamps},getSelectedOffice(e){return e.selectedOffice}},actions:{setSelectedOffice(e,t){this.selectedOffice=e},setTimeStamp({name:e,timeStamp:t,officeId:s},o){if(this.requestedTimeStamps[s]?this.requestedTimeStamps[s][e]=t:this.requestedTimeStamps[s]={[e]:t},o){const n=JSON.parse(JSON.stringify(this.requestedTimeStamps));Z.setItem(`${G.storageProcessTimeStamps}`,n)}},setTimeStampState(e){this.requestedTimeStamps=e},async fetchSelfCheckIns(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Self Check-Ins"}}];if(t.selfCheckIns&&(t.selfCheckIns.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"selfCheckIns",timeStamp:O()},!0);const{data:n}=await W.fetchFromRecruitingApp({fields:o});return this.setSelfCheckIns({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllSelfCheckIns(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchSelfCheckIns({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setSelfCheckIns({officeId:e,data:t},s){this.selfCheckIns[e]=t,s&&Z.setItem(`${G.storageSelfCheckIns}_${e}`,t)},async fetchProfiles(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Profiles"}}];if(t.profiles&&(t.profiles.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"profiles",timeStamp:O()},!0);const{data:n}=await W.fetchFromHiringApp({fields:o});return this.setProfiles({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllProfiles(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchProfiles({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setProfiles({officeId:e,data:t},s){this.profiles[e]=t,s&&Z.setItem(`${G.storageProfiles}_${e}`,t)},async fetchScheduledInterviews(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Scheduled Interviews"}}];if(t.scheduledInterviews&&(t.scheduledInterviews.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"scheduledInterviews",timeStamp:O()},!0);const{data:n}=await W.fetchFromHiringApp({fields:o});return this.setScheduledInterviews({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllScheduledInterviews(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchScheduledInterviews({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setScheduledInterviews({officeId:e,data:t},s){this.scheduledInterviews[e]=t,s&&Z.setItem(`${G.storageScheduledInterviews}_${e}`,t)},async fetchInProcessInterviews(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"In Process Interviews"}}];if(t.inProcessInterviews&&(t.inProcessInterviews.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"inProcessInterviews",timeStamp:O()},!0);const{data:n}=await W.fetchFromHiringApp({fields:o});return this.setInProcessInterviews({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllInProcessInterviews(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchInProcessInterviews({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setInProcessInterviews({officeId:e,data:t},s){this.inProcessInterviews[e]=t,s&&Z.setItem(`${G.storageInProcessInterviews}_${e}`,t)},async fetchInProcess(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"In Processes"}}];if(t.inProcess&&(t.inProcess.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"inProcess",timeStamp:O()},!0);const{data:n}=await W.fetchFromHiringApp({fields:o});return this.setInProcess({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllInProcess(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchInProcess({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setInProcess({officeId:e,data:t},s){this.inProcess[e]=t,s&&Z.setItem(`${G.storageInProcess}_${e}`,t)},async fetchPending(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Dispatches"}}];if(t.pending&&(t.pending.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"pending",timeStamp:O()},!0);const{data:n}=await W.fetchFromHiringApp({fields:o});return this.setPending({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllPending(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchPending({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setPending({officeId:e,data:t},s){this.pending[e]=t,s&&Z.setItem(`${G.storagePending}_${e}`,t)},async fetchOpenRequest(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Open Request"}}];if(t.openRequest&&(t.openRequest.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"openRequest",timeStamp:O()},!0);const{data:n}=await W.fetchFromProjectsApp({fields:o});return this.setOpenRequest({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllOpenRequest(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchOpenRequest({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setOpenRequest({officeId:e,data:t},s){this.openRequest[e]=t,s&&Z.setItem(`${G.storageOpenRequest}_${e}`,t)},async fetchPendingRequest(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Pending Request"}}];if(t.pendingRequest&&(t.pendingRequest.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"pendingRequest",timeStamp:O()},!0);const{data:n}=await W.fetchFromProjectsApp({fields:o});return this.setPendingRequest({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllPendingRequest(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchPendingRequest({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setPendingRequest({officeId:e,data:t},s){this.pendingRequest[e]=t,s&&Z.setItem(`${G.storagePendingRequest}_${e}`,t)},async fetchProjects(e){const{getOffice:t}=Y(),s=this.getRequestedTimeStamps[e.officeId]||{};let o=!0;if(e&&e.access){const r=t(e.officeId);if(e.access==="read"&&r&&r[39]!==!0)return{data:[]};if((e.access==="create"||e.access==="update")&&r&&r[40]!==!0)return{data:[]};if(e.access==="manage"&&r&&r[41]!==!0)return{data:[]}}const n=[{9:{value:e.officeId},7:{value:"Projects"}}];if(s.projects&&(s.projects.isBefore(O().subtract(1,"minute"))?o=!0:o=e.refresh?e.refresh:!1),o){this.setTimeStamp({officeId:e.officeId,name:"projects",timeStamp:O()},!0);const{data:r}=await W.fetchFromProjectsApp({fields:n});return this.setProjects({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllProjects(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchProjects({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setProjects({officeId:e,data:t},s){e&&t&&(this.projects[e]=t),s&&e&&Z.setItem(`${G.storageProjects}_${e}`,t)},async fetchPendingProjects(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Pending Projects"}}];if(t.pendingProjects&&(t.pendingProjects.isBefore(O().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"pendingProjects",timeStamp:O()},!0);const{data:n}=await W.fetchFromProjectsApp({fields:o});return this.setPendingProjects({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllPendingProjects(e){const{userOffices:t}=Y(),s=[];return t(e?e.access:null).forEach(n=>{let r=this.fetchPendingProjects({...e,officeId:n[8]});s.push(r)}),await Promise.allSettled(s)},setPendingProjects({officeId:e,data:t},s){this.pendingProjects[e]=t,s&&Z.setItem(`${G.storagePendingProjects}_${e}`,t)}}}),us=["gregorian","persian"],cs={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>us.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ds=["update:modelValue"];function fs(e){return e.year+"/"+ve(e.month)+"/"+ve(e.day)}function ms(e,t){const s=y(()=>e.disable!==!0&&e.readonly!==!0),o=y(()=>s.value===!0?0:-1),n=y(()=>{const l=[];return e.color!==void 0&&l.push(`bg-${e.color}`),e.textColor!==void 0&&l.push(`text-${e.textColor}`),l.join(" ")});function r(){return e.locale!==void 0?{...t.lang.date,...e.locale}:t.lang.date}function h(l){const c=new Date,f=l===!0?null:0;if(e.calendar==="persian"){const b=Ot(c);return{year:b.jy,month:b.jm,day:b.jd}}return{year:c.getFullYear(),month:c.getMonth()+1,day:c.getDate(),hour:f,minute:f,second:f,millisecond:f}}return{editable:s,tabindex:o,headerClass:n,getLocale:r,getCurrentDate:h}}function ps(e,t){if(e.hour!==null){if(e.minute===null)return"minute";if(t===!0&&e.second===null)return"second"}return"hour"}function hs(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var vs=nt({name:"QTime",props:{...Mt,...At,...cs,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:ds,setup(e,{slots:t,emit:s}){const o=lt(),{$q:n}=o.proxy,r=Lt(e,n),{tabindex:h,headerClass:l,getLocale:c,getCurrentDate:f}=ms(e,n),b=Ft(e),P=Qt(b);let V,j;const E=F(null),q=y(()=>bt()),L=y(()=>c()),z=y(()=>gt()),K=_e(e.modelValue,q.value,L.value,e.calendar,z.value),g=F(ps(K)),p=F(K),w=F(K.hour===null||K.hour<12),ne=y(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(r.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),oe=y(()=>{const i=p.value;return{hour:i.hour===null?"--":S.value===!0?ve(i.hour):String(w.value===!0?i.hour===0?12:i.hour:i.hour>12?i.hour-12:i.hour),minute:i.minute===null?"--":ve(i.minute),second:i.second===null?"--":ve(i.second)}}),S=y(()=>e.format24h!==null?e.format24h:n.lang.date.format24h),N=y(()=>{const i=g.value==="hour",m=i===!0?12:60,v=p.value[g.value];let B=`rotate(${Math.round(v*(360/m))-180}deg) translateX(-50%)`;return i===!0&&S.value===!0&&p.value.hour>=12&&(B+=" scale(.7)"),{transform:B}}),_=y(()=>p.value.hour!==null),re=y(()=>_.value===!0&&p.value.minute!==null),ae=y(()=>e.hourOptions!==void 0?i=>e.hourOptions.includes(i):e.options!==void 0?i=>e.options(i,null,null):null),de=y(()=>e.minuteOptions!==void 0?i=>e.minuteOptions.includes(i):e.options!==void 0?i=>e.options(p.value.hour,i,null):null),ue=y(()=>e.secondOptions!==void 0?i=>e.secondOptions.includes(i):e.options!==void 0?i=>e.options(p.value.hour,p.value.minute,i):null),se=y(()=>{if(ae.value===null)return null;const i=$e(0,11,ae.value),m=$e(12,11,ae.value);return{am:i,pm:m,values:i.values.concat(m.values)}}),ce=y(()=>de.value!==null?$e(0,59,de.value):null),he=y(()=>ue.value!==null?$e(0,59,ue.value):null),M=y(()=>{switch(g.value){case"hour":return se.value;case"minute":return ce.value;case"second":return he.value}}),be=y(()=>{let i,m,v=0,k=1;const B=M.value!==null?M.value.values:void 0;g.value==="hour"?S.value===!0?(i=0,m=23):(i=0,m=11,w.value===!1&&(v=12)):(i=0,m=55,k=5);const le=[];for(let $=i,te=i;$<=m;$+=k,te++){const ge=$+v,Vt=B!==void 0&&B.includes(ge)===!1,Tt=g.value==="hour"&&$===0?S.value===!0?"00":"12":$;le.push({val:ge,index:te,disable:Vt,label:Tt})}return le}),T=y(()=>[[xt,yt,void 0,{stop:!0,prevent:!0,mouse:!0}]]);we(()=>e.modelValue,i=>{const m=_e(i,q.value,L.value,e.calendar,z.value);(m.dateHash!==p.value.dateHash||m.timeHash!==p.value.timeHash)&&(p.value=m,m.hour===null?g.value="hour":w.value=m.hour<12)}),we([q,L],()=>{Et(()=>{ze()})});function R(){const i={...f(),...hs()};ze(i),Object.assign(p.value,i),g.value="hour"}function $e(i,m,v){const k=Array.apply(null,{length:m+1}).map((B,le)=>{const $=le+i;return{index:$,val:v($)===!0}}).filter(B=>B.val===!0).map(B=>B.index);return{min:k[0],max:k[k.length-1],values:k,threshold:m+1}}function Ne(i,m,v){const k=Math.abs(i-m);return Math.min(k,v-k)}function Ee(i,{min:m,max:v,values:k,threshold:B}){if(i===m)return m;if(i<m||i>v)return Ne(i,m,B)<=Ne(i,v,B)?m:v;const le=k.findIndex(ge=>i<=ge),$=k[le-1],te=k[le];return i-$<=te-i?$:te}function bt(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function gt(){if(typeof e.defaultDate!="string"){const i=f(!0);return i.dateHash=fs(i),i}return _e(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Be(){return Ut(o)===!0||M.value!==null&&(M.value.values.length===0||g.value==="hour"&&S.value!==!0&&se.value[w.value===!0?"am":"pm"].values.length===0)}function He(){const i=E.value,{top:m,left:v,width:k}=i.getBoundingClientRect(),B=k/2;return{top:m+B,left:v+B,dist:B*.7}}function yt(i){if(Be()!==!0){if(i.isFirst===!0){V=He(),j=Ve(i.evt,V);return}j=Ve(i.evt,V,j),i.isFinal===!0&&(V=!1,j=null,Ge())}}function Ge(){g.value==="hour"?g.value="minute":e.withSeconds&&g.value==="minute"&&(g.value="second")}function Ve(i,m,v){const k=Bt(i),B=Math.abs(k.top-m.top),le=Math.sqrt(Math.pow(Math.abs(k.top-m.top),2)+Math.pow(Math.abs(k.left-m.left),2));let $,te=Math.asin(B/le)*(180/Math.PI);if(k.top<m.top?te=m.left<k.left?90-te:270+te:te=m.left<k.left?te+90:270-te,g.value==="hour"){if($=te/30,se.value!==null){const ge=S.value!==!0?w.value===!0:se.value.am.values.length!==0&&se.value.pm.values.length!==0?le>=m.dist:se.value.am.values.length!==0;$=Ee($+(ge===!0?0:12),se.value[ge===!0?"am":"pm"])}else $=Math.round($),S.value===!0?le<m.dist?$<12&&($+=12):$===12&&($=0):w.value===!0&&$===12?$=0:w.value===!1&&$!==12&&($+=12);S.value===!0&&(w.value=$<12)}else $=Math.round(te/6)%60,g.value==="minute"&&ce.value!==null?$=Ee($,ce.value):g.value==="second"&&he.value!==null&&($=Ee($,he.value));return v!==$&&Pt[g.value]($),$}const Qe={hour(){g.value="hour"},minute(){g.value="minute"},second(){g.value="second"}};function qt(i){i.keyCode===13&&Ze()}function wt(i){i.keyCode===13&&xe()}function St(i){Be()!==!0&&(n.platform.is.desktop!==!0&&Ve(i,He()),Ge())}function $t(i){Be()!==!0&&Ve(i,He())}function Ct(i){if(i.keyCode===13)g.value="hour";else if([37,39].includes(i.keyCode)){const m=i.keyCode===37?-1:1;if(se.value!==null){const v=S.value===!0?se.value.values:se.value[w.value===!0?"am":"pm"].values;if(v.length===0)return;if(p.value.hour===null)Te(v[0]);else{const k=(v.length+v.indexOf(p.value.hour)+m)%v.length;Te(v[k])}}else{const v=S.value===!0?24:12,k=S.value!==!0&&w.value===!1?12:0,B=p.value.hour===null?-m:p.value.hour;Te(k+(24+B+m)%v)}}}function jt(i){if(i.keyCode===13)g.value="minute";else if([37,39].includes(i.keyCode)){const m=i.keyCode===37?-1:1;if(ce.value!==null){const v=ce.value.values;if(v.length===0)return;if(p.value.minute===null)Ie(v[0]);else{const k=(v.length+v.indexOf(p.value.minute)+m)%v.length;Ie(v[k])}}else{const v=p.value.minute===null?-m:p.value.minute;Ie((60+v+m)%60)}}}function kt(i){if(i.keyCode===13)g.value="second";else if([37,39].includes(i.keyCode)){const m=i.keyCode===37?-1:1;if(he.value!==null){const v=he.value.values;if(v.length===0)return;if(p.value.seconds===null)Oe(v[0]);else{const k=(v.length+v.indexOf(p.value.second)+m)%v.length;Oe(v[k])}}else{const v=p.value.second===null?-m:p.value.second;Oe((60+v+m)%60)}}}function Te(i){p.value.hour!==i&&(p.value.hour=i,ke())}function Ie(i){p.value.minute!==i&&(p.value.minute=i,ke())}function Oe(i){p.value.second!==i&&(p.value.second=i,ke())}const Pt={hour:Te,minute:Ie,second:Oe};function Ze(){w.value===!1&&(w.value=!0,p.value.hour!==null&&(p.value.hour-=12,ke()))}function xe(){w.value===!0&&(w.value=!1,p.value.hour!==null&&(p.value.hour+=12,ke()))}function Ue(i){const m=e.modelValue;g.value!==i&&m!==void 0&&m!==null&&m!==""&&typeof m!="string"&&(g.value=i)}function ke(){if(ae.value!==null&&ae.value(p.value.hour)!==!0){p.value=_e(),Ue("hour");return}if(de.value!==null&&de.value(p.value.minute)!==!0){p.value.minute=null,p.value.second=null,Ue("minute");return}if(e.withSeconds===!0&&ue.value!==null&&ue.value(p.value.second)!==!0){p.value.second=null,Ue("second");return}p.value.hour===null||p.value.minute===null||e.withSeconds===!0&&p.value.second===null||ze()}function ze(i){const m=Object.assign({...p.value},i),v=e.calendar==="persian"?ve(m.hour)+":"+ve(m.minute)+(e.withSeconds===!0?":"+ve(m.second):""):_t(new Date(m.year,m.month===null?null:m.month-1,m.day,m.hour,m.minute,m.second,m.millisecond),q.value,L.value,m.year,m.timezoneOffset);m.changed=v!==e.modelValue,s("update:modelValue",v,m)}function Dt(){const i=[A("div",{class:"q-time__link "+(g.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:h.value,onClick:Qe.hour,onKeyup:Ct},oe.value.hour),A("div",":"),A("div",_.value===!0?{class:"q-time__link "+(g.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:h.value,onKeyup:jt,onClick:Qe.minute}:{class:"q-time__link"},oe.value.minute)];e.withSeconds===!0&&i.push(A("div",":"),A("div",re.value===!0?{class:"q-time__link "+(g.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:h.value,onKeyup:kt,onClick:Qe.second}:{class:"q-time__link"},oe.value.second));const m=[A("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},i)];return S.value===!1&&m.push(A("div",{class:"q-time__header-ampm column items-between no-wrap"},[A("div",{class:"q-time__link "+(w.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:h.value,onClick:Ze,onKeyup:qt},"AM"),A("div",{class:"q-time__link "+(w.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:h.value,onClick:xe,onKeyup:wt},"PM")])),A("div",{class:"q-time__header flex flex-center no-wrap "+l.value},m)}function Nt(){const i=p.value[g.value];return A("div",{class:"q-time__content col relative-position"},[A(zt,{name:"q-transition--scale"},()=>A("div",{key:"clock"+g.value,class:"q-time__container-parent absolute-full"},[A("div",{ref:E,class:"q-time__container-child fit overflow-hidden"},[Xe(A("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:St,onMousedown:$t},[A("div",{class:"q-time__clock-circle fit"},[A("div",{class:"q-time__clock-pointer"+(p.value[g.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:N.value}),be.value.map(m=>A("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${m.index}`+(m.val===i?" q-time__clock-position--active "+l.value:m.disable===!0?" q-time__clock-position--disable":"")},[A("span",m.label)]))])]),T.value)])])),e.nowBtn===!0?A(D,{class:"q-time__now-button absolute",icon:n.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:h.value,onClick:R}):null])}return o.proxy.setNow=R,()=>{const i=[Nt()],m=Ht(t.default);return m!==void 0&&i.push(A("div",{class:"q-time__actions"},m)),e.name!==void 0&&e.disable!==!0&&P(i,"push"),A("div",{class:ne.value,tabindex:-1},[Dt(),A("div",{class:"q-time__main col overflow-auto"},i)])}}}),bs=nt({name:"QPopupProxy",props:{...ts,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:s,attrs:o}){const{proxy:n}=lt(),{$q:r}=n,h=F(!1),l=F(null),c=y(()=>parseInt(e.breakpoint,10)),{canShow:f}=ss({showing:h});function b(){return r.screen.width<c.value||r.screen.height<c.value?"dialog":"menu"}const P=F(b()),V=y(()=>P.value==="menu"?{maxHeight:"99vh"}:{});we(()=>b(),q=>{h.value!==!0&&(P.value=q)});function j(q){h.value=!0,s("show",q)}function E(q){h.value=!1,P.value=b(),s("hide",q)}return Object.assign(n,{show(q){f(q)===!0&&l.value.show(q)},hide(q){l.value.hide(q)},toggle(q){l.value.toggle(q)}}),Yt(n,"currentComponent",()=>({type:P.value,ref:l.value})),()=>{const q={ref:l,...V.value,...o,onShow:j,onHide:E};let L;return P.value==="dialog"?L=it:(L=es,Object.assign(q,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),A(L,q,t.default)}}});const gs=je({props:{fetcher:{type:Function,required:!0},getter:{type:Function,required:!0},setter:{type:Function,required:!0},filter:{type:Function,required:!0}},setup(e){const t=F([]),s=async()=>{const{fetcher:n,getter:r,setter:h}=e;if(!r()||r().length===0){const l=await n();h(l),t.value=r()}else t.value=r()},o=(n,r)=>{const{getter:h,filter:l}=e,c=h();if(n===""||!n){r(()=>{t.value=c});return}t.value=l(c,n)};return s(),{options:t,filterOptions:o}}}),ys={class:"text-caption"},qs={class:"text-caption"},ws={class:"text-caption"};function Ss(e,t,s,o,n,r){return C(),U(ye,Je(e.$attrs,{"transition-show":"flip-up","transition-hide":"flip-down",options:e.options,"bottom-slots":"","use-input":"",behavior:e.$q.platform.is.ios===!0?"dialog":"menu","input-debounce":"0",onFilter:e.filterOptions,loading:!e.options||e.options.length===0}),Me({error:u(()=>[d("div",ys,I(e.$attrs.errorMessage),1)]),_:2},[e.$attrs.showTooltip&&!e.$attrs.showTooltipLeft?{name:"after",fn:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[d("div",null,[d("div",qs,I(e.$attrs.tooltipMessage),1)])]),_:1})]),_:1})]),key:"0"}:void 0,e.$attrs.showTooltip&&e.$attrs.showTooltipLeft?{name:"before",fn:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[d("div",null,[d("div",ws,I(e.$attrs.tooltipMessage),1)])]),_:1})]),_:1})]),key:"1"}:void 0]),1040,["options","behavior","onFilter","loading"])}var pt=pe(gs,[["render",Ss]]);const $s=je({emits:["changeStep"],components:{aSelect:pt},setup(e,{emit:t}){const s=F(0),o=F(O().format("YYYY-MM-DD")),n=F(O().add("60","day").format("YYYY-MM-DD")),{getV3Data:r,setV3Data:h,getV3Options:l,setV3Options:c}=Se(),f=r.general?r.general:{},b=J({dateNeeded:Zt().required().nullable().label("Date Needed").min(o.value).max(n.value),restriction:J().required().label("Request Type"),reason:J().required().label("Request Reason"),jobNumber:J().required().nullable().label("Job Number"),meetingLocation:J().required().nullable().label("Meeting Location"),siteContact:J().required().nullable().label("Site Contact"),perDiem:J().nullable().label("Per Diem"),notes:Ce().nullable().label("Notes"),shift:J().required().label("Shift"),hours:J().required().label("Hours"),time:Ce().required().label("Time")}),{meta:P,errors:V,handleSubmit:j}=Fe({validationSchema:b,initialValues:{restriction:f.restriction?f.restriction:l.restrictions[1],reason:f.reason?f.reason:l.reasons[0],dateNeeded:f.dateNeeded?f.dateNeeded:o.value,jobNumber:f.jobNumber?f.jobNumber:l.jobNumbers.length===1?l.jobNumbers[0]:null,meetingLocation:f.meetingLocation?f.meetingLocation:l.locations.length===1?l.locations[0]:null,siteContact:f.siteContact?f.siteContact:l.contacts.length===1?l.contacts[0]:null,perDiem:f.perDiem?f.perDiem:null,notes:f.notes?f.notes:null,shift:f.shift?f.shift:l.shift[0],hours:f.hours?f.hours:l.hours[0],time:f.time?f.time:"06:00"}}),{value:E}=H("dateNeeded"),{value:q}=H("restriction"),{value:L}=H("reason"),{value:z}=H("jobNumber"),{value:K}=H("meetingLocation"),{value:g}=H("siteContact"),{value:p}=H("perDiem"),{value:w}=H("notes"),{value:ne}=H("shift"),{value:oe}=H("hours"),{value:S}=H("time"),N=j(M=>{console.log(M),M.notes=M.notes?M.notes.replace(/(\r\n|\n|\r)/gm," "):null,h({prop:"general",data:M}),t("changeStep",2)});return{step:s,changeStep:M=>{},submit:N,meta:P,errors:V,dateNeeded:E,jobNumber:z,restriction:q,reason:L,siteContact:g,meetingLocation:K,perDiem:p,notes:w,shift:ne,hours:oe,getV3Options:l,setV3Options:c,getV3Data:r,jobNumberFetcher:async()=>{const{data:M}=await W.fetchFromProjectsApp({fields:[De({type:"jobNumbers",query:`{'6'.EX.'${r.project[3]}'}AND{'29'.EX.'Active'}`})]});return M.sort((T,R)=>T[11]>R[11]?-1:1)},meetingLocationsFetcher:async()=>{const{data:M}=await W.fetchFromStructureApp({fields:[Kt({type:"meetingLocations",query:`{'15'.EX.'${r.project[8]}'}AND{'14'.EX.'Active'}`})]});return M.sort((T,R)=>T[6]>R[6]?-1:1)},siteContactsFetcher:async()=>{const{data:M}=await W.fetchFromProjectsApp({fields:[De({type:"siteContacts",query:`{'7'.EX.'${r.project[3]}'}AND{'6'.EX.'Active'}`})]});return M.sort((T,R)=>T[17]>R[17]?-1:1)},perDiemFetcher:async()=>{const{data:M}=await W.fetchFromProjectsApp({fields:[De({type:"perDiemSpecs",query:`{'12'.EX.'${r.project[3]}'}AND{'38'.EX.'Active'}`})]});return M.sort((T,R)=>T[20]>R[20]?-1:1)},today:o,time:S,maxDay:n,setJobNumber:()=>{!z.value&&l.jobNumbers.length===1&&(z.value=l.jobNumbers[0])},setMeetingLocation:M=>{!K.value&&M.length===1&&(K.value=M[0])},setSiteContact:()=>{!g.value&&l.contacts.length===1&&(g.value=l.contacts[0])}}}}),Cs=d("div",{class:"text-body2 text-italic text-weight-bold text-dark"}," Please provide the following general information about this request. ",-1),js={class:"row"},ks={class:"col-12 col-md-4 q-pr-md"},Ps={class:"text-caption"},Ds=d("div",null,[d("div",{class:"text-caption"}," This is the day that these employees should arrive to begin work. "),d("div",{class:"text-caption"}," Expect a minimum of 3-5 days for processing of any drug screens or background checks. ")],-1),Ns={class:"text-caption"},Vs={class:"text-caption"},Ts={class:"text-caption"},Is={class:"text-caption"},Os={key:0,class:"text-caption text-dark text-italic text-weight-bold"},_s={class:"text-caption"},Rs={class:"text-subtitle1"},Ms={class:"row items-center justify-end"},As=d("div",null,[d("div",{class:"text-caption"}," Start Time, click on clock to to change time. ")],-1),Ls={class:"col-12 col-md-4 q-pr-sm"},Fs={class:"text-caption"},Es={class:"col-12 col-md-4 q-pr-sm"};function Bs(e,t,s,o,n,r){const h=ee("a-select");return C(),U(Le,{onSubmit:Ae(e.submit,["prevent"])},{default:u(()=>[a(ie,{flat:""},{default:u(()=>[a(Q,{class:"q-pt-none q-px-none"},{default:u(()=>[Cs]),_:1}),a(Q,{class:"q-px-none q-pb-none"},{default:u(()=>[d("div",js,[d("div",ks,[a(qe,{class:"q-mb-md",autofocus:"",outlined:"",type:"date",dense:"",label:"Date Needed",min:e.today,max:e.maxDay,modelValue:e.dateNeeded,"onUpdate:modelValue":t[0]||(t[0]=l=>e.dateNeeded=l),error:!!e.errors.dateNeeded,"bottom-slots":"","stack-label":""},{error:u(()=>[d("div",Ps,I(e.errors.dateNeeded),1)]),before:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[Ds]),_:1})]),_:1})]),_:1},8,["min","max","modelValue","error"]),a(ye,{class:"q-mb-md",dense:"",outlined:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Request Reason",modelValue:e.reason,"onUpdate:modelValue":t[1]||(t[1]=l=>e.reason=l),options:e.getV3Options.reasons,"option-label":"label",error:!!e.errors.reason,"bottom-slots":""},{error:u(()=>[d("div",Ns,I(e.errors.reason),1)]),before:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[d("div",null,[d("div",Vs,I(e.reason?e.reason.description:""),1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","error"]),a(ye,{class:"q-mb-md",dense:"",outlined:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Request Type",modelValue:e.restriction,"onUpdate:modelValue":t[2]||(t[2]=l=>e.restriction=l),options:e.getV3Options.restrictions,"option-label":"value",error:!!e.errors.restriction,"bottom-slots":""},{error:u(()=>[d("div",Ts,I(e.errors.restriction),1)]),before:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[d("div",null,[d("div",Is,I(e.restriction?e.restriction.description:""),1)])]),_:1})]),_:1})]),hint:u(()=>[e.restriction?(C(),x("div",Os,I(e.restriction.warning||""),1)):X("",!0)]),_:1},8,["modelValue","options","error"]),a(ye,{class:"q-mb-md",style:et({marginTop:e.restriction&&e.restriction.value==="Name Request Only"?"50px":""}),dense:"",outlined:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Shift",modelValue:e.shift,"onUpdate:modelValue":t[3]||(t[3]=l=>e.shift=l),options:e.getV3Options.shift,"option-label":"label",error:!!e.errors.shift,"bottom-slots":""},{before:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[d("div",null,[d("div",_s,I(e.shift?e.shift.description:""),1)])]),_:1})]),_:1})]),_:1},8,["style","modelValue","options","error"]),a(qe,{class:"q-mb-md",outlined:"",dense:"",label:"Start Time",modelValue:e.time,"onUpdate:modelValue":t[5]||(t[5]=l=>e.time=l),error:!!e.errors.time,mask:"time","bottom-slots":"","stack-label":""},{append:u(()=>[d("span",Rs,I(e.$dayjs(e.time,"HH:mm").format("LT")),1),a(Ke,{name:"access_time",class:"cursor-pointer",color:"primary"},{default:u(()=>[a(bs,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:u(()=>[a(vs,{modelValue:e.time,"onUpdate:modelValue":t[4]||(t[4]=l=>e.time=l),format24h:!1},{default:u(()=>[d("div",Ms,[Xe(a(D,{label:"Close",color:"primary",flat:""},null,512),[[ct]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),before:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[As]),_:1})]),_:1})]),_:1},8,["modelValue","error"])]),d("div",Ls,[a(h,{dense:"",class:"q-mb-md",outlined:"",label:"Location",modelValue:e.meetingLocation,"onUpdate:modelValue":t[6]||(t[6]=l=>e.meetingLocation=l),"option-label":l=>l[6],"display-value":e.meetingLocation?`${e.meetingLocation[6]}`:"",error:!!e.errors.meetingLocation,"error-message":e.errors.meetingLocation,fetcher:e.meetingLocationsFetcher,getter:()=>e.getV3Options.meetingLocations,setter:l=>{e.setV3Options({prop:"meetingLocations",data:l}),e.setMeetingLocation(l)},filter:(l,c)=>l.filter(f=>f[6].toLowerCase().indexOf(c.toLowerCase())>-1),"bottom-slots":"",showTooltip:!0,showTooltipLeft:e.$q.screen.lt.md,tooltipMessage:"This is the location that the new hire should report to."},null,8,["modelValue","option-label","display-value","error","error-message","fetcher","getter","setter","filter","showTooltipLeft"]),a(h,{dense:"",class:"q-mb-md",outlined:"",label:"Job Number",modelValue:e.jobNumber,"onUpdate:modelValue":t[7]||(t[7]=l=>e.jobNumber=l),"option-label":l=>`${l[11]} ${l[32]}`,"display-value":e.jobNumber?`${e.jobNumber[11]} ${e.jobNumber[32]}`:"",error:!!e.errors.jobNumber,"error-message":e.errors.jobNumber,fetcher:e.jobNumberFetcher,getter:()=>e.getV3Options.jobNumbers,setter:l=>{e.setV3Options({prop:"jobNumbers",data:l}),e.setJobNumber()},filter:(l,c)=>l.filter(f=>f[17].toLowerCase().indexOf(c.toLowerCase())>-1),"bottom-slots":"",showTooltip:!0,showTooltipLeft:e.$q.screen.lt.md,tooltipMessage:"This is the job number that hiring costs should be charged to."},null,8,["modelValue","option-label","display-value","error","error-message","fetcher","getter","setter","filter","showTooltipLeft"]),a(h,{dense:"",class:"q-mb-md",outlined:"",label:"Site Contact",modelValue:e.siteContact,"onUpdate:modelValue":t[8]||(t[8]=l=>e.siteContact=l),"option-label":l=>l[17],"display-value":e.siteContact?`${e.siteContact[17]}`:"",error:!!e.errors.siteContact,"error-message":e.errors.siteContact,fetcher:e.siteContactsFetcher,getter:()=>e.getV3Options.siteContacts,setter:l=>{e.setV3Options({prop:"siteContacts",data:l}),e.setSiteContact()},filter:(l,c)=>l.filter(f=>f[17].toLowerCase().indexOf(c.toLowerCase())>-1),"bottom-slots":"",showTooltip:!0,showTooltipLeft:e.$q.screen.lt.md,tooltipMessage:"This is the person that a new hire should contact when the arrive at the job site."},null,8,["modelValue","option-label","display-value","error","error-message","fetcher","getter","setter","filter","showTooltipLeft"]),a(ye,{class:"q-mb-md",dense:"",outlined:"",style:et({marginTop:e.restriction&&e.restriction.value==="Name Request Only"?"50px":""}),"transition-show":"flip-up","transition-hide":"flip-down",label:"Hours",modelValue:e.hours,"onUpdate:modelValue":t[9]||(t[9]=l=>e.hours=l),options:e.getV3Options.hours,"option-label":"label",error:!!e.errors.hours,"bottom-slots":""},Me({_:2},[e.$q.screen.lt.md?{name:"before",fn:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[d("div",null,[d("div",Fs,I(e.hours?e.hours.description:""),1)])]),_:1})]),_:1})]),key:"0"}:{name:"after",fn:u(()=>[a(D,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:u(()=>[a(fe,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:u(()=>[d("div",null,[d("div",{class:"text-caption"},I(e.hours?e.hours.description:""),1)])]),_:1})]),_:1})]),key:"1"}]),1032,["style","modelValue","options","error"]),e.getV3Data.project[351]?(C(),U(h,{key:0,dense:"",class:"q-mb-md",outlined:"",label:"Per Diem (optional)",clearable:"",modelValue:e.perDiem,"onUpdate:modelValue":t[10]||(t[10]=l=>e.perDiem=l),"option-label":l=>l[20],"display-value":e.perDiem?`${e.perDiem[20]}`:"",error:!!e.errors.perDiem,"error-message":e.errors.perDiem,fetcher:e.perDiemFetcher,getter:()=>e.getV3Options.perDiem,setter:l=>{e.setV3Options({prop:"perDiem",data:l})},filter:(l,c)=>l.filter(f=>f[20].toLowerCase().indexOf(c.toLowerCase())>-1),"bottom-slots":"",showTooltip:!0,showTooltipLeft:e.$q.screen.lt.md,tooltipMessage:"If per diem is available, this is the specification for per diem for all classifications on this request. Add a separate request for any classifications that do not qualify for per diem."},null,8,["modelValue","option-label","display-value","error","error-message","fetcher","getter","setter","filter","showTooltipLeft"])):X("",!0)]),d("div",Es,[a(qe,{outlined:"","input-style":"resize: none",maxlength:"2500",type:"textarea",modelValue:e.notes,"onUpdate:modelValue":t[11]||(t[11]=l=>e.notes=l),label:"Notes"},null,8,["modelValue"])])])]),_:1}),a(me,{align:"right"},{default:u(()=>[a(D,{color:"secondary",label:"Back",onClick:t[12]||(t[12]=l=>e.$emit("changeStep",0))}),a(D,{color:"info",label:"Continue",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])}var Hs=pe($s,[["render",Bs]]);const Qs={emits:["removeClassification"],props:{data:Array,matchTable:Boolean},setup(e,{emit:t}){return{columns:[{name:0,label:"Craft",align:"left",field:o=>o.craft[10],format:o=>`${o}`,sortable:!0},{name:1,label:"Classification",align:"left",field:o=>o.classification[18],format:o=>`${o}`,sortable:!0,required:!0},{name:2,label:"Pay Rate",align:"right",field:o=>o.rate,format:o=>`$ ${parseFloat(o).toFixed(2)}`},{name:3,label:"Quantity",align:"right",field:o=>o.qty,format:o=>`${parseFloat(o)}`},{name:4,label:"",align:"center",field:""}]}}},Us={class:"full-width row flex-center text-primary q-gutter-sm q-py-xs"};function zs(e,t,s,o,n,r){return C(),x("div",null,[a(ft,Je(e.$attrs,{dense:"",title:e.$attrs.title?e.$attrs.title:"Saved Classifications","title-class":e.$attrs.titleClass?e.$attrs.titleClass:(e.$q.screen.gt.sm,"text-primary text-body1"),columns:o.columns,"row-key":h=>h.id,pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"You are required to add at least one classification!","hide-pagination":!0}),Me({"no-data":u(({message:h})=>[d("div",Us,[a(Ke,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),d("span",null,I(h),1)])]),_:2},[e.$attrs.hideRemove?void 0:{name:"body-cell-4",fn:u(h=>[a(dt,{class:"text-center","auto-width":""},{default:u(()=>[a(D,{flat:"",color:"accent",round:"",dense:"",onClick:l=>e.$emit("removeClassification",h.row),icon:"delete"},null,8,["onClick"])]),_:2},1024)]),key:"0"}]),1040,["title","title-class","columns","row-key"])])}var ht=pe(Qs,[["render",zs]]);const Ys=je({emits:["changeStep"],props:{},components:{aSelect:pt,PayRateField:os,ClassificationsTable:ht},setup(e,{emit:t}){const{getV3Data:s,setV3Data:o,getV3Options:n,setV3Options:r}=Se(),h=y(()=>s.general?s.general:{}),l=y(()=>s.matches?s.matches:null),c=y(()=>s.request?s.request:null),f=J({craft:J().required().nullable().label("Craft"),classification:J().required().nullable().label("Classification"),rate:ot().required().nullable().label("Rate"),qty:ot().required().nullable().label("Quantity")}),{errors:b,handleSubmit:P,resetForm:V,isSubmitting:j,setFieldError:E}=Fe({validationSchema:f}),{value:q}=H("craft"),{value:L}=H("classification"),{value:z}=H("rate"),{value:K}=H("qty"),g=P(async S=>{console.log(S),console.log(l.value);const N=s.classifications.length+1;if(S.id=N,l.value||c.value){const _=await as({job:S,matches:l.value?l.value:c.value});console.log(_),o({prop:"classifications",data:_,push:!0})}else o({prop:"classifications",data:S,push:!0});V()}),p=async()=>{if(s.project?s.project[3]:s.request?s.request[6]:null){const{data:N}=await W.fetchFromProjectsApp({fields:[De({type:"projectCrafts",query:`{'7'.EX.'${s.project[3]}'}AND{'6'.EX.'Active'}`})]});return N.sort((re,ae)=>re[20]>ae[20]?1:-1)}else return[]},w=y(()=>{const S=q.value&&q.value.classifications?q.value.classifications:[];return S.length>0?S.sort((N,_)=>N[32]>_[32]?-1:1):[]}),ne=S=>{const N=s.classifications.filter(_=>_.id!==S.id);o({prop:"classifications",data:N,push:!1})};return we(L,(S,N)=>{S&&S.hasFixedRate?z.value=S.fixedRate:z.value&&(z.value=null)}),{submit:g,resetForm:V,errors:b,craft:q,classification:L,rate:z,qty:K,getV3Data:s,getV3Options:n,setV3Options:r,craftsFetcher:p,classificationOptions:w,removeClassification:ne,nextStep:()=>{h.value.restriction&&h.value.restriction.value!=="Open"?t("changeStep",3):c.value?c.value[282]!=="Open"?t("changeStep",1):t("changeStep",2):t("changeStep",4)},request:c}}}),Ws={class:"row justify-between"},Xs={class:"col-12 col-md-6 q-pa-sm"},Js=d("div",{class:"text-body2 text-italic text-weight-bold text-dark"}," Enter the following information about the classification and click Save. Repeat until all classifications you are requesting have been saved. Then click Continue. ",-1),Ks={class:"row q-mb-md"},Gs={class:"col-6 q-pr-sm"},Zs={class:"col-6 q-pl-sm"},xs={class:"text-caption"},eo={class:"row"},to={class:"col-6 q-pr-sm"},so={class:"text-caption"},oo={class:"col-6 q-pl-sm"},ao={class:"col-12 col-md-6 q-pa-sm"};function no(e,t,s,o,n,r){const h=ee("a-select"),l=ee("pay-rate-field"),c=ee("classifications-table");return C(),x("div",null,[a(ie,{flat:""},{default:u(()=>[a(Q,{class:"q-px-none q-pt-none"},{default:u(()=>[d("div",Ws,[d("div",Xs,[a(Le,{onSubmit:Ae(e.submit,["prevent"])},{default:u(()=>[a(ie,null,{default:u(()=>[a(Q,null,{default:u(()=>[Js,d("div",Ks,[d("div",Gs,[a(h,{dense:"",class:"q-mt-md",clearable:"",label:"Select Craft",modelValue:e.craft,"onUpdate:modelValue":t[0]||(t[0]=f=>e.craft=f),"option-label":f=>`${f[10]}`,"display-value":e.craft?`${e.craft[10]}`:"",error:!!e.errors.craft,"error-message":e.errors.craft,fetcher:e.craftsFetcher,getter:()=>e.getV3Options.crafts,setter:f=>{e.setV3Options({prop:"crafts",data:f})},filter:(f,b)=>f.filter(P=>P[10].toLowerCase().indexOf(b.toLowerCase())>-1),"bottom-slots":""},null,8,["modelValue","option-label","display-value","error","error-message","fetcher","getter","setter","filter"])]),d("div",Zs,[a(ye,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Classification",modelValue:e.classification,"onUpdate:modelValue":t[1]||(t[1]=f=>e.classification=f),options:e.classificationOptions,"option-label":f=>f[18],"display-value":e.classification?`${e.classification[18]}`:"",error:!!e.errors.classification,"bottom-slots":"",disable:!e.craft},{error:u(()=>[d("div",xs,I(e.errors.classification),1)]),_:1},8,["modelValue","options","option-label","display-value","error","disable"])])]),d("div",eo,[d("div",to,[a(qe,{dense:"",type:"number",label:"Quantity",modelValue:e.qty,"onUpdate:modelValue":t[2]||(t[2]=f=>e.qty=f),modelModifiers:{number:!0},error:!!e.errors.qty,disable:!e.classification,"bottom-slots":""},{error:u(()=>[d("div",so,I(e.errors.qty),1)]),_:1},8,["modelValue","error","disable"])]),d("div",oo,[a(l,{class:"q-mb-md",type:"number",step:"any",dense:"",label:"Hourly Rate",modelValue:e.rate,"onUpdate:modelValue":t[3]||(t[3]=f=>e.rate=f),modelModifiers:{number:!0},prefix:"$",error:!!e.errors.rate,"error-message":e.errors.rate,"bottom-slots":""},null,8,["modelValue","error","error-message"])])])]),_:1}),a(me,{align:"right"},{default:u(()=>[a(D,{dense:"",color:"accent",label:"Reset",onClick:e.resetForm},null,8,["onClick"]),a(D,{dense:"",color:"primary",label:"Save",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),d("div",ao,[a(c,{rows:e.getV3Data.classifications,onRemoveClassification:e.removeClassification},null,8,["rows","onRemoveClassification"])])])]),_:1}),a(me,{class:"q-pb-none",align:"right"},{default:u(()=>[e.request?X("",!0):(C(),U(D,{key:0,color:"secondary",label:"Back",onClick:t[4]||(t[4]=f=>e.$emit("changeStep",1))})),a(D,{color:"info",label:"Continue",disable:e.getV3Data.classifications.length===0,onClick:e.nextStep},null,8,["disable","onClick"])]),_:1})]),_:1})])}var lo=pe(Ys,[["render",no]]);const io={emits:["removeName","viewEmployee"],props:{data:Array},components:{},setup(e,{emit:t}){const s=[{name:1,label:"Name",align:"left",field:r=>r.firstName,format:(r,h)=>`${r} ${h.lastName}`,sortable:!0},{name:2,label:"Phone",align:"left",field:r=>r.phoneNumber,format:r=>`${n(r)}`,sortable:!0,required:!0},{name:3,label:"Last 4",align:"left",field:r=>r.ssn,format:r=>`${r||"N/A"}`,sortable:!0},{name:4,label:"Classification",align:"left",field:r=>r.job.classification,format:r=>`${r[21]} ${r[18]}`,sortable:!0,required:!0},{name:6,label:"",align:"center",field:""}],o=r=>{t("viewEmployee",r)},n=r=>{const l=(""+r).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return l?`(${l[1]}) ${l[2]}-${l[3]}`:null};return{props:e,columns:s,viewEmployee:o,formatPhone:n}}},ro={class:"full-width row flex-center text-primary q-gutter-sm q-py-xs"};function uo(e,t,s,o,n,r){return C(),x("div",null,[a(ft,Je(e.$attrs,{dense:"",title:e.$attrs.title?e.$attrs.title:"People","title-class":e.$attrs.titleClass?e.$attrs.titleClass:(e.$q.screen.gt.sm,"text-primary text-body1"),columns:o.columns,rows:o.props.data,"row-key":h=>h.ssn,pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"No People Added","hide-pagination":!1}),Me({"no-data":u(({message:h})=>[d("div",ro,[a(Ke,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),d("span",null,I(h),1)])]),_:2},[e.$attrs.hideRemove?void 0:{name:"body-cell-6",fn:u(h=>[a(dt,{class:"text-center","auto-width":""},{default:u(()=>[a(D,{flat:"",color:"accent",round:"",dense:"",onClick:l=>e.$emit("removeName",h.row),icon:"delete_forever"},null,8,["onClick"])]),_:2},1024)]),key:"0"}]),1040,["title","title-class","columns","rows","row-key"])])}var vt=pe(io,[["render",uo]]);const co=je({emits:["changeStep"],props:{},components:{ClassificationsTable:ht,NamesTable:vt},setup(e,{emit:t}){const s=Re(),o=rt(),n=ut(),{capitalize:r}=Xt,{getUserType:h}=Y(),l=Se(),{getV3Data:c}=We(l),f=c.value.project?c.value.project:null,b=c.value.general?c.value.general:null,P=y(()=>c.value.matches?c.value.matches:null),V=y(()=>c.request?c.request:null),j=y(()=>c.value.classifications.filter(w=>w.match)),E=y(()=>c.value.classifications.filter(w=>!w.match)),q=p=>{const w=p.split(" ");let ne="";return w.forEach((oe,S)=>{ne+=S>0?` ${r(oe.toLowerCase())}`:r(oe.toLowerCase())}),ne},L=y(()=>P.value?V.value?[{label:"Request Number",value:V.value[3]},{label:"Date Submitted",value:O(V.value[1].$d).format("MM/DD/YYYY")},{label:"Hiring Center",value:V.value[103]},{label:"Current Status",value:V.value[14]}]:null:[{label:"Request Number",value:P.value[3]},{label:"Date Submitted",value:O(P.value[1].$d).format("MM/DD/YYYY")},{label:"Hiring Center",value:P.value[103]},{label:"Current Status",value:P.value[14]}]),z=y(()=>{let p;return b?p=[{label:"Project",value:f?f[43]:"N/A"},{label:"Date Needed",value:O(b.dateNeeded).format("MM/DD/YYYY")},{label:"Request Reason",value:b.reason.label},{label:"Request Type",value:b.restriction.value},{label:"Job Number",value:b.jobNumber[11]},{label:"Meeting Location",value:q(b.meetingLocation[6])},{label:"Meeting Location Address",value:b.meetingLocation[7]},{label:"Site Contact",value:q(b.siteContact[17])},{label:"Per Diem",value:b.perDiem?b.perDiem[20]:"N/A"},{label:"Notes",value:b.notes},{label:"Shift",value:b.shift.label},{label:"Start Time",value:b.time},{label:"Hours",value:b.hours.label}]:p=[],p});return{project:f,getV3Data:c,details:z,matchDetails:L,changeStep:()=>{V.value?V.value[282]!=="Open"?t("changeStep",1):t("changeStep",0):b.restriction.value!=="Open"?t("changeStep",3):t("changeStep",2)},submitRequest:async()=>{const p=o.params.project?{name:"project-requests",params:{id:o.params.project}}:h==="Project User"?{name:"requests"}:null;s.loading.show({message:"Submitting Request Now"});try{const{data:w}=await ns({data:c.value});if(s.loading.hide(),s.notify({type:"positive",message:P.value?"Hire Request successfully updated":"Hire Request successfully added"}),p)n.replace({name:"hire-request",params:{id:w[3]}});else try{window.close()}catch{n.replace({name:"hire-request",params:{id:w[3]}})}l.$reset()}catch{s.loading.hide(),s.notify({type:"negative",message:"There was a problem add request"})}},match:P,classWithMatch:j,classNoMatch:E}}}),fo=d("div",{class:"text-body2 text-italic text-weight-bold text-dark"}," Review the information below. If changes are needed, click Back. If all information is correct, click Submit to complete this request. ",-1),mo={class:"row"},po={class:"col-12 col-md-6 q-pa-sm"},ho=d("div",{class:"text-body1 text-primary text-weight-bold"},"General Information",-1),vo={class:"row"},bo={class:"col-12 col-md-4"},go={class:"text-weight-bold text-caption"},yo={class:"col-12 col-md-8"},qo={key:0,class:"text-dark text-caption"},wo={key:1,class:"text-dark text-caption"},So={class:"col-12 col-md-6 q-pa-sm"},$o={key:1,class:"row justify-center"},Co={class:"col-12 col-md-10"},jo=d("div",{class:"text-primary text-h6 text-weight-bold"},"Matching Request Found",-1),ko=d("div",{class:"text-body2 text-italic"}," The information that you entered on this request matches another request that you submitted recently. ",-1),Po=d("div",{style:{"text-decoration":"underline"},class:"text-body2 text-accent text-italic"},"This request will be updated with the below classification and name changes, where applicable.",-1),Do={class:"row q-mb-md"},No={key:0,class:"col-12 col-md-3 q-pr-sm"},Vo={class:"row q-mt-md"},To={class:"col-12 col-md-6 q-pr-md"},Io={class:"col-12 col-md-6 q-pl-md"};function Oo(e,t,s,o,n,r){const h=ee("classifications-table"),l=ee("names-table");return C(),x("div",null,[e.match?(C(),x("div",$o,[d("div",Co,[a(ie,null,{default:u(()=>[a(Q,null,{default:u(()=>[jo,ko,Po]),_:1}),a(Q,{class:"q-py-none"},{default:u(()=>[d("div",Do,[(C(!0),x(Ye,null,tt(e.matchDetails,(c,f)=>(C(),x(Ye,{key:f},[c.hide?X("",!0):(C(),x("div",No,[d("div",{class:st(["text-weight-bold",e.$q.screen.gt.lg?"text-body2":"text-caption"])},I(c.label),3),d("div",{class:st(["q-pl-sm text-weight-light",e.$q.screen.gt.lg?"text-body2":"text-caption"])},I(c.value),3)]))],64))),128))]),a(Wt),d("div",Vo,[d("div",To,[e.classWithMatch.length>0?(C(),U(h,{key:0,class:"q-mb-md",matchTable:!0,titleClass:"text-body1 text-accent",title:"Classifications to Update",hideRemove:!0,rows:e.classWithMatch},null,8,["rows"])):X("",!0),e.classNoMatch.length>0?(C(),U(h,{key:1,titleClass:"text-body1 text-dark",title:e.match?"Classifications to Add":"Classifications",hideRemove:!0,rows:e.classNoMatch},null,8,["title","rows"])):X("",!0)]),d("div",Io,[e.getV3Data.names.length>0?(C(),U(l,{key:0,titleClass:"text-body1 text-primary",title:"People to Add",hideRemove:!0,data:e.getV3Data.names},null,8,["data"])):X("",!0)])])]),_:1}),a(me,{align:"right"},{default:u(()=>[a(D,{color:"secondary",label:"Back",onClick:e.changeStep},null,8,["onClick"]),a(D,{color:"info",label:"Submit",onClick:e.submitRequest},null,8,["onClick"])]),_:1})]),_:1})])])):(C(),U(ie,{key:0,flat:""},{default:u(()=>[a(Q,{class:"q-pt-none q-px-none"},{default:u(()=>[fo]),_:1}),a(Q,{class:"q-px-none q-pt-none"},{default:u(()=>[d("div",mo,[d("div",po,[a(ie,null,{default:u(()=>[a(Q,{class:"q-pa-sm"},{default:u(()=>[ho]),_:1}),(C(!0),x(Ye,null,tt(e.details,(c,f)=>(C(),U(Q,{key:f,class:"q-pa-sm"},{default:u(()=>[d("div",vo,[d("div",bo,[d("div",null,[d("span",go,I(c.label),1)])]),d("div",yo,[d("div",null,[c.label==="Start Time"?(C(),x("span",qo,I(e.$dayjs(c.value,"HH:mm").format("LT")),1)):(C(),x("span",wo,I(c.value===""?"N/A":c.value),1))])])])]),_:2},1024))),128))]),_:1})]),d("div",So,[e.classNoMatch.length>0?(C(),U(h,{key:0,class:"q-mb-md",titleClass:"text-body1 text-primary text-weight-bold",title:e.match?"Classifications to Add":"Classifications",hideRemove:!0,rows:e.classNoMatch},null,8,["title","rows"])):X("",!0),e.match&&e.classWithMatch.length>0?(C(),U(h,{key:1,matchTable:!0,class:"q-mb-md",titleClass:"text-body1 text-primary text-weight-bold",title:"Classifications to Update",hideRemove:!0,rows:e.classWithMatch},null,8,["rows"])):X("",!0),e.getV3Data.names.length>0?(C(),U(l,{key:2,class:"q-mb-md",titleClass:"text-body1 text-primary text-weight-bold",title:"People",hideRemove:!0,data:e.getV3Data.names},null,8,["data"])):X("",!0),a(me,{class:"q-pb-none q-pt-lg q-px-none",align:"right"},{default:u(()=>[e.getV3Data.project?(C(),U(D,{key:0,color:"secondary",label:"Back",onClick:e.changeStep},null,8,["onClick"])):X("",!0),e.getV3Data.project?(C(),U(D,{key:1,color:"info",label:"Submit",onClick:e.submitRequest},null,8,["onClick"])):X("",!0)]),_:1})])])]),_:1})]),_:1}))])}var _o=pe(co,[["render",Oo]]);const Ro=je({emits:["changeStep"],props:{},components:{NamesTable:vt,phoneNumberInput:ls},setup(e,{emit:t}){Re();const s=F(10),o=F(!1),n=F(""),{getV3Data:r,setV3Data:h,getV3Options:l,setV3Options:c}=Se();r.general&&r.general;const f=F(null),b=y(()=>{const N=new RegExp("^(?!0+$)\\d{"+s.value+"}","g");return J({job:J().required("Classification is required"),firstName:Ce().required().label("First Name"),lastName:Ce().required().label("Last Name"),phoneNumber:Ce().matches(N,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number"),ssn:Ce().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).label("Last 4 of SSN")})}),{errors:P,handleSubmit:V,resetForm:j,isSubmitting:E}=Fe({validationSchema:b,initialValues:{job:r.classifications.length===1?r.classifications[0]:null}}),{value:q}=H("job"),{value:L}=H("firstName"),{value:z}=H("lastName"),{value:K}=H("phoneNumber"),{value:g}=H("ssn"),p={};return r.classifications.forEach(N=>{p[N.id]=0}),{submit:V(N=>{const _=q.value.id,re=q.value.qty,ae=q.value.classification[18]+"  "+q.value.classification[21];if(re>p[_]){o.value=!1,n.value="";const de=r.names.length+1;N.id=de,h({prop:"names",data:N,push:!0}),j(),p[_]=p[_]+1}else n.value=ae+" exceeds the selected quantity",o.value=!0,j()}),isError:o,errorMsg:n,resetForm:j,errors:P,getV3Data:r,job:q,firstName:L,lastName:z,phoneNumber:K,ssn:g,removeName:N=>{p[N.job.id]=p[N.job.id]-1;const _=r.names.filter(re=>re.id!==N.id);h({prop:"names",data:_,push:!1})},updateCountry:N=>{f.value=N},updatePhoneMaxLength:N=>{s.value=N}}}}),Mo={class:"row justify-between"},Ao={class:"col-12 col-md-6 q-pa-sm"},Lo=d("div",{class:"text-body2 text-italic text-weight-bold text-dark"}," Enter the following information about the people and click Save. Repeat until all people you are requesting have been saved. Then click Continue. You may also skip adding names if you do not have them yet. ",-1),Fo=d("div",{class:"text-h6"},"Alert",-1),Eo={class:"text-caption"},Bo={class:"row q-mb-md"},Ho={class:"col-6"},Qo={class:"text-caption"},Uo={class:"row"},zo={class:"col-6 q-pr-sm"},Yo={class:"text-caption"},Wo={class:"col-6 q-pl-sm"},Xo={class:"text-caption"},Jo={class:"row"},Ko={class:"col-6 q-pr-sm"},Go={class:"col-6 q-pl-sm"},Zo={class:"text-caption"},xo={class:"col-12 col-md-6 q-pa-sm"};function ea(e,t,s,o,n,r){const h=ee("phone-number-input"),l=ee("names-table");return C(),x("div",null,[a(ie,{flat:""},{default:u(()=>[a(Q,{class:"q-px-none q-pt-none"},{default:u(()=>[d("div",Mo,[d("div",Ao,[a(Le,{onSubmit:Ae(e.submit,["prevent"])},{default:u(()=>[a(ie,null,{default:u(()=>[a(Q,null,{default:u(()=>[Lo,e.isError?(C(),U(it,{key:0,modelValue:e.isError,"onUpdate:modelValue":t[0]||(t[0]=c=>e.isError=c)},{default:u(()=>[a(ie,null,{default:u(()=>[a(Q,null,{default:u(()=>[Fo]),_:1}),a(Q,{class:"q-pt-none"},{default:u(()=>[d("span",Eo,I(e.errorMsg),1)]),_:1}),a(me,{align:"right"},{default:u(()=>[Xe(a(D,{flat:"",label:"OK",color:"primary"},null,512),[[ct]])]),_:1})]),_:1})]),_:1},8,["modelValue"])):X("",!0),d("div",Bo,[d("div",Ho,[a(ye,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Classification",modelValue:e.job,"onUpdate:modelValue":t[1]||(t[1]=c=>e.job=c),options:e.getV3Data.classifications.filter(c=>{if(e.getV3Data.names.filter(f=>f.job.classification[3]===c.classification[3]&&f.job.id===c.id).length<c.qty)return!0}),"option-label":c=>`${c.classification[21]} ${c.classification[18]} - $${Number(c.rate).toFixed(2)} (${c.qty-e.getV3Data.names.filter(f=>f.job.classification[3]===c.classification[3]&&f.job.id===c.id).length})`,"display-value":e.job?`${e.job.classification[21]} ${e.job.classification[18]} - $${Number(e.job.rate).toFixed(2)}`:"",error:!!e.errors.job,"bottom-slots":""},{error:u(()=>[d("div",Qo,I(e.errors.job),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])])]),d("div",Uo,[d("div",zo,[a(qe,{dense:"",type:"text",tabindex:"1",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[2]||(t[2]=c=>e.firstName=c),error:!!e.errors.firstName,"bottom-slots":""},{error:u(()=>[d("div",Yo,I(e.errors.firstName),1)]),_:1},8,["modelValue","error"])]),d("div",Wo,[a(qe,{dense:"",type:"text",tabindex:"2",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[3]||(t[3]=c=>e.lastName=c),error:!!e.errors.lastName,"bottom-slots":""},{error:u(()=>[d("div",Xo,I(e.errors.lastName),1)]),_:1},8,["modelValue","error"])])]),d("div",Jo,[d("div",Ko,[a(h,{name:"phoneNumber",class:"col-xs-12 col-sm-12",dense:"",modelValue:e.phoneNumber,"onUpdate:modelValue":t[4]||(t[4]=c=>e.phoneNumber=c),label:"Phone Number",tabindex:"3",onMaxLengthChanged:e.updatePhoneMaxLength,error:!!e.errors.phoneNumber,"error-message":e.errors.phoneNumber,onCountryChanged:e.updateCountry},null,8,["modelValue","onMaxLengthChanged","error","error-message","onCountryChanged"])]),d("div",Go,[a(qe,{dense:"",maxlength:"4",label:"SSN Last 4 (Optional)",tabindex:"4",modelValue:e.ssn,"onUpdate:modelValue":t[5]||(t[5]=c=>e.ssn=c),error:!!e.errors.ssn,"bottom-slots":""},{error:u(()=>[d("div",Zo,I(e.errors.ssn),1)]),_:1},8,["modelValue","error"])])])]),_:1}),a(me,{align:"right"},{default:u(()=>[a(D,{dense:"",color:"accent",label:"Reset",onClick:e.resetForm},null,8,["onClick"]),a(D,{dense:"",color:"primary",label:"Save",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1}),a(Q,{class:"q-pt-none"})]),_:1},8,["onSubmit"])]),d("div",xo,[a(l,{data:e.getV3Data.names,onRemoveName:e.removeName},null,8,["data","onRemoveName"])])])]),_:1}),a(me,{class:"q-pb-none",align:"right"},{default:u(()=>[a(D,{color:"secondary",label:"Back",onClick:t[6]||(t[6]=c=>e.$emit("changeStep",2))}),a(D,{color:"info",label:e.getV3Data.names.length===0?"Skip Names":"Continue",onClick:t[7]||(t[7]=c=>e.$emit("changeStep",4))},null,8,["label"])]),_:1})]),_:1})])}var ta=pe(Ro,[["render",ea]]);const sa=je({components:{GeneralStep:Hs,ClassificationsStep:lo,ReviewStep:_o,NamesStep:ta,projectSelector:is,officeSelector:rs},setup(){const e=Re(),t=rt(),s=ut(),o=F(0),n=F(null),r=F(null),h=F(null),l=F(null),c=Rt(),{setV3Data:f,setV3Options:b,getV3Options:P,resetV3Data:V}=Se(),{getSelectedProject:j}=We(c),{getV3Data:E}=We(Se()),{userData:q,getUserType:L,userOffices:z,userProjects:K}=Y(),{getProjects:g,fetchAllProjects:p}=mt(),{getViewedProjects:w,setViewedProjects:ne}=Gt(),oe=J({projectSelection:J().required().nullable().label("Project")}),{errors:S,handleSubmit:N}=Fe({validationSchema:oe}),{value:_}=H("projectSelection");j.value&&(_.value=j.value),we(j,()=>{j.value?_.value=j.value:_.value=null});const re=N(T=>{f({prop:"project",data:T.projectSelection}),ue(1)}),ae=()=>{e.dialog({title:"Confirm",message:"Are you sure you want to cancel this new request?",persistent:!0,cancel:!0}).onOk(()=>{V(),t.params.project?s.replace({name:"project-general",params:{id:t.params.project}}):s.replace({name:"requests"})})},de=y(()=>E.value),ue=T=>{T===0?(V(),j.value&&(_.value=j.value)):T===2&&se(),o.value=T},se=async()=>{const T=[],R=T.length>0?T.sort(($e,Ne)=>$e[1].$d>Ne[1].$d?-1:1):null;R&&f({prop:"matches",data:R[0]})};y(()=>z());const ce=y(()=>K()),he=y(()=>{const T=[];return ce.value.forEach(R=>{T.push(R.project)}),g().forEach(R=>{T.push(R)}),[...new Map(T.map(R=>[R[3],R])).values()]}),M=async()=>{L==="Project User"&&ce.value.length>0&&b({prop:"projects",data:ce.value})},be=async T=>{if(w(T))f({prop:"project",data:w(T)}),b({prop:"projects",data:[w(T)]}),_.value=w(T),ue(1);else{e.loading.show();const{data:R}=await W.fetchFromProjectsApp({fields:[De({type:"projects",id:T})]});f({prop:"project",data:R}),b({prop:"projects",data:[R]}),ne({id:t.params.project,data:R}),_.value=R,ue(1),e.loading.hide()}};return t.params.project?be(t.params.project):M(),{step:o,changeStep:ue,general:n,classifications:r,names:h,match:l,data:de,allProjects:he,formErrors:S,projectSelection:_,submit:re,cancelNew:ae,getV3Data:E,getUserType:L}}}),oa=d("div",{class:"text-h6 text-info"},"Add a New Hire Request",-1),aa=d("div",{class:"text-body2 text-dark text-italic"},"Complete the steps below to submit a new hire request.",-1),na=d("div",{class:"text-body2 text-italic text-weight-bold text-dark"},"Please select the project that this request is for.",-1),la={key:1},ia=d("br",null,null,-1),ra=[ia];function ua(e,t,s,o,n,r){const h=ee("officeSelector"),l=ee("projectSelector"),c=ee("general-step"),f=ee("classifications-step"),b=ee("names-step"),P=ee("review-step");return C(),x("div",null,[a(ie,{flat:""},{default:u(()=>[a(Q,{class:"q-py-sm"},{default:u(()=>[oa,aa]),_:1}),a(Q,{class:"q-pa-none"},{default:u(()=>[a(Jt,{flat:"",modelValue:e.step,"onUpdate:modelValue":t[0]||(t[0]=V=>e.step=V),color:"info","active-icon":"build","done-icon":"task_alt","active-color":"accent","done-color":"info",animated:""},{default:u(()=>[a(Pe,{name:0,title:e.getV3Data.project?e.getV3Data.project[20]:"Select Project",prefix:"1",done:e.step>0},{default:u(()=>[a(Le,{onSubmit:Ae(e.submit,["prevent"])},{default:u(()=>[a(ie,{flat:""},{default:u(()=>[a(Q,{class:"q-pt-none q-px-none"},{default:u(()=>[na]),_:1}),a(Q,{class:"q-pa-none"},{default:u(()=>[e.getUserType==="QuickBase User"?(C(),U(h,{key:0,styleSelection:!0,can:"read",style:{"max-width":"500px"}})):X("",!0),e.getUserType==="QuickBase User"?(C(),x("span",la,ra)):X("",!0),a(l,{can:"read",styleSelection:!0,error:!!e.formErrors.projectSelection,style:{"max-width":"500px"}},null,8,["error"])]),_:1}),a(me,{align:"right"},{default:u(()=>[a(D,{color:"secondary",label:"Cancel",onClick:e.cancelNew},null,8,["onClick"]),a(D,{color:"info",label:"Continue",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["title","done"]),a(Pe,{name:1,title:"General Information",prefix:"2",done:e.step>1},{default:u(()=>[a(c,{onChangeStep:e.changeStep},null,8,["onChangeStep"])]),_:1},8,["done"]),a(Pe,{name:2,title:e.step===2?"Add Classifications":e.step>2?"Classifications Added":"Classifications",prefix:"3",done:e.step>2},{default:u(()=>[a(f,{onChangeStep:e.changeStep},null,8,["onChangeStep"])]),_:1},8,["title","done"]),e.data.general&&e.data.general.restriction.value!=="Open"?(C(),U(Pe,{key:0,name:3,title:e.step===3?"Add Names":"Names",prefix:e.data.general&&e.data.general.restriction.value!=="Open"?"4":"",done:e.step>3},{default:u(()=>[a(b,{onChangeStep:e.changeStep},null,8,["onChangeStep"])]),_:1},8,["title","prefix","done"])):X("",!0),a(Pe,{name:4,title:"Review",prefix:e.data.general&&e.data.general.restriction.value!=="Open"?"5":"4",done:e.step>4},{default:u(()=>[a(P,{onChangeStep:e.changeStep},null,8,["onChangeStep"])]),_:1},8,["prefix","done"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])}var ca=pe(sa,[["render",ua]]);const da={name:"New Request",components:{RequestFormStepper:ca},setup(){Re();const{userOffices:e,userProjects:t}=Y(),{getProjects:s,fetchAllProjects:o}=mt(),{setNewRequestData:n,getDbData:r,getHumanizedData:h,getHumanizedClassificationData:l}=Se(),c=F(0),f=F(!1);y(()=>e());const b=y(()=>t()),P=y(()=>{const j=[];return b.value.forEach(E=>{j.push(E.project)}),s().forEach(E=>{j.push(E)}),[...new Map(j.map(E=>[E[3],E])).values()]});function V(){(c.value>1||P.value.length>1)&&(c.value=c.value-1)}return we(P,(j,E)=>{if(j.length===1){c.value=1;const q={6:{value:j[0][3]},92:{value:j[0][12]}},L={project:j[0]};n({humanized:L,database:q})}}),we(c,()=>{console.log(h),console.log(l)}),{allProjects:P,step:c,goBack:V,getDbData:r,showCart:f}}},fa={class:"q-pa-sm"};function ma(e,t,s,o,n,r){const h=ee("request-form-stepper");return C(),U(It,{style:{"max-width":"100vw"}},{default:u(()=>[d("div",fa,[a(h)])]),_:1})}var Za=pe(da,[["render",ma]]);export{Za as default};
