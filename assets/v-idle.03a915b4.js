import{l as C,h as M,f as K}from"./index.22455e7e.js";var l=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function q(r){return r}var x=q;function V(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}var H=V,J=H,m=Math.max;function X(r,t,e){return t=m(t===void 0?r.length-1:t,0),function(){for(var a=arguments,n=-1,c=m(a.length-t,0),u=Array(c);++n<c;)u[n]=a[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=a[n];return s[t]=e(u),J(r,this,s)}}var W=X;function z(r){return function(){return r}}var Q=z,Y=typeof l=="object"&&l&&l.Object===Object&&l,E=Y,Z=E,rr=typeof self=="object"&&self&&self.Object===Object&&self,tr=Z||rr||Function("return this")(),g=tr,er=g,ar=er.Symbol,L=ar,j=L,F=Object.prototype,nr=F.hasOwnProperty,ir=F.toString,f=j?j.toStringTag:void 0;function or(r){var t=nr.call(r,f),e=r[f];try{r[f]=void 0;var a=!0}catch{}var n=ir.call(r);return a&&(t?r[f]=e:delete r[f]),n}var sr=or,cr=Object.prototype,ur=cr.toString;function vr(r){return ur.call(r)}var fr=vr,_=L,lr=sr,yr=fr,pr="[object Null]",dr="[object Undefined]",O=_?_.toStringTag:void 0;function br(r){return r==null?r===void 0?dr:pr:O&&O in Object(r)?lr(r):yr(r)}var h=br;function gr(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var y=gr,hr=h,Tr=y,$r="[object AsyncFunction]",mr="[object Function]",jr="[object GeneratorFunction]",_r="[object Proxy]";function Or(r){if(!Tr(r))return!1;var t=hr(r);return t==mr||t==jr||t==$r||t==_r}var R=Or,wr=g,Ar=wr["__core-js_shared__"],Ir=Ar,p=Ir,w=function(){var r=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Sr(r){return!!w&&w in r}var Pr=Sr,xr=Function.prototype,Er=xr.toString;function Lr(r){if(r!=null){try{return Er.call(r)}catch{}try{return r+""}catch{}}return""}var Fr=Lr,Rr=R,Nr=Pr,Ur=y,Dr=Fr,Gr=/[\\^$.*+?()[\]{}|]/g,kr=/^\[object .+?Constructor\]$/,Br=Function.prototype,Cr=Object.prototype,Mr=Br.toString,Kr=Cr.hasOwnProperty,qr=RegExp("^"+Mr.call(Kr).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vr(r){if(!Ur(r)||Nr(r))return!1;var t=Rr(r)?qr:kr;return t.test(Dr(r))}var Hr=Vr;function Jr(r,t){return r==null?void 0:r[t]}var Xr=Jr,Wr=Hr,zr=Xr;function Qr(r,t){var e=zr(r,t);return Wr(e)?e:void 0}var Yr=Qr,Zr=Yr,rt=function(){try{var r=Zr(Object,"defineProperty");return r({},"",{}),r}catch{}}(),tt=rt,et=Q,A=tt,at=x,nt=A?function(r,t){return A(r,"toString",{configurable:!0,enumerable:!1,value:et(t),writable:!0})}:at,it=nt,ot=800,st=16,ct=Date.now;function ut(r){var t=0,e=0;return function(){var a=ct(),n=st-(a-e);if(e=a,n>0){if(++t>=ot)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var vt=ut,ft=it,lt=vt,yt=lt(ft),pt=yt,dt=x,bt=W,gt=pt;function ht(r,t){return gt(bt(r,t,dt),r+"")}var Tt=ht;function $t(r,t){return r===t||r!==r&&t!==t}var N=$t,mt=9007199254740991;function jt(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=mt}var U=jt,_t=R,Ot=U;function wt(r){return r!=null&&Ot(r.length)&&!_t(r)}var D=wt,At=9007199254740991,It=/^(?:0|[1-9]\d*)$/;function St(r,t){var e=typeof r;return t=t==null?At:t,!!t&&(e=="number"||e!="symbol"&&It.test(r))&&r>-1&&r%1==0&&r<t}var G=St,Pt=N,xt=D,Et=G,Lt=y;function Ft(r,t,e){if(!Lt(e))return!1;var a=typeof t;return(a=="number"?xt(e)&&Et(t,e.length):a=="string"&&t in e)?Pt(e[t],r):!1}var Rt=Ft;function Nt(r,t){for(var e=-1,a=Array(r);++e<r;)a[e]=t(e);return a}var Ut=Nt;function Dt(r){return r!=null&&typeof r=="object"}var T=Dt,Gt=h,kt=T,Bt="[object Arguments]";function Ct(r){return kt(r)&&Gt(r)==Bt}var Mt=Ct,I=Mt,Kt=T,k=Object.prototype,qt=k.hasOwnProperty,Vt=k.propertyIsEnumerable,Ht=I(function(){return arguments}())?I:function(r){return Kt(r)&&qt.call(r,"callee")&&!Vt.call(r,"callee")},Jt=Ht,Xt=Array.isArray,Wt=Xt,d={exports:{}};function zt(){return!1}var Qt=zt;(function(r,t){var e=g,a=Qt,n=t&&!t.nodeType&&t,c=n&&!0&&r&&!r.nodeType&&r,u=c&&c.exports===n,s=u?e.Buffer:void 0,v=s?s.isBuffer:void 0,o=v||a;r.exports=o})(d,d.exports);var Yt=h,Zt=U,re=T,te="[object Arguments]",ee="[object Array]",ae="[object Boolean]",ne="[object Date]",ie="[object Error]",oe="[object Function]",se="[object Map]",ce="[object Number]",ue="[object Object]",ve="[object RegExp]",fe="[object Set]",le="[object String]",ye="[object WeakMap]",pe="[object ArrayBuffer]",de="[object DataView]",be="[object Float32Array]",ge="[object Float64Array]",he="[object Int8Array]",Te="[object Int16Array]",$e="[object Int32Array]",me="[object Uint8Array]",je="[object Uint8ClampedArray]",_e="[object Uint16Array]",Oe="[object Uint32Array]",i={};i[be]=i[ge]=i[he]=i[Te]=i[$e]=i[me]=i[je]=i[_e]=i[Oe]=!0;i[te]=i[ee]=i[pe]=i[ae]=i[de]=i[ne]=i[ie]=i[oe]=i[se]=i[ce]=i[ue]=i[ve]=i[fe]=i[le]=i[ye]=!1;function we(r){return re(r)&&Zt(r.length)&&!!i[Yt(r)]}var Ae=we;function Ie(r){return function(t){return r(t)}}var Se=Ie,b={exports:{}};(function(r,t){var e=E,a=t&&!t.nodeType&&t,n=a&&!0&&r&&!r.nodeType&&r,c=n&&n.exports===a,u=c&&e.process,s=function(){try{var v=n&&n.require&&n.require("util").types;return v||u&&u.binding&&u.binding("util")}catch{}}();r.exports=s})(b,b.exports);var Pe=Ae,xe=Se,S=b.exports,P=S&&S.isTypedArray,Ee=P?xe(P):Pe,Le=Ee,Fe=Ut,Re=Jt,Ne=Wt,Ue=d.exports,De=G,Ge=Le,ke=Object.prototype,Be=ke.hasOwnProperty;function Ce(r,t){var e=Ne(r),a=!e&&Re(r),n=!e&&!a&&Ue(r),c=!e&&!a&&!n&&Ge(r),u=e||a||n||c,s=u?Fe(r.length,String):[],v=s.length;for(var o in r)(t||Be.call(r,o))&&!(u&&(o=="length"||n&&(o=="offset"||o=="parent")||c&&(o=="buffer"||o=="byteLength"||o=="byteOffset")||De(o,v)))&&s.push(o);return s}var Me=Ce,Ke=Object.prototype;function qe(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Ke;return r===e}var Ve=qe;function He(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var Je=He,Xe=y,We=Ve,ze=Je,Qe=Object.prototype,Ye=Qe.hasOwnProperty;function Ze(r){if(!Xe(r))return ze(r);var t=We(r),e=[];for(var a in r)a=="constructor"&&(t||!Ye.call(r,a))||e.push(a);return e}var ra=Ze,ta=Me,ea=ra,aa=D;function na(r){return aa(r)?ta(r,!0):ea(r)}var ia=na,oa=Tt,sa=N,ca=Rt,ua=ia,B=Object.prototype,va=B.hasOwnProperty,fa=oa(function(r,t){r=Object(r);var e=-1,a=t.length,n=a>2?t[2]:void 0;for(n&&ca(t[0],t[1],n)&&(a=1);++e<a;)for(var c=t[e],u=ua(c),s=-1,v=u.length;++s<v;){var o=u[s],$=r[o];($===void 0||sa($,B[o])&&!va.call(r,o))&&(r[o]=c[o])}return r}),la=fa;const ya=C({render(){return M("div",{class:"v-idle"},this.display)},emits:["idle","remind"],props:{duration:{type:Number,default:60*5},events:{type:Array,default:()=>["mousemove","keypress"]},loop:{type:Boolean,default:!1},reminders:{type:Array,default:()=>[]},wait:{type:Number,default:0}},data(){return{display:"",timer:void 0,start:0,counter:void 0,diff:0,minutes:"",seconds:""}},mounted(){setTimeout(()=>{this.start=Date.now(),this.setDisplay(),this.$nextTick(()=>{this.setTimer();for(let r=this.events.length-1;r>=0;r-=1)window.addEventListener(this.events[r],this.clearTimer)})},this.wait*1e3)},methods:{setDisplay(){if(this.diff=this.duration-((Date.now()-this.start)/1e3|0),this.diff<0&&!this.loop)return;this.shouldRemind();const r=this.diff/60|0,t=this.diff%60|0;this.minutes=`${r<10?"0"+r:r}`,this.seconds=`${t<10?"0"+t:t}`,this.display=`${this.minutes}:${this.seconds}`},shouldRemind(){this.reminders.length>0&&this.reminders.includes(this.diff)&&this.remind()},countdown(){this.setDisplay(),this.diff<=0&&this.clearTimer(this.loop)},idle(){this.$emit("idle")},remind(){this.$emit("remind",this.diff)},setTimer(){this.timer=window.setInterval(this.idle,this.duration*1e3),this.counter=window.setInterval(this.countdown,1e3)},clearTimer(r=!1){window.clearInterval(this.timer),window.clearInterval(this.counter),r&&(this.start=Date.now(),this.diff=0,this.setDisplay(),this.setTimer())}},beforeUnmount(){clearInterval(this.timer),clearInterval(this.counter);for(let r=this.events.length-1;r>=0;r-=1)window.removeEventListener(this.events[r],this.clearTimer)}});var pa={install(r,{name:t="v-idle"}={}){r.component(t,la(ya,{name:t}))}},ba=K(({app:r})=>{r.use(pa)});export{ba as default};
