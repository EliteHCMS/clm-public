import{h as N,bW as Oe,d4 as Yt,d5 as Xt,i as Gt,bY as qe,bZ as Zt,r as w,cN as Jt,c as I,w as T,aS as Tt,cB as ea,g as We,dm as ta,aQ as aa,aU as la,o as Ke,b_ as oa,bX as ra,cK as na,dq as he,cL as De,dr as Ge,aP as Y,cF as Ee,cd as sa,cq as ua,a7 as K,L as ia,V as ca,b as qt,Y as da,l as fa,X as be,bU as Me,y as P,z as X,ap as k,bq as g,B as _e,d as b,cj as va,F as Le,b3 as Qe,aw as F,ab as W,df as Be,D as ge,bP as Re,aq as U,bT as ma,bS as pa,cT as Ze,bV as ae,C as Je,bM as Ie,bs as le,bQ as oe,bO as z,de as et,cz as ya,cU as tt,cV as Ae,cW as ha}from"./index.a03c16e1.js";import{a as ga,Q as at}from"./QHeader.4f94a314.js";import{Q as ke}from"./QList.ace1fffd.js";import{Q as ba}from"./QMenu.85d00748.js";import{Q as _a}from"./QToolbar.e42c8dd7.js";import{Q as wa}from"./QBadge.62558377.js";import{Q as Oa}from"./QBtnGroup.0fe3d887.js";import{Q as lt}from"./QSelect.b38e663e.js";import{a as Sa,Q as $a}from"./QDrawer.228aeb88.js";import{a as xa,Q as Pa}from"./QLayout.bcd9c34b.js";import{Q as Ca}from"./QResizeObserver.38a632bf.js";import{C as fe}from"./ClosePopup.0c5c1f69.js";import{u as Na}from"./use-quasar.581262ce.js";import{Q as Ta}from"./QImg.9b304398.js";import{c as Dt,i as te,u as qa}from"./app.8e730c48.js";import{dayjs as Et}from"./dayjs.8e614a0b.js";import{p as Da}from"./VueTelInput.1c8b4971.js";import{c as Ea}from"./array.164cfe36.js";import{u as Ia}from"./i18n.8ef2ea34.js";import{u as Aa}from"./vee-validate.esm.53bf4a95.js";import{_ as ka}from"./officeSelector.2ee8121c.js";import"./position-engine.869e6998.js";import"./selection.a756df5b.js";import"./QChip.2bf5e9f7.js";import"./rtl.b51694b1.js";import"./TouchPan.168e9541.js";import"./touch.3df10340.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.8d2e0f2e.js";import"./index.04bc0a32.js";const Ma=[N("circle",{cx:"15",cy:"15",r:"15"},[N("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),N("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),N("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[N("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),N("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),N("circle",{cx:"105",cy:"15",r:"15"},[N("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),N("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var La=Oe({name:"QSpinnerDots",props:Yt,setup(e){const{cSize:t,classes:a}=Xt(e);return()=>N("svg",{class:a.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Ma)}}),Qa=Oe({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:a}){const{proxy:{$q:l}}=We(),o=Gt(Zt,qe);if(o===qe)return console.error("QFooter needs to be child of QLayout"),qe;const r=w(parseInt(e.heightHint,10)),n=w(!0),s=w(Jt.value===!0||o.isContainer.value===!0?0:window.innerHeight),u=I(()=>e.reveal===!0||o.view.value.indexOf("F")!==-1||l.platform.is.ios&&o.isContainer.value===!0),c=I(()=>o.isContainer.value===!0?o.containerHeight.value:s.value),d=I(()=>{if(e.modelValue!==!0)return 0;if(u.value===!0)return n.value===!0?r.value:0;const O=o.scroll.value.position+c.value+r.value-o.height.value;return O>0?O:0}),f=I(()=>e.modelValue!==!0||u.value===!0&&n.value!==!0),v=I(()=>e.modelValue===!0&&f.value===!0&&e.reveal===!0),i=I(()=>"q-footer q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(f.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(u.value!==!0?" hidden":""):"")),h=I(()=>{const O=o.rows.value.bottom,D={};return O[0]==="l"&&o.left.space===!0&&(D[l.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),O[2]==="r"&&o.right.space===!0&&(D[l.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),D});function S(O,D){o.update("footer",O,D)}function _(O,D){O.value!==D&&(O.value=D)}function E({height:O}){_(r,O),S("size",O)}function M(){if(e.reveal!==!0)return;const{direction:O,position:D,inflectionPoint:x}=o.scroll.value;_(n,O==="up"||D-x<100||o.height.value-c.value-D-r.value<300)}function A(O){v.value===!0&&_(n,!0),a("focusin",O)}T(()=>e.modelValue,O=>{S("space",O),_(n,!0),o.animate()}),T(d,O=>{S("offset",O)}),T(()=>e.reveal,O=>{O===!1&&_(n,e.modelValue)}),T(n,O=>{o.animate(),a("reveal",O)}),T([r,o.scroll,o.height],M),T(()=>l.screen.height,O=>{o.isContainer.value!==!0&&_(s,O)});const q={};return o.instances.footer=q,e.modelValue===!0&&S("size",r.value),S("space",e.modelValue),S("offset",d.value),Tt(()=>{o.instances.footer===q&&(o.instances.footer=void 0,S("size",0),S("offset",0),S("space",!1))}),()=>{const O=ea(t.default,[N(Ca,{debounce:0,onResize:E})]);return e.elevated===!0&&O.push(N("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),N("footer",{class:i.value,style:h.value,onFocusin:A},O)}}}),Ba=Oe({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const a=I(()=>e.sent===!0?"sent":"received"),l=I(()=>`q-message-text-content q-message-text-content--${a.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),o=I(()=>`q-message-text q-message-text--${a.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),r=I(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),n=I(()=>e.size!==void 0?`col-${e.size}`:""),s=I(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function u(d){return t.stamp!==void 0?[d,N("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[d,N("div",{class:"q-message-stamp",[s.value.stamp]:e.stamp})]:[d]}function c(d,f){const v=f===!0?d.length>1?i=>i:i=>N("div",[i]):i=>N("div",{[s.value.msg]:i});return d.map((i,h)=>N("div",{key:h,class:o.value},[N("div",{class:l.value},u(v(i)))]))}return()=>{const d=[];t.avatar!==void 0?d.push(t.avatar()):e.avatar!==void 0&&d.push(N("img",{class:`q-message-avatar q-message-avatar--${a.value}`,src:e.avatar,"aria-hidden":"true"}));const f=[];t.name!==void 0?f.push(N("div",{class:`q-message-name q-message-name--${a.value}`},t.name())):e.name!==void 0&&f.push(N("div",{class:`q-message-name q-message-name--${a.value}`,[s.value.name]:e.name})),t.default!==void 0?f.push(c(ta(t.default()),!0)):e.text!==void 0&&f.push(c(e.text)),d.push(N("div",{class:n.value},f));const v=[];return t.label!==void 0?v.push(N("div",{class:"q-message-label"},t.label())):e.label!==void 0&&v.push(N("div",{class:"q-message-label",[s.value.label]:e.label})),v.push(N("div",{class:r.value},d)),N("div",{class:`q-message q-message-${a.value}`},v)}}});const{passive:re}=na;var Ra=Oe({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:a}){const l=w(!1),o=w(!0),r=w(null),n=w(null);let s=e.initialIndex||0,u,c;const d=I(()=>"q-infinite-scroll__loading"+(l.value===!0?"":" invisible"));function f(){if(e.disable===!0||l.value===!0||o.value===!1)return;const x=he(u),L=De(u),C=Ge(u);e.reverse===!1?Math.round(L+C+e.offset)>=Math.round(x)&&v():Math.round(L)<=e.offset&&v()}function v(){if(e.disable===!0||l.value===!0||o.value===!1)return;s++,l.value=!0;const x=he(u);a("load",s,L=>{o.value===!0&&(l.value=!1,Y(()=>{if(e.reverse===!0){const C=he(u),Se=De(u),H=C-x;Ee(u,Se+H)}L===!0?S():r.value&&r.value.closest("body")&&c()}))})}function i(){s=0}function h(){o.value===!1&&(o.value=!0,u.addEventListener("scroll",c,re)),f()}function S(){o.value===!0&&(o.value=!1,l.value=!1,u.removeEventListener("scroll",c,re),c!==void 0&&c.cancel!==void 0&&c.cancel())}function _(){if(u&&o.value===!0&&u.removeEventListener("scroll",c,re),u=sa(r.value,e.scrollTarget),o.value===!0){if(u.addEventListener("scroll",c,re),e.reverse===!0){const x=he(u),L=Ge(u);Ee(u,x-L)}f()}}function E(x){s=x}function M(x){x=parseInt(x,10);const L=c;c=x<=0?f:ua(f,isNaN(x)===!0?100:x),u&&o.value===!0&&(L!==void 0&&u.removeEventListener("scroll",L,re),u.addEventListener("scroll",c,re))}function A(x){if(q.value===!0){if(n.value===null){x!==!0&&Y(()=>{A(!0)});return}const L=`${l.value===!0?"un":""}pauseAnimations`;Array.from(n.value.getElementsByTagName("svg")).forEach(C=>{C[L]()})}}const q=I(()=>e.disable!==!0&&o.value===!0);T([l,q],()=>{A()}),T(()=>e.disable,x=>{x===!0?S():h()}),T(()=>e.reverse,()=>{l.value===!1&&o.value===!0&&f()}),T(()=>e.scrollTarget,_),T(()=>e.debounce,M);let O=!1;aa(()=>{O!==!1&&u&&Ee(u,O)}),la(()=>{O=u?De(u):!1}),Tt(()=>{o.value===!0&&u.removeEventListener("scroll",c,re)}),Ke(()=>{M(e.debounce),_(),l.value===!1&&A()});const D=We();return Object.assign(D.proxy,{poll:()=>{c!==void 0&&c()},trigger:v,stop:S,reset:i,resume:h,setIndex:E,updateScrollTarget:_}),()=>{const x=oa(t.default,[]);return q.value===!0&&x[e.reverse===!1?"push":"unshift"](N("div",{ref:n,class:d.value},ra(t.loading))),N("div",{class:"q-infinite-scroll",ref:r},x)}}}),ot;const ve=typeof window!="undefined",Va=e=>typeof e=="function",Ha=e=>typeof e=="string",G=()=>{},Ve=ve&&((ot=window==null?void 0:window.navigator)==null?void 0:ot.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function R(e){return typeof e=="function"?e():K(e)}function It(e,t){function a(...l){return new Promise((o,r)=>{Promise.resolve(e(()=>t.apply(this,l),{fn:t,thisArg:this,args:l})).then(o).catch(r)})}return a}function Ua(e,t={}){let a,l,o=G;const r=s=>{clearTimeout(s),o(),o=G};return s=>{const u=R(e),c=R(t.maxWait);return a&&r(a),u<=0||c!==void 0&&c<=0?(l&&(r(l),l=null),Promise.resolve(s())):new Promise((d,f)=>{o=t.rejectOnCancel?f:d,c&&!l&&(l=setTimeout(()=>{a&&r(a),l=null,d(s())},c)),a=setTimeout(()=>{l&&r(l),l=null,d(s())},u)})}}function ja(e,t=!0,a=!0,l=!1){let o=0,r,n=!0,s=G,u;const c=()=>{r&&(clearTimeout(r),r=void 0,s(),s=G)};return f=>{const v=R(e),i=Date.now()-o,h=()=>u=f();return c(),v<=0?(o=Date.now(),h()):(i>v&&(a||!n)?(o=Date.now(),h()):t&&(u=new Promise((S,_)=>{s=l?_:S,r=setTimeout(()=>{o=Date.now(),n=!0,S(h()),c()},Math.max(0,v-i))})),!a&&!r&&(r=setTimeout(()=>n=!0,v)),n=!1,u)}}const J={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function Fa(e){return e}function ne(e){return ia()?(ca(e),!0):!1}function za(e,t=200,a={}){return It(Ua(t,a),e)}function Wa(e,t=200,a=!1,l=!0,o=!1){return It(ja(t,a,l,o),e)}function Ka(e){return typeof e=="function"?I(e):w(e)}function Ya(e,t=!0){We()?Ke(e):t?e():Y(e)}function Xa(e,t=1e3,a={}){const{immediate:l=!0,immediateCallback:o=!1}=a;let r=null;const n=w(!1);function s(){r&&(clearInterval(r),r=null)}function u(){n.value=!1,s()}function c(){const d=R(t);d<=0||(n.value=!0,o&&e(),s(),r=setInterval(e,d))}if(l&&ve&&c(),qt(t)||Va(t)){const d=T(t,()=>{n.value&&ve&&c()});ne(d)}return ne(u),{isActive:n,pause:u,resume:c}}const Ga=ve?window:void 0,He=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ue="__vueuse_ssr_handlers__";He[Ue]=He[Ue]||{};He[Ue];function Za(e,t={}){const{immediate:a=!0,window:l=Ga}=t,o=w(!1);let r=0,n=null;function s(d){if(!o.value||!l)return;const f=d-r;e({delta:f,timestamp:d}),r=d,n=l.requestAnimationFrame(s)}function u(){!o.value&&l&&(o.value=!0,n=l.requestAnimationFrame(s))}function c(){o.value=!1,n!=null&&l&&(l.cancelAnimationFrame(n),n=null)}return a&&u(),ne(c),{isActive:da(o),pause:c,resume:u}}var Ja=Object.defineProperty,rt=Object.getOwnPropertySymbols,el=Object.prototype.hasOwnProperty,tl=Object.prototype.propertyIsEnumerable,nt=(e,t,a)=>t in e?Ja(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,al=(e,t)=>{for(var a in t||(t={}))el.call(t,a)&&nt(e,a,t[a]);if(rt)for(var a of rt(t))tl.call(t,a)&&nt(e,a,t[a]);return e};function ll(e={}){const{controls:t=!1,interval:a="requestAnimationFrame"}=e,l=w(new Date),o=()=>l.value=new Date,r=a==="requestAnimationFrame"?Za(o,{immediate:!0}):Xa(o,a,{immediate:!0});return t?al({now:l},r):l}var st;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(st||(st={}));var ol=Object.defineProperty,we=Object.getOwnPropertySymbols,At=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,ut=(e,t,a)=>t in e?ol(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,rl=(e,t)=>{for(var a in t||(t={}))At.call(t,a)&&ut(e,a,t[a]);if(we)for(var a of we(t))kt.call(t,a)&&ut(e,a,t[a]);return e},nl=(e,t)=>{var a={};for(var l in e)At.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&we)for(var l of we(e))t.indexOf(l)<0&&kt.call(e,l)&&(a[l]=e[l]);return a};const sl=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],ul={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""},il=e=>e.toISOString().slice(0,10);function cl(e,t={}){const{controls:a=!1,updateInterval:l=3e4}=t,o=ll({interval:l,controls:!0}),{now:r}=o,n=nl(o,["now"]),s=I(()=>dl(new Date(R(e)),t,K(r.value)));return a?rl({timeAgo:s},n):s}function dl(e,t={},a=Date.now()){var l;const{max:o,messages:r=ul,fullDateFormatter:n=il,units:s=sl,showSecond:u=!1,rounding:c="round"}=t,d=typeof c=="number"?_=>+_.toFixed(c):Math[c],f=+a-+e,v=Math.abs(f);function i(_,E){return d(Math.abs(_)/E.value)}function h(_,E){const M=i(_,E),A=_>0,q=S(E.name,M,A);return S(A?"past":"future",q,A)}function S(_,E,M){const A=r[_];return typeof A=="function"?A(E,M):A.replace("{0}",E.toString())}if(v<6e4&&!u)return r.justNow;if(typeof o=="number"&&v>o)return n(new Date(e));if(typeof o=="string"){const _=(l=s.find(E=>E.name===o))==null?void 0:l.max;if(_&&v>_)return n(new Date(e))}for(const[_,E]of s.entries()){if(i(f,E)<=0&&s[_-1])return h(f,s[_-1]);if(v<E.max)return h(f,E)}return r.invalid}var fl=Object.defineProperty,it=Object.getOwnPropertySymbols,vl=Object.prototype.hasOwnProperty,ml=Object.prototype.propertyIsEnumerable,ct=(e,t,a)=>t in e?fl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,pl=(e,t)=>{for(var a in t||(t={}))vl.call(t,a)&&ct(e,a,t[a]);if(it)for(var a of it(t))ml.call(t,a)&&ct(e,a,t[a]);return e};const yl={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};pl({linear:Fa},yl);function V(e){var t;const a=R(e);return(t=a==null?void 0:a.$el)!=null?t:a}const se=ve?window:void 0;function j(...e){let t,a,l,o;if(Ha(e[0])||Array.isArray(e[0])?([a,l,o]=e,t=se):[t,a,l,o]=e,!t)return G;Array.isArray(a)||(a=[a]),Array.isArray(l)||(l=[l]);const r=[],n=()=>{r.forEach(d=>d()),r.length=0},s=(d,f,v,i)=>(d.addEventListener(f,v,i),()=>d.removeEventListener(f,v,i)),u=T(()=>[V(t),R(o)],([d,f])=>{n(),d&&r.push(...a.flatMap(v=>l.map(i=>s(d,v,i,f))))},{immediate:!0,flush:"post"}),c=()=>{u(),n()};return ne(c),c}let dt=!1;function ft(e,t,a={}){const{window:l=se,ignore:o=[],capture:r=!0,detectIframe:n=!1}=a;if(!l)return;Ve&&!dt&&(dt=!0,Array.from(l.document.body.children).forEach(v=>v.addEventListener("click",G)));let s=!0;const u=v=>o.some(i=>{if(typeof i=="string")return Array.from(l.document.querySelectorAll(i)).some(h=>h===v.target||v.composedPath().includes(h));{const h=V(i);return h&&(v.target===h||v.composedPath().includes(h))}}),d=[j(l,"click",v=>{const i=V(e);if(!(!i||i===v.target||v.composedPath().includes(i))){if(v.detail===0&&(s=!u(v)),!s){s=!0;return}t(v)}},{passive:!0,capture:r}),j(l,"pointerdown",v=>{const i=V(e);i&&(s=!v.composedPath().includes(i)&&!u(v))},{passive:!0}),n&&j(l,"blur",v=>{var i;const h=V(e);((i=l.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!(h!=null&&h.contains(l.document.activeElement))&&t(v)})].filter(Boolean);return()=>d.forEach(v=>v())}J.mounted+"",J.unmounted+"";const hl=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function vt(...e){let t,a,l={};e.length===3?(t=e[0],a=e[1],l=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,a=e[0],l=e[1]):(t=e[0],a=e[1]):(t=!0,a=e[0]);const{target:o=se,eventName:r="keydown",passive:n=!1}=l,s=hl(t);return j(o,r,c=>{s(c)&&a(c)},n)}var gl=Object.defineProperty,mt=Object.getOwnPropertySymbols,bl=Object.prototype.hasOwnProperty,_l=Object.prototype.propertyIsEnumerable,pt=(e,t,a)=>t in e?gl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,wl=(e,t)=>{for(var a in t||(t={}))bl.call(t,a)&&pt(e,a,t[a]);if(mt)for(var a of mt(t))_l.call(t,a)&&pt(e,a,t[a]);return e};J.mounted+"";const Ol=500;function yt(e,t,a){var l,o;const r=I(()=>V(e));let n;function s(){n&&(clearTimeout(n),n=void 0)}function u(d){var f,v,i,h;((f=a==null?void 0:a.modifiers)==null?void 0:f.self)&&d.target!==r.value||(s(),(v=a==null?void 0:a.modifiers)!=null&&v.prevent&&d.preventDefault(),(i=a==null?void 0:a.modifiers)!=null&&i.stop&&d.stopPropagation(),n=setTimeout(()=>t(d),(h=a==null?void 0:a.delay)!=null?h:Ol))}const c={capture:(l=a==null?void 0:a.modifiers)==null?void 0:l.capture,once:(o=a==null?void 0:a.modifiers)==null?void 0:o.once};j(r,"pointerdown",u,c),j(r,"pointerup",s,c),j(r,"pointerleave",s,c)}J.mounted+"";const je=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Fe="__vueuse_ssr_handlers__";je[Fe]=je[Fe]||{};je[Fe];function Mt(e,t=!1){const a=w(),l=()=>a.value=Boolean(e());return l(),Ya(l,t),a}function Sl(e,t={}){const a=t?t.delayEnter:0,l=t?t.delayLeave:0,o=w(!1);let r;const n=s=>{const u=s?a:l;r&&(clearTimeout(r),r=void 0),u?r=setTimeout(()=>o.value=s,u):o.value=s};return window&&(j(e,"mouseenter",()=>n(!0),{passive:!0}),j(e,"mouseleave",()=>n(!1),{passive:!0})),o}J.mounted+"";var ht=Object.getOwnPropertySymbols,$l=Object.prototype.hasOwnProperty,xl=Object.prototype.propertyIsEnumerable,Pl=(e,t)=>{var a={};for(var l in e)$l.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&ht)for(var l of ht(e))t.indexOf(l)<0&&xl.call(e,l)&&(a[l]=e[l]);return a};function Cl(e,t,a={}){const l=a,{window:o=se}=l,r=Pl(l,["window"]);let n;const s=Mt(()=>o&&"ResizeObserver"in o),u=()=>{n&&(n.disconnect(),n=void 0)},c=T(()=>V(e),f=>{u(),s.value&&o&&f&&(n=new ResizeObserver(t),n.observe(f,r))},{immediate:!0,flush:"post"}),d=()=>{u(),c()};return ne(d),{isSupported:s,stop:d}}function Nl(e,t={width:0,height:0},a={}){const{window:l=se,box:o="content-box"}=a,r=I(()=>{var u,c;return(c=(u=V(e))==null?void 0:u.namespaceURI)==null?void 0:c.includes("svg")}),n=w(t.width),s=w(t.height);return Cl(e,([u])=>{const c=o==="border-box"?u.borderBoxSize:o==="content-box"?u.contentBoxSize:u.devicePixelContentBoxSize;if(l&&r.value){const d=V(e);if(d){const f=l.getComputedStyle(d);n.value=parseFloat(f.width),s.value=parseFloat(f.height)}}else if(c){const d=Array.isArray(c)?c:[c];n.value=d.reduce((f,{inlineSize:v})=>f+v,0),s.value=d.reduce((f,{blockSize:v})=>f+v,0)}else n.value=u.contentRect.width,s.value=u.contentRect.height},a),T(()=>V(e),u=>{n.value=u?t.width:0,s.value=u?t.height:0}),{width:n,height:s}}J.mounted+"";function gt(e,{window:t=se,scrollTarget:a}={}){const l=w(!1),o=()=>{if(!t)return;const r=t.document,n=V(e);if(!n)l.value=!1;else{const s=n.getBoundingClientRect();l.value=s.top<=(t.innerHeight||r.documentElement.clientHeight)&&s.left<=(t.innerWidth||r.documentElement.clientWidth)&&s.bottom>=0&&s.right>=0}};return T(()=>V(e),()=>o(),{immediate:!0,flush:"post"}),t&&j(a||t,"scroll",o,{capture:!1,passive:!0}),l}J.mounted+"";const bt=1;function ze(e,t={}){const{throttle:a=0,idle:l=200,onStop:o=G,onScroll:r=G,offset:n={left:0,right:0,top:0,bottom:0},eventListenerOptions:s={capture:!1,passive:!0},behavior:u="auto"}=t,c=w(0),d=w(0),f=I({get(){return c.value},set(q){i(q,void 0)}}),v=I({get(){return d.value},set(q){i(void 0,q)}});function i(q,O){var D,x,L;const C=R(e);!C||(L=C instanceof Document?document.body:C)==null||L.scrollTo({top:(D=R(O))!=null?D:v.value,left:(x=R(q))!=null?x:f.value,behavior:R(u)})}const h=w(!1),S=be({left:!0,right:!1,top:!0,bottom:!1}),_=be({left:!1,right:!1,top:!1,bottom:!1}),E=q=>{!h.value||(h.value=!1,_.left=!1,_.right=!1,_.top=!1,_.bottom=!1,o(q))},M=za(E,a+l),A=q=>{const O=q.target===document?q.target.documentElement:q.target,D=O.scrollLeft;_.left=D<c.value,_.right=D>d.value,S.left=D<=0+(n.left||0),S.right=D+O.clientWidth>=O.scrollWidth-(n.right||0)-bt,c.value=D;let x=O.scrollTop;q.target===document&&!x&&(x=document.body.scrollTop),_.top=x<d.value,_.bottom=x>d.value,S.top=x<=0+(n.top||0),S.bottom=x+O.clientHeight>=O.scrollHeight-(n.bottom||0)-bt,d.value=x,h.value=!0,M(q),r(q)};return j(e,"scroll",a?Wa(A,a,!0,!1):A,s),j(e,"scrollend",E,s),{x:f,y:v,isScrolling:h,arrivedState:S,directions:_}}var Tl=Object.defineProperty,ql=Object.defineProperties,Dl=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,El=Object.prototype.hasOwnProperty,Il=Object.prototype.propertyIsEnumerable,wt=(e,t,a)=>t in e?Tl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ot=(e,t)=>{for(var a in t||(t={}))El.call(t,a)&&wt(e,a,t[a]);if(_t)for(var a of _t(t))Il.call(t,a)&&wt(e,a,t[a]);return e},Al=(e,t)=>ql(e,Dl(t));function St(e,t,a={}){var l,o;const r=(l=a.direction)!=null?l:"bottom",n=be(ze(e,Al(Ot({},a),{offset:Ot({[r]:(o=a.distance)!=null?o:0},a.offset)})));T(()=>n.arrivedState[r],async s=>{var u,c;if(s){const d=R(e),f={height:(u=d==null?void 0:d.scrollHeight)!=null?u:0,width:(c=d==null?void 0:d.scrollWidth)!=null?c:0};await t(n),a.preserveScrollPosition&&d&&Y(()=>{d.scrollTo({top:d.scrollHeight-f.height,left:d.scrollWidth-f.width})})}})}J.mounted+"";function $t(e,t,a={}){const{root:l,rootMargin:o="0px",threshold:r=.1,window:n=se}=a,s=Mt(()=>n&&"IntersectionObserver"in n);let u=G;const c=s.value?T(()=>({el:V(e),root:V(l)}),({el:f,root:v})=>{if(u(),!f)return;const i=new IntersectionObserver(t,{root:v,rootMargin:o,threshold:r});i.observe(f),u=()=>{i.disconnect(),u=G}},{immediate:!0,flush:"post"}):G,d=()=>{u(),c()};return ne(d),{isSupported:s,stop:d}}J.mounted+"";var kl=Object.defineProperty,Ml=Object.defineProperties,Ll=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Ql=Object.prototype.hasOwnProperty,Bl=Object.prototype.propertyIsEnumerable,Pt=(e,t,a)=>t in e?kl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Rl=(e,t)=>{for(var a in t||(t={}))Ql.call(t,a)&&Pt(e,a,t[a]);if(xt)for(var a of xt(t))Bl.call(t,a)&&Pt(e,a,t[a]);return e},Vl=(e,t)=>Ml(e,Ll(t));J.mounted+"";function Lt(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientHeight<e.scrollHeight||t.overflowY==="auto"&&e.clientWidth<e.scrollWidth)return!0;{const a=e.parentNode;return!a||a.tagName==="BODY"?!1:Lt(a)}}function Hl(e){const t=e||window.event,a=t.target;return Lt(a)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function Ul(e,t=!1){const a=w(t);let l=null,o;T(Ka(e),s=>{if(s){const u=s;o=u.style.overflow,a.value&&(u.style.overflow="hidden")}},{immediate:!0});const r=()=>{const s=R(e);!s||a.value||(Ve&&(l=j(s,"touchmove",u=>{Hl(u)},{passive:!1})),s.style.overflow="hidden",a.value=!0)},n=()=>{const s=R(e);!s||!a.value||(Ve&&(l==null||l()),s.style.overflow=o,a.value=!1)};return ne(n),I({get(){return a.value},set(s){s?r():n()}})}const jl=()=>{let e=!1;const t=w(!1);return(a,l)=>{if(t.value=l.value,e)return;e=!0;const o=Ul(a,l.value);T(t,r=>o.value=r)}};jl();var Fl=Object.defineProperty,zl=Object.defineProperties,Wl=Object.getOwnPropertyDescriptors,Ct=Object.getOwnPropertySymbols,Kl=Object.prototype.hasOwnProperty,Yl=Object.prototype.propertyIsEnumerable,Nt=(e,t,a)=>t in e?Fl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Xl=(e,t)=>{for(var a in t||(t={}))Kl.call(t,a)&&Nt(e,a,t[a]);if(Ct)for(var a of Ct(t))Yl.call(t,a)&&Nt(e,a,t[a]);return e},Gl=(e,t)=>zl(e,Wl(t));const Qt=fa({name:"UseTimeAgo",props:["time","updateInterval","max","fullDateFormatter","messages","showSecond"],setup(e,{slots:t}){const a=be(cl(()=>e.time,Gl(Xl({},e),{controls:!0})));return()=>{if(t.default)return t.default(a)}}}),Zl={class:"q-pa-md row justify-center"},Jl={class:"row justify-center q-my-md"},eo={key:0},to={__name:"chatLog",props:{conversation:{type:Object,default:()=>({})}},setup(e){const t=e,a=Dt(),{getMessageNotification:l}=Me(a),o=w(null),r=w([]),n=w(20),s=f=>{const v=[...r.value,...f].sort((S,_)=>new Date(S.createdAt)-new Date(_.createdAt)),i=[],h=new Map;for(const S of v)h.has(S.id)||(h.set(S.id,!0),i.push(S));t.conversation.id==="new"?r.value=[]:r.value=i},u=(f,v)=>te.getMessages({filters:{conversation:{id:f}},populate:{createdByUser:!0,contact:!0,conversation:{filters:{id:f}}},sort:"createdAt:desc",pagination:{page:v,pageSize:n.value}}).then(i=>{const h=i.data.length===0||i.data.length<n.value;return(!h||i.data.length>0)&&s(i.data),h}),c=async(f,v)=>{t.conversation.id==="new"||t.conversation.id==="placeHolder"||t.conversation.id==="no"?v(!0):u(t.conversation.id,f).then(i=>{v(i)})};T(()=>t.conversation,async(f,v)=>{f.id!==v.id&&(r.value=[])}),T(l,()=>{l.value.conversation&&l.value.conversation.id===t.conversation.id&&(s([l.value]),l.value.direction==="inbound"&&te.readConversation(t.conversation.id),Y(()=>{const f=document.querySelector("#conversation-layout div.scroll");f.scrollTop=f.scrollHeight}))});const d=f=>Et(f).format("L LT");return(f,v)=>(P(),X("div",Zl,[(P(),k(Ra,{style:{width:"100%"},reverse:"",onLoad:c,ref_key:"messageScroll",ref:o,key:e.conversation.id},{loading:g(()=>[_e("div",Jl,[b(va,{color:"primary",name:"dots",size:"40px"})])]),default:g(()=>[(P(!0),X(Le,null,Qe(r.value,(i,h)=>(P(),X("div",{key:h},[b(Ba,{sent:i.direction==="outbound-api",name:i.direction==="inbound"?h>0&&r.value[h-1].direction==="inbound"&&r.value[h-1].conversation.name===r.value[h].conversation.name?"":e.conversation.name:i.createdByUser?i.createdByUser.firstName?h>0&&r.value[h-1].direction==="outbound-api"&&r.value[h-1].createdByUser&&`${r.value[h-1].createdByUser.firstName||""} ${r.value[h-1].createdByUser.lastName||""}`==`${i.createdByUser.firstName} ${i.createdByUser.lastName}`?"":`${i.createdByUser.firstName} ${i.createdByUser.lastName}`:h>0&&r.value[h-1].direction==="outbound-api"&&`${r.value[h-1].createdByUser&&r.value[h-1].createdByUser.username||""}`==`${i.createdByUser.username||""}`?"":`${i.createdByUser.username||""}`:"System Admin","text-color":i.direction==="outbound-api"?"white":"","bg-color":i.direction==="outbound-api"?"primary":"amber"},{stamp:g(()=>[b(K(Qt),{time:i.createdAt,max:18e5,fullDateFormatter:d},{default:g(({timeAgo:S})=>[F(W(S),1)]),_:2},1032,["time"])]),avatar:g(()=>[b(Be,{class:ge(["q-message-avatar",{"q-message-avatar--sent":i.direction==="outbound-api","q-message-avatar--received":i.direction==="inbound"}]),color:i.direction==="outbound-api"?"primary":"amber"},{default:g(()=>[b(Re,{name:"person"})]),_:2},1032,["class","color"])]),default:g(()=>[_e("div",null,[F(W(i.body)+" ",1),i.numMedia>0?(P(),X("div",eo,[(P(!0),X(Le,null,Qe(i.mediaUrl,(S,_)=>(P(),k(Ta,{src:S,fit:"contain","spinner-color":"white",style:{height:"150px","max-width":"300px",width:"100%"},key:_},null,8,["src"]))),128))])):U("",!0)])]),_:2},1032,["sent","name","text-color","bg-color"])]))),128))]),_:1}))]))}},ao={class:"q-pa-md",style:{height:"92vh"}},lo={key:0,class:"text-caption"},oo={key:0},ro={class:"text-center q-my-md"},no={key:1,class:"q-pa-md row justify-center text-h5"},so={class:"text-h6"},uo={key:0,class:"text-caption"},Ro={__name:"index",setup(e){Na();const t=ma(),a=pa(),l=Dt(),o=qa(),{userOffices:r}=Me(o),{fetchConversations:n,setConversation:s,setSelectedOffice:u}=l,{getConversations:c,getConversationsAlt:d,getConversationsMeta:f,getUnReadCount:v,getSelectedOffice:i}=Me(l),{t:h}=Ia(),S=w(null),_=w(null),E=w(null),M=w(50),A=w(null),q=w(!1),O=w(""),D=w(""),x=w(""),L=w(10),C=w(!1);w([{value:!0,label:"UnRead",slot:"one"},{value:!1,label:"All",slot:"two"}]);const Se=w(!0),H=w(0),ue=w(!1),Bt=w({right:"4px",borderRadius:"5px",backgroundColor:"#8A2A2B",width:"5px",opacity:.75}),Rt=w({right:"2px",borderRadius:"9px",backgroundColor:"#8A2A2B",width:"9px",opacity:.2}),Vt=I(()=>{const m=new RegExp("^[0-9]{"+L.value+"}","g");return Ea().matches(m,{excludeEmptyString:!0,message:`${h("validPhoneIsRequired")}`}).nullable()}),{errorMessage:$e,value:ee}=Aa("phone",Vt);w([]);const Ht={background:"#D3D3D3"},Q=w(!1),ie=async m=>{if(m===!0&&H.value===0)H.value+=1,n(H.value,M.value,!0,!1).then(()=>{c.value(C.value).length>=f.value.pagination.total&&(ue.value=!0),Q.value=!1});else if(!Q.value&&!xe.value){Q.value=!0;let p=!1;H.value===0&&(p=!0,de()),C.value===!0?v.value===c.value(C.value).length?(Q.value=!1,ue.value=!0):(H.value+=1,n(H.value,M.value,p,!1).then(y=>{v.value!==c.value(C.value).length&&(c.value(C.value).length>=M.value?(c.value(C.value).length>=f.value.pagination.total&&(ue.value=!0),Q.value=!1):setTimeout(function(){ie()},1e3)),c.value(C.value).length>=f.value.pagination.total&&(ue.value=!0),Q.value=!1})):c.value(C.value).length>=f.value.pagination.total?(ue.value=!0,Q.value=!1):(H.value+=1,n(H.value,M.value,p,!1).then(y=>{c.value(C.value).length>=f.value.pagination.total&&(ue.value=!0),Q.value=!1}))}},ce=w(!0),Ye=w(null),xe=w(!1),me=w(""),$=w(null),Ut=async m=>{await te.unReadConversation(m.id),de()},Xe=m=>{de(),$.value=m,O.value=m.name,D.value=m.contacts?m.contacts[0].firstName:"",x.value=m.contacts?m.contacts[0].lastName:"",ee.value="",S.value=null,_.value=null,E.value=null,m.unread&&(te.readConversation(m.id),m.unread=!1)};Ke(()=>{H.value=0,ie(!0)}),T(i,(m,p)=>{de(),A.value.setScrollPosition("vertical",0,100),C.value=!1,Se.value=!0,H.value=0,Y(()=>{ie()})}),T(C,(m,p)=>{A.value.setScrollPosition("vertical",0,100),m===!0&&(de(),v.value!==c.value(C.value).length&&ie())});const jt=m=>{m.verticalPercentage>.95&&(Q.value||ie())},pe=async()=>{const m={data:{phoneNumber:ee.value,type:"phoneNumber",..._.value&&{firstName:_.value},...E.value&&{lastName:E.value}}},p=await te.createContact(m),y={...p.data};if(delete y.conversations,p.data.valid===!0&&i.value&&i.value[48]&&p.data.conversations.length>0){const B=p.data.conversations.find(Z=>Z.twilio_messaging_service.sid===i.value[48]);if(B)B.contacts=[y],Xe(B);else{const Z=new Date;let ye=`${p.data.firstName} ${p.data.lastName}`;p.data.firstName||(ye=p.data.nationalFormat),$.value={id:"placeHolder",createdAt:Z,lastMessage:{},lastMessageDateTime:Z,contacts:[y],name:ye,readBy:[],twilioEnabled:!0,twilio_messaging_service:{sid:i.value[48]},type:"Direct",unread:!1,updatedAt:Z},ee.value="",S.value=null,_.value=null,E.value=null}}else if(p.data.valid===!0&&i.value&&i.value[48]){const B=new Date;let Z=`${p.data.firstName} ${p.data.lastName}`;p.data.firstName||(Z=p.data.nationalFormat),$.value={id:"placeHolder",createdAt:B,lastMessage:{},lastMessageDateTime:B,contacts:[y],name:Z,readBy:[],twilioEnabled:!0,twilio_messaging_service:{sid:i.value[48]},type:"Direct",unread:!1,updatedAt:B},ee.value="",S.value=""}},Pe=()=>{const m=new Date;$.value={id:"new",createdAt:m,lastMessage:{},lastMessageDateTime:m,name:"",readBy:[],twilioEnabled:!0,twilio_messaging_service:{},type:"Direct",unread:!1,archive:!1,updatedAt:m},Ye.value===!1&&ce.value===!0&&(ce.value=!1),Y(()=>{document.querySelector("#phoneNumber").focus()})},de=async()=>{const m=new Date;return $.value={id:"no",createdAt:m,lastMessage:{},lastMessageDateTime:m,name:"Select a conversation",readBy:[],twilioEnabled:!0,twilio_messaging_service:{},type:"Direct",unread:!1,archive:!1,updatedAt:m},!0},Ft=m=>{m.contacts[0].valid===!0&&m.twilio_messaging_service?te.sendMessage({data:{body:me.value,to:m.contacts[0].phoneNumber,messagingServiceSid:m.twilio_messaging_service.sid,direction:"outbound-api",twilioMessage:!0}}).then(()=>{me.value="",m.id==="placeHolder"?(A.value.setScrollPosition("vertical",0,100),H.value=0,ie(!0)):m.archive===!0&&Ne(!1)}):console.log("not valid phone number")},Ce=async()=>{const m=`${D.value} ${x.value}`,p={data:{name:m}},y={data:{firstName:D.value,lastName:x.value}};if($.value){$.value.name=m;const B=te.updateContact($.value.contacts[0].id,y),Z=te.updateConversation($.value.id,p),ye=await B,Te=await Z;return Te.data.contacts=[ye.data],s({data:Te.data}),Te}},Ne=async m=>{const p={data:{archive:m}};if($.value){$.value.archive=m;const B=await te.updateConversation($.value.id,p);return m===!0?(Q.value=!0,await de(),n(1,M.value,!0,!1).then(()=>{Q.value=!1})):(Q.value=!0,n(1,M.value,!0,!1).then(()=>{Q.value=!1})),B}},zt=m=>{L.value=m},Wt=m=>{xe.value=!0,Ye.value=m,setTimeout(()=>{xe.value=!1},1e3)};if(t.query.phoneNumber||t.query.office_id){t.query.office_id&&Y(()=>{const p=r.value("read").find(y=>Number(y[8])===Number(t.query.office_id));p&&u(p,!0)}),t.query.firstName&&(_.value=t.query.firstName),t.query.lastName&&(E.value=t.query.lastName),t.query.phoneNumber&&(S.value=t.query.phoneNumber.replace(/\D+/g,""),Pe(),ee.value=S.value.substr(S.value.length-10),Y(()=>{pe()}));const m=Object.assign({},t.query);delete m.phoneNumber,delete m.office_id,delete m.firstName,delete m.lastName,a.replace({query:m})}T(()=>t.query,()=>{if(t.query.phoneNumber||t.query.office_id){t.query.office_id&&Y(()=>{const p=r.value("read").find(y=>Number(y[8])===Number(t.query.office_id));p&&u(p,!0)}),t.query.firstName&&(_.value=t.query.firstName),t.query.lastName&&(E.value=t.query.lastName),t.query.phoneNumber&&(S.value=t.query.phoneNumber.replace(/\D+/g,""),Pe(),ee.value=S.value.substr(S.value.length-10),Y(()=>{pe()}));const m=Object.assign({},t.query);delete m.phoneNumber,delete m.office_id,delete m.firstName,delete m.lastName,a.replace({query:m})}});const Kt=m=>Et(m).format("L LT");return(m,p)=>(P(),X("div",ao,[b(Ze,{flat:""}),b(Pa,{view:"lHh Lpr lFf",container:"",style:{height:"100%"},class:"shadow-2 rounded-borders bg-grey-3",id:"conversation-layout"},{default:g(()=>[$.value?(P(),k(ga,{key:0,bordered:"",class:"bg-white text-black",style:{height:"57px"}},{default:g(()=>[b(_a,null,{default:g(()=>[b(ae,{dense:"",flat:"",round:"",icon:"menu",onClick:p[0]||(p[0]=y=>ce.value=!ce.value)}),!$.value||$.value.id==="new"?(P(),k(at,{key:0},{default:g(()=>[b(Da,{for:"phoneNumber",modelValue:K(ee),"onUpdate:modelValue":p[1]||(p[1]=y=>qt(ee)?ee.value=y:null),label:m.$t("phoneNumber"),tabindex:"0",onMaxLengthChanged:zt,style:Je(K($e)?"padding-bottom: 20px; max-width: 250px;":"padding-bottom: 0px; max-width: 250px;"),error:!!K($e),"error-message":K($e),readonly:!1,editIcon:!1,onAddClicked:pe,onKeyup:Ie(pe,["enter"])},null,8,["modelValue","label","style","error","error-message","onKeyup"])]),_:1})):(P(),k(at,{key:1},{default:g(()=>[F(W($.value.name)+" ",1),$.value.contacts&&$.value.contacts[0]?(P(),X("span",lo,W($.value.contacts[0].nationalFormat),1)):U("",!0),$.value.contacts&&$.value.contacts[0]?(P(),k(ae,{key:1,color:"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:p[2]||(p[2]=y=>q.value=!0)})):U("",!0)]),_:1})),b(ae,{dense:"",flat:"",round:"",icon:"more_vert"},{default:g(()=>[b(ba,null,{default:g(()=>[$.value.contacts&&$.value.contacts[0]?(P(),k(ke,{key:0,style:{"min-width":"100px"}},{default:g(()=>[le((P(),k(oe,{clickable:""},{default:g(()=>[b(z,{onClick:p[3]||(p[3]=y=>q.value=!0)},{default:g(()=>[F("Edit")]),_:1})]),_:1})),[[fe]]),$.value.unread===!1?le((P(),k(oe,{key:0,clickable:""},{default:g(()=>[b(z,{onClick:p[4]||(p[4]=y=>Ut($.value))},{default:g(()=>[F("Mark Un-Read")]),_:1})]),_:1})),[[fe]]):U("",!0),le((P(),k(oe,{clickable:""},{default:g(()=>[$.value.archive===!1?(P(),k(z,{key:0,onClick:p[5]||(p[5]=y=>Ne(!0))},{default:g(()=>[F("Archive")]),_:1})):U("",!0),$.value.archive===!0?(P(),k(z,{key:1,onClick:p[6]||(p[6]=y=>Ne(!1))},{default:g(()=>[F("Unarchive")]),_:1})):U("",!0)]),_:1})),[[fe]])]),_:1})):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):U("",!0),b(Sa,{"show-if-above":"",modelValue:ce.value,"onUpdate:modelValue":p[10]||(p[10]=y=>ce.value=y),side:"left",width:350,bordered:"",onOnLayout:Wt,style:{height:"calc(100% - 200px)","margin-top":"185px","border-right":"1px solid #ddd"}},{default:g(()=>[b(ke,{separator:"",class:"absolute-top"},{default:g(()=>[K(i)?le((P(),k(oe,{key:0,clickable:"",onClick:p[7]||(p[7]=y=>Pe())},{default:g(()=>[b(z,{avatar:"",top:""},{default:g(()=>[b(Be,{icon:"add",color:"grey","text-color":"white"})]),_:1}),b(z,null,{default:g(()=>[F("New Message")]),_:1})]),_:1})),[[et]]):U("",!0),b(oe,null,{default:g(()=>[b(z,null,{default:g(()=>[b(ka,{styleSelection:!0,twilio:!0})]),_:1})]),_:1}),b(oe,null,{default:g(()=>[b(z,null,{default:g(()=>[b(Oa,{rounded:"",spread:""},{default:g(()=>[b(ae,{rounded:"",color:C.value===!0?"primary":"","text-color":C.value===!1?"black":"white",label:"UnRead",onClick:p[8]||(p[8]=y=>C.value=!0)},{default:g(()=>[b(wa,{color:"accent",floating:""},{default:g(()=>[F(W(K(v)),1)]),_:1})]),_:1},8,["color","text-color"]),b(ae,{rounded:"",color:C.value===!1?"primary":"","text-color":C.value===!0?"black":"white",label:"All",split:"",onClick:p[9]||(p[9]=y=>C.value=!1)},null,8,["color","text-color"])]),_:1})]),_:1})]),_:1})]),_:1}),b($a,{id:"scroll-id",style:{height:"85% !important",overflow:"auto"},"thumb-style":Bt.value,"bar-style":Rt.value,ref_key:"scrollTargetRef",ref:A,onScroll:jt},{default:g(()=>[b(ke,{bordered:"",style:{width:"350px"}},{loading:g(()=>[_e("div",ro,[b(La,{color:"primary",size:"40px"})])]),default:g(()=>[(P(!0),X(Le,null,Qe(K(c)(C.value),y=>le((P(),k(oe,{key:y.id,clickable:"",onClick:B=>Xe(y),style:Je($.value&&$.value.id===y.id?Ht:null)},{default:g(()=>[b(z,{avatar:""},{default:g(()=>[b(Be,{color:"primary","text-color":"white"},{default:g(()=>[y.letter?(P(),X("span",oo,W(y.letter),1)):(P(),k(Re,{key:1,name:"person"}))]),_:2},1024)]),_:2},1024),b(z,null,{default:g(()=>[b(lt,{lines:"1",class:ge({"text-bold":y.unread})},{default:g(()=>[F(W(y.name),1)]),_:2},1032,["class"]),b(lt,{caption:"",lines:"2",class:ge({"text-bold":y.unread,"text-black":y.unread})},{default:g(()=>[y.lastMessage&&y.lastMessage.body?(P(),k(Re,{key:0,size:"xs",name:y.lastMessage.direction==="inbound"?"call_received":"call_made",color:y.lastMessage.direction==="inbound"?"green":"red"},null,8,["name","color"])):U("",!0),F(" "+W(y.lastMessage&&y.lastMessage.body),1)]),_:2},1032,["class"])]),_:2},1024),b(z,{side:"",top:"",class:ge({"text-bold":y.unread,"text-black":y.unread})},{default:g(()=>[y.lastMessageDateTime?(P(),k(K(Qt),{key:0,time:new Date(y.lastMessageDateTime),max:18e5,fullDateFormatter:Kt},{default:g(({timeAgo:B})=>[F(W(B),1)]),_:2},1032,["time"])):U("",!0)]),_:2},1032,["class"])]),_:2},1032,["onClick","style"])),[[et]])),128))]),_:1})]),_:1},8,["thumb-style","bar-style"])]),_:1},8,["modelValue"]),b(xa,null,{default:g(()=>[$.value?(P(),k(to,{key:0,conversation:$.value},null,8,["conversation"])):(P(),X("div",no,"Select a conversation"))]),_:1}),b(ya,{modelValue:q.value,"onUpdate:modelValue":p[13]||(p[13]=y=>q.value=y),persistent:""},{default:g(()=>[b(Ze,{style:{"min-width":"350px"}},{default:g(()=>[b(tt,null,{default:g(()=>[_e("div",so,W(O.value),1),$.value.contacts&&$.value.contacts[0]?(P(),X("span",uo,W($.value.contacts[0].nationalFormat),1)):U("",!0)]),_:1}),b(tt,{class:"q-pt-none"},{default:g(()=>[b(Ae,{modelValue:D.value,"onUpdate:modelValue":p[11]||(p[11]=y=>D.value=y),label:"First Name",autofocus:"",onKeyup:Ie(Ce,["enter"])},null,8,["modelValue","onKeyup"]),b(Ae,{modelValue:x.value,"onUpdate:modelValue":p[12]||(p[12]=y=>x.value=y),label:"Last Name",autofocus:"",onKeyup:Ie(Ce,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),b(ha,{align:"right",class:"text-primary"},{default:g(()=>[le(b(ae,{flat:"",label:"Cancel"},null,512),[[fe]]),le(b(ae,{flat:"",label:"Update",onClick:Ce},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),$.value&&$.value.id!=="no"?(P(),k(Qa,{key:1,class:"bg-white"},{default:g(()=>[b(Ae,{autogrow:"",modelValue:me.value,"onUpdate:modelValue":p[15]||(p[15]=y=>me.value=y),placeholder:"Type a message",rounded:"",dense:"",standout:"",class:"q-py-sm",disable:$.value.id==="new"},{after:g(()=>[b(ae,{round:"",dense:"",flat:"",icon:"send",onClick:p[14]||(p[14]=y=>Ft($.value)),disabled:!$.value||$.value.id==="new"},null,8,["disabled"])]),_:1},8,["modelValue","disable"])]),_:1})):U("",!0)]),_:1})]))}};export{Ro as default};
