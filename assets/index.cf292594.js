import{bW as Ae,r as k,c as I,d2 as Ye,aP as xe,cu as Me,h as F,g as Se,bV as w,a4 as $e,bS as De,y as A,z as j,d as l,bq as n,B as y,C as ie,cT as U,D as ue,a7 as S,cU as R,aw as C,ab as q,ap as E,cV as L,bN as ce,bR as je,F as de,b3 as me,bQ as Ve,bO as fe,bP as qe,cW as ae,cz as le,df as Re,bs as Pe,_ as Qe,bU as ve,b4 as pe}from"./index.b35eeed3.js";import{Q as ge,a as Ie}from"./QSelect.2ba35ed2.js";import{Q as Oe}from"./QPage.6f4063c4.js";import{u as he}from"./use-quasar.6afddd70.js";import{g as ye,c as Te,u as ze,i as be,q as V}from"./app.31ce29fc.js";import{dayjs as c}from"./dayjs.c324749c.js";import{u as Ne}from"./dataStore.8a651aea.js";import{Q as z}from"./QTooltip.42ac2309.js";import{Q as Be}from"./QMenu.fc0510b6.js";import{Q as Fe}from"./QList.5b498127.js";import{Q as Ue}from"./QTd.a7c86421.js";import{Q as Ee}from"./QTr.47ac074f.js";import{Q as Le}from"./QInnerLoading.832dc14e.js";import{Q as He}from"./QTable.c08ed117.js";import{C as We}from"./ClosePopup.76a79f1e.js";import"./arrivalDate.1c4dc03b.js";import{u as Xe}from"./index.2d1de515.js";import{_ as Je}from"./projectSelector.ce90f94e.js";import"./QChip.86c715a9.js";import"./rtl.b51694b1.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.504e0e11.js";import"./index.04bc0a32.js";import"./i18n.a721d321.js";import"./position-engine.301e00c6.js";import"./selection.423f1a2d.js";import"./QMarkupTable.39675ceb.js";import"./use-fullscreen.36eb3617.js";import"./QForm.6c8993a8.js";import"./vee-validate.esm.0c700e69.js";import"./array.164cfe36.js";import"./useQuerySaver.d29ff9ee.js";function H(o,i=new WeakMap){if(Object(o)!==o)return o;if(i.has(o))return i.get(o);const m=o instanceof Date?new Date(o):o instanceof RegExp?new RegExp(o.source,o.flags):o instanceof Set?new Set:o instanceof Map?new Map:typeof o.constructor!="function"?Object.create(null):o.prototype!==void 0&&typeof o.prototype.constructor=="function"?o:new o.constructor;if(typeof o.constructor=="function"&&typeof o.valueOf=="function"){const r=o.valueOf();if(Object(r)!==r){const D=new o.constructor(r);return i.set(o,D),D}}return i.set(o,m),o instanceof Set?o.forEach(r=>{m.add(H(r,i))}):o instanceof Map&&o.forEach((r,D)=>{m.set(D,H(r,i))}),Object.assign(m,...Object.keys(o).map(r=>({[r]:H(o[r],i)})))}var we=Ae({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(o,{slots:i,emit:m}){const{proxy:r}=Se(),{$q:D}=r,v=k(null),h=k(""),d=k("");let p=!1;const M=I(()=>Ye({initialValue:h.value,validate:o.validate,set:_,cancel:Y,updatePosition:x},"value",()=>d.value,g=>{d.value=g}));function _(){o.validate(d.value)!==!1&&(f()===!0&&(m("save",d.value,h.value),m("update:modelValue",d.value)),$())}function Y(){f()===!0&&m("cancel",d.value,h.value),$()}function x(){xe(()=>{v.value.updatePosition()})}function f(){return Me(d.value,h.value)===!1}function $(){p=!0,v.value.hide()}function O(){p=!1,h.value=H(o.modelValue),d.value=H(o.modelValue),m("beforeShow")}function N(){m("show")}function B(){p===!1&&f()===!0&&(o.autoSave===!0&&o.validate(d.value)===!0?(m("save",d.value,h.value),m("update:modelValue",d.value)):m("cancel",d.value,h.value)),m("beforeHide")}function T(){m("hide")}function P(){const g=i.default!==void 0?[].concat(i.default(M.value)):[];return o.title&&g.unshift(F("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},o.title)),o.buttons===!0&&g.push(F("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[F(w,{flat:!0,color:o.color,label:o.labelCancel||D.lang.label.cancel,onClick:Y}),F(w,{flat:!0,color:o.color,label:o.labelSet||D.lang.label.set,onClick:_})])),g}return Object.assign(r,{set:_,cancel:Y,show(g){v.value!==null&&v.value.show(g)},hide(g){v.value!==null&&v.value.hide(g)},updatePosition:x}),()=>{if(o.disable!==!0)return F(Be,{ref:v,class:"q-popup-edit",cover:o.cover,onBeforeShow:O,onShow:N,onBeforeHide:B,onHide:T,onEscapeKey:Y},P)}}});const Ke={class:"q-px-sm"},Ge={key:0,class:"float-right q-card__actions--horiz"},Ze={key:1,class:"float-right q-card__actions--horiz"},et={key:0},tt={key:1},at={key:2,class:"text-caption"},lt={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},ot=y("div",{class:"text-h6"},"Arrival Date",-1),nt=y("span",{class:"q-ml-sm"},"Release as No Show!",-1),st=y("div",{class:"text-h6"},"Has not arrived.",-1),rt=y("br",null,null,-1),it={__name:"markArrivals",props:{rows:Array,selected:Array,filter:String},emits:["arrivalMarked","updateArrival","arrivalRelease"],setup(o,{emit:i}){const m=o,{rows:r,selected:D}=$e(m),v=he();De();const{can:h}=Xe(),d=k(c().format("YYYY-MM-DD")),p=k(c().subtract(3,"months").format("YYYY-MM-DD")),M=k(!1),_=k(!1),Y=k(!1),x=k(!1),f=k(null),$=k(0),O=I(()=>v.screen.gt.sm?[{name:207,label:"Arrival Date",align:"left",field:219,format:e=>`${e&&e.$d&&e.$d.format?e.$d.format("MM/DD/YYYY"):""}`,sortable:!0,style:"text-align: center !important;"},{name:7,label:"Expected Date",align:"left",field:e=>e[33].$d,format:e=>`${e?ye.formatDate(new Date(e),"MM/DD/YYYY"):"N/A"}`,sortable:!0},{name:1,label:"Name",align:"left",field:e=>e[31],format:e=>`${e}`,sortable:!0},{name:9,label:"Phone #",align:"left",field:e=>e[42],format:e=>`${e}`,sortable:!1},{name:2,label:"Workday ID",align:"left",field:e=>e[152],format:(e,a)=>a[20]==="In Process"?"W---------":e,sortable:!0},{name:3,label:"Project",align:"left",field:e=>e[167],format:e=>`${e}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e[45],format:e=>`${e}`,sortable:!0},{name:5,label:"Job Number",align:"left",field:e=>e[85],format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:6,label:"Site Contact",align:"left",field:e=>e[186],format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0}]:[{name:227,label:"Arrival Date",align:"left",field:219,format:e=>`${e&&e.$d&&e.$d.format?e.$d.format("MM/DD/YYYY"):""}`,sortable:!0},{name:7,label:"Expected Date",align:"left",field:e=>e[33].$d,format:e=>`${e?ye.formatDate(new Date(e),"MM/DD/YYYY"):"N/A"}`,sortable:!0},{name:1,label:"Name",align:"left",field:e=>e[31],format:e=>`${e}`,sortable:!0},{name:9,label:"Phone #",align:"left",field:e=>e[42],format:e=>`${e}`,sortable:!1},{name:2,label:"Workday ID",align:"left",field:e=>e[152],format:(e,a)=>a[20]==="In Process"?"W---------":e,sortable:!0},{name:3,label:"Project",align:"left",field:e=>e[167],format:e=>`${e}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e[45],format:e=>`${e}`,sortable:!0},{name:5,label:"Job Number",align:"left",field:e=>e[85],format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:6,label:"Site Contact",align:"left",field:e=>e[186],format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0}]),N=I(()=>v.screen.gt.sm?[h("create","projectArrivals")?207:[],7,1,9,2,3,4,5,6]:[h("create","projectArrivals")?207:[],7,1,9,2,3,4,5,6]),B=({rows:e,added:a,evt:t})=>{M.value=!0,i("arrivalMarked",{record:e[0],added:a}),setTimeout(function(){M.value=!1},1500)},T=e=>{M.value=!0,i("arrivalMarked",{record:f.value,added:e}),e?_.value=!1:x.value=!1,setTimeout(function(){M.value=!1},1500)},P=e=>{f.value=e,f.value[227]=d.value,_.value=!0},g=()=>{f.value=null,_.value=!1},Q=e=>{f.value=e,x.value=!0},W=()=>{f.value=null,x.value=!1},X=e=>{f.value=e,Y.value=!0},ee=()=>{i("arrivalRelease",{record:f.value,added:!0})},J=e=>{e.target.showPicker()},K=async(e,a)=>{a[219]=c(e),$.value+=1,i("updateArrivalDate",{record:a,value:e})};return(e,a)=>(A(),j("div",Ke,[l(He,{dense:"",columns:O.value,rows:S(r),"row-key":t=>t[3],class:"q-pa-sm",filter:o.filter?o.filter.trim():null,pagination:{rowsPerPage:S(v).screen.gt.sm?25:100},separator:"vertical",onSelection:B,selected:S(D),"table-header-class":"bg-dark text-white","no-data-label":"There are no expected arrivals",loading:M.value,"visible-columns":N.value,grid:S(v).screen.lt.sm},{item:n(t=>[y("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:ie(t.selected?"transform: scale(0.95);":"")},[l(U,{bordered:"",flat:"",class:ue(t.selected?S(v).dark.isActive?"bg-grey-9":"bg-grey-2":"")},{default:n(()=>[l(R,null,{default:n(()=>[C(q(t.row[31])+" ",1),t.row[20]!=="Complete"||!t.row[207]?(A(),j("span",Ge,[l(w,{round:"",color:"positive",icon:"done",size:"xs",onClick:s=>P(t.row)},{default:n(()=>[l(z,{class:"bg-primary"},{default:n(()=>[C("Arrived")]),_:1})]),_:2},1032,["onClick"]),l(w,{round:"",color:"negative",icon:"close",size:"xs",onClick:s=>X(t.row)},{default:n(()=>[l(z,{class:"bg-primary"},{default:n(()=>[C("No Show")]),_:1})]),_:2},1032,["onClick"])])):(A(),j("span",Ze,[C(q(S(c)(t.row[219]).format("MM/DD/YYYY"))+" ",1),l(w,{icon:"edit",color:"accent",flat:"",size:"xs",class:"q-px-none q-pr-xs"}),(A(),E(we,{key:$.value,"model-value":S(c)(t.row[219]).format("YYYY-MM-DD"),title:"Arrival Date"},{default:n(s=>[l(L,{autofocus:"",onFocus:a[0]||(a[0]=u=>J(u)),dense:"","model-value":s.value,type:"date",max:d.value,min:p.value,rules:[u=>!!u||"Field is required"],"onUpdate:modelValue":u=>K(u,t.row)},null,8,["model-value","max","min","rules","onUpdate:modelValue"])]),_:2},1032,["model-value"])),l(w,{round:"",color:"white",icon:"history",size:"xs",onClick:ce(s=>Q(t.row),["stop"])},{default:n(()=>[l(z,{class:"bg-primary"},{default:n(()=>[C("Revert Back - Has not arrived yet.")]),_:1})]),_:2},1032,["onClick"])]))]),_:2},1024),l(je),l(Fe,{dense:""},{default:n(()=>[(A(!0),j(de,null,me(t.cols.filter(s=>s.name!=="action"),s=>(A(),E(Ve,{key:s.name},{default:n(()=>[l(fe,null,{default:n(()=>[l(ge,null,{default:n(()=>[C(q(s.label),1)]),_:2},1024)]),_:2},1024),l(fe,{side:""},{default:n(()=>[l(ge,{caption:""},{default:n(()=>[C(q(s.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class"])],4)]),body:n(t=>[l(Ee,{"no-hover":"",props:t,class:ue(t.row[33]&&t.row[33].$d&&e.$dayjs().businessDiff(e.$dayjs(t.row[33].$d),"day",!0)>5&&t.row[20]!=="Complete"?"bg-red-11":"")},{default:n(()=>[(A(!0),j(de,null,me(t.cols,s=>(A(),E(Ue,{key:s.name,props:t,classes:s.name===207&&t.row[20]!=="Complete"||!t.row[207]?"q-card__actions--horiz":"",style:ie(s.style)},{default:n(()=>[s.name===207&&(t.row[20]!=="Complete"||!t.row[207])?(A(),j("span",et,[l(w,{round:"",color:"positive",icon:"done",size:"xs",onClick:u=>P(t.row)},{default:n(()=>[l(z,{class:"bg-primary"},{default:n(()=>[C("Arrived")]),_:1})]),_:2},1032,["onClick"]),l(w,{round:"",color:"negative",icon:"close",size:"xs",onClick:u=>X(t.row)},{default:n(()=>[l(z,{class:"bg-primary"},{default:n(()=>[C("No Show")]),_:1})]),_:2},1032,["onClick"])])):s.name===207?(A(),j("span",tt,[C(q(S(c)(t.row[219]).format("MM/DD/YYYY"))+" ",1),(A(),E(we,{key:$.value,"model-value":S(c)(t.row[219]).format("YYYY-MM-DD"),title:"Arrival Date"},{default:n(u=>[l(L,{autofocus:"",onFocus:a[1]||(a[1]=b=>J(b)),dense:"","model-value":u.value,type:"date",max:d.value,min:p.value,rules:[b=>!!b||"Field is required"],"onUpdate:modelValue":b=>K(b,t.row)},null,8,["model-value","max","min","rules","onUpdate:modelValue"])]),_:2},1032,["model-value"])),l(w,{round:"",color:"negative",icon:"history",size:"xs",onClick:ce(u=>Q(t.row),["stop"])},{default:n(()=>[l(z,{class:"bg-primary"},{default:n(()=>[C("Revert Back - Has not arrived yet.")]),_:1})]),_:2},1032,["onClick"])])):(A(),j("span",at,q(s.value),1))]),_:2},1032,["props","classes","style"]))),128))]),_:2},1032,["props","class"])]),"no-data":n(({message:t})=>[y("div",lt,[l(qe,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),y("span",null,q(t),1)])]),loading:n(()=>[l(Le,{showing:"",color:"primary"})]),_:1},8,["columns","rows","row-key","filter","pagination","selected","loading","visible-columns","grid"]),l(le,{modelValue:_.value,"onUpdate:modelValue":a[5]||(a[5]=t=>_.value=t),persistent:""},{default:n(()=>[l(U,{style:{"min-width":"350px"}},{default:n(()=>[l(R,null,{default:n(()=>[ot]),_:1}),l(R,{class:"q-pt-none"},{default:n(()=>[l(L,{dense:"",modelValue:f.value[227],"onUpdate:modelValue":a[2]||(a[2]=t=>f.value[227]=t),autofocus:"",type:"date",max:d.value,min:p.value,rules:[t=>!!t||"Field is required"]},null,8,["modelValue","max","min","rules"])]),_:1}),l(ae,{align:"right",class:"text-primary"},{default:n(()=>[l(w,{flat:"",label:"Cancel",onClick:a[3]||(a[3]=t=>g())}),l(w,{flat:"",label:"Confirm",onClick:a[4]||(a[4]=t=>T(!0))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(le,{modelValue:Y.value,"onUpdate:modelValue":a[7]||(a[7]=t=>Y.value=t),persistent:""},{default:n(()=>[l(U,null,{default:n(()=>[l(R,{class:"row items-center"},{default:n(()=>[l(Re,{icon:"person_remove",color:"primary","text-color":"white"}),nt]),_:1}),l(ae,{align:"right"},{default:n(()=>[Pe(l(w,{flat:"",label:"Cancel",color:"primary"},null,512),[[We]]),l(w,{flat:"",label:"Release",color:"primary",onClick:a[6]||(a[6]=t=>ee())})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(le,{modelValue:x.value,"onUpdate:modelValue":a[10]||(a[10]=t=>x.value=t),persistent:""},{default:n(()=>[l(U,{style:{"min-width":"350px"}},{default:n(()=>[l(R,null,{default:n(()=>[st]),_:1}),l(R,{class:"q-pt-none"},{default:n(()=>[C(" You are about to erase the arrival date."),rt,C(" Are you sure you want to do this? ")]),_:1}),l(ae,{align:"right",class:"text-primary"},{default:n(()=>[l(w,{label:"No",onClick:a[8]||(a[8]=t=>W())}),l(w,{flat:"",label:"Yes",onClick:a[9]||(a[9]=t=>T(!1))})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},ut={name:"Arrivals",components:{MarkArrivalsTable:it,projectSelector:Je},setup(){const o=he(),i=Te(),m=ze(),r=De(),D=k(null),v=k(""),h=k(""),{getSelectedProject:d}=ve(i),{getUser:p}=ve(m),{fetchAllDeployments:M,updateDeployment:_,getDeployments:Y,fetchDeployments:x}=Ne(),f=I(()=>d.value?d.value[3]:null),$=I(()=>Y(f.value).filter(e=>e[20]==="Complete")),O=I(()=>{let e=Y(f.value);return e=v.value?e.filter(a=>c(a[33].$d).tz("America/Chicago").format("MM/DD/YYYY")===c(v.value).tz("America/Chicago").format("MM/DD/YYYY")):e,e=D.value?e.filter(a=>a[132]===D.value):e,e.sort((a,t)=>a[219]-t[219]||a[33]-t[33])}),N=I(()=>[...new Map(O.value.map(e=>[e[132],e[132]])).values()]);async function B(e){o.loading.show(),f.value?await x({projectId:f.value,refresh:e}):await M({refresh:e}),o.loading.hide()}async function T({record:e,added:a}){if(a){if(e[233]&&e[233]!==""){const t=e[227]?c(e[227]):c();let s=e[234],u=null,b=t,G=!0;try{const oe=await be.getWorkers({employeeId:e[152],options:{includePersonalInformation:!1,includeApplicantInformation:!1,includeRelatedPersons:!1,includeOrganizations:!0,excludeCostCenters:!1,excludeCompanies:!1,excludePayGroups:!1,excludeCustomOrganizations:!1,includeCompensation:!1,includeManagementChainData:!1,includeTransactionLogData:!0,transactionDateRangeData:{updatedFrom:c().subtract("1","M").format("YYYY-MM-DD"),updatedThrough:c().format("YYYY-MM-DD")},filter:{count:1,page:1}}});if(oe.total>=1){const Z=oe.data[0];s=Z.employmentData.positionData.positionId;const ne=Z.organizations.find(te=>te.typeId==="Customer_Project");if(ne&&(ne.referenceId===e[233]?(G=!1,console.log("does not need update project")):(G=!0,console.log("update project",e[233]))),Z.jobHistory.length>0&&G){u=c(Z.jobHistory[0].effectiveDate);const te=u.isSame(t,"day"),Ce=u.isSame(c(),"day"),se=u.isSameOrBefore(c(),"day"),re=t.isSameOrBefore(c(),"day"),ke=t.isBefore(u,"day");se&&Ce||!re&&se?b=u:re?te?b=t:ke&&(b=u):b=u}}}catch{console.log("no worker found")}const _e={employeeId:e[152],positionId:s,customOrganizationId:e[233],effectiveDate:b.format("YYYY-MM-DD"),submittedBy:p.value[70],comment:`Change Organization Assignment Submitted By ${p.value[67]} (${p.value[6]}) from WMP`};if(G)if(s!=="")try{await be.changeCustomOrgAssignment(_e)}catch{e.failedCustomOrgAssignment=!0,console.log("unable to change add custom org assignment")}else e.failedCustomOrgAssignment=!0}try{const t=await P(e);await g({id:e[21],status:7,assignment:t});const s=await Q(e[3],"Complete");_({projectId:s[134],key:s[3],record:s})}catch{const t=[{7:{value:"Assignments By Employee"},9:{value:e[21]}}],{data:s}=await V.fetchFromHiringApp({fields:t});if(s.length===1){await X(s[0]);const u=await P(e);await g({id:e[21],status:7,assignment:u});const b=await Q(e[3],"Complete");_({projectId:b[134],key:b[3],record:b})}}}else{await W(e),await g({id:e[21],status:6});const t=await Q(e[3],"In Process");_({projectId:t[134],key:t[3],record:t})}}async function P(e){try{const a=e[227]?c(e[227]):c(),{data:t}=await V.upsertRecordsXML({to:"bp3gazpqj",data:[{6:{value:e[3]},13:{value:e[15]},18:{value:e[21]},60:{value:""},125:{value:a},145:{value:a},165:{value:"Active"},...e.failedCustomOrgAssignment&&{204:{value:!0}}}],fieldsToReturn:[108],formatObject:108},{action:"create",type:"arrival"});return t[0][108]}catch(a){throw{message:"Cannot add assignment",error:a}}}async function g({id:e,status:a,assignment:t}){try{const s={3:{value:e},79:{value:a}};t&&(s[609]={value:t[3]});const{data:u}=await V.upsertRecordsXML({to:"bp3gb7ng2",data:[s],fieldsToReturn:[3]});return u[0][3]}catch(s){throw{message:"Cannot edit employee",error:s}}}async function Q(e,a){try{const{data:t}=await V.upsertRecordsXML({to:"bp3gaymc3",data:[{3:{value:e},20:{value:a},22:{value:new Date}}],fieldsToReturn:[204],formatObject:204});return t[0][204]}catch(t){throw{message:"Cannot edit deployment",error:t}}}async function W(e){try{const{data:a}=await V.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e.assignment[3]},22:{value:new Date},21:{value:"Canceled"},19:{value:""},60:{value:""},165:{value:"Inactive"}}],fieldsToReturn:[108],formatObject:108});return a[0][108]}catch(a){throw{message:"Cannot cancel assignment",error:a}}}async function X(e){try{const{data:a}=await V.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e[3]},21:{value:"Complete"},165:{value:"Inactive"}}],fieldsToReturn:[108],formatObject:108});return a[0][108]}catch(a){throw{message:"Cannot complete assignment",error:a}}}async function ee(e){try{const a=e.value?c(e.value):c();if(e.record.assignment&&e.record.assignment[3]){const{data:t}=await V.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e.record.assignment[3]},125:{value:a},145:{value:a}}],fieldsToReturn:[3]});return t[0][3]}}catch(a){throw{message:"Cannot edit Assignment",error:a}}}async function J({record:e,added:a}){if(a){const t=await K(e);r.push({name:"ee-termination",params:{id:e[21]},query:{reason:"no-show",hc:e[15],aid:t[3],did:e[3]}})}else{await W(e),await g({id:e[21],status:6});const t=await Q(e[3],"In Process");_({projectId:t[134],key:t[3],record:t})}}async function K(e){try{const a=e[207]?c(e[207]):c(),{data:t}=await V.upsertRecordsXML({to:"bp3gazpqj",data:[{6:{value:e[3]},13:{value:e[15]},18:{value:e[21]},60:{value:""},21:{value:"DNC"},112:{value:!0},165:{value:"Inactive"}}],fieldsToReturn:[108],formatObject:108},{action:"create",type:"arrival"});return t[0][108]}catch(a){throw{message:"Cannot release assignment",error:a}}}return B(!0),{arrived:$,allDeployments:O,arrivalMarked:T,updateArrivalDate:ee,arrivalRelease:J,craftOptions:N,craftFilter:D,startDateFilter:v,search:h}}},ct={class:"q-pt-sm"},dt={class:"text-h5 text-dark"},mt={class:"text-body2 text-italic q-ml-sm"},ft=y("div",{class:"text-subtitle2 text-accent"},"Please click on the green checkmark as employees arrive to the job site.",-1),vt={class:"row items-center"},pt={class:"col-12 col-md-3 q-px-sm"},gt={class:"col-12 col-md-3 q-px-sm"},yt={class:"col-12 col-md-3 q-px-sm"},bt={class:"col-12 col-md-3 q-px-sm"};function wt(o,i,m,r,D,v){const h=pe("projectSelector"),d=pe("mark-arrivals-table");return A(),E(Oe,{style:{"max-width":"100vw"}},{default:n(()=>[y("div",ct,[l(U,{flat:""},{default:n(()=>[l(R,{class:"q-pb-none"},{default:n(()=>[y("div",dt,[C(" Expected Arrivals "),y("span",mt,"("+q(r.allDeployments.length)+" total)",1)]),ft]),_:1}),l(R,null,{default:n(()=>[y("div",vt,[y("div",pt,[l(h,{dense:""})]),y("div",gt,[l(L,{dense:"",modelValue:r.search,"onUpdate:modelValue":i[0]||(i[0]=p=>r.search=p),label:"Search"},null,8,["modelValue"])]),y("div",yt,[l(L,{dense:"",modelValue:r.startDateFilter,"onUpdate:modelValue":i[1]||(i[1]=p=>r.startDateFilter=p),label:"Expected Date",type:"date","stack-label":""},null,8,["modelValue"])]),y("div",bt,[l(Ie,{dense:"",label:"Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:r.craftFilter,"onUpdate:modelValue":i[2]||(i[2]=p=>r.craftFilter=p),options:r.craftOptions,"use-chips":""},null,8,["modelValue","options"])])])]),_:1})]),_:1}),l(d,{rows:r.allDeployments,selected:r.arrived,onArrivalRelease:r.arrivalRelease,onArrivalMarked:r.arrivalMarked,onUpdateArrivalDate:r.updateArrivalDate,filter:r.search},null,8,["rows","selected","onArrivalRelease","onArrivalMarked","onUpdateArrivalDate","filter"])])]),_:1})}var Gt=Qe(ut,[["render",wt]]);export{Gt as default};
