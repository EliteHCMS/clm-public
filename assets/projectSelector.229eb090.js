import{a as T}from"./QSelect.ae55bb14.js";import{a4 as w,r as c,bU as x,c as D,w as g,y as Q,ap as R,au as $,b3 as A,bq as S,A as C,aa as V,aG as q,a7 as i,B as z,ab as E,E as G}from"./index.ffe008a3.js";import{c as L,u as N}from"./app.5c870bdd.js";const O={class:"text-primary"},K={__name:"projectSelector",props:{can:{type:String,default:"read"},styleSelection:{type:Boolean,default:!1}},setup(h){const P=h,{styleSelection:j}=w(P),o=c(!1),d=L(),{getUserType:l,getUser:y}=N(),{setSelectedProject:b,fetchProjects:U,fetchAllProjects:_}=d,{getProjects:B,getSelectedProject:a,getSelectedOffice:s}=x(d),f=c(s.value?s.value[8]:null),k=c(a.value?a.value[3]:null),n=c(l==="Project User"?y[3]:f),t=D(()=>B.value({userType:l,selectedId:n.value,can:"read"}).filter(e=>!0).sort((e,p)=>e[298].localeCompare(p[298]))),u=e=>{b(e)};t.value.length===1&&u(t.value[0]);const r=(e=!1)=>{o.value===!1&&(o.value=!0,n.value&&l==="QuickBase User"?U({selectedId:n.value,extendTime:60,refresh:e}).then(()=>{o.value=!1}):_({can:"read",extendTime:60,refresh:e}).then(()=>{t.value.length===1&&u(t.value[0]),o.value=!1}))};return l==="QuickBase User"&&(t.value.length===0&&r(!0),g(s,()=>{f.value=s.value?s.value[8]:null,r()})),l==="Project User"&&(t.value.length===0&&r(!0),g(a,()=>{k.value=a.value?a.value[3]:null,r()})),(e,p)=>(Q(),R(T,G({"model-value":i(a),options:t.value},e.$attrs,{"onUpdate:modelValue":u,label:i(a)?"Project":"Select Project","option-label":"298","option-value":"3",clearable:t.value.length>1}),$({_:2},[A(e.$slots,(v,m)=>({name:m,fn:S(I=>[C(e.$slots,m,V(q(I)))])})),i(j)?{name:"selected-item",fn:S(v=>[z("span",O,E(v.opt[298]),1)]),key:"0"}:void 0]),1040,["model-value","options","label","clearable"]))}};export{K as _};
