import{f as gi}from"./index.b35eeed3.js";import{dayjs as ce}from"./dayjs.c324749c.js";import{a as wi,b as yi}from"./_commonjsHelpers.a26ce4be.js";function ke(){return ke=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},ke.apply(this,arguments)}var an={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function vr(r){return typeof r=="number"}function Sr(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function ut(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function ft(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function ct(r){return r&&r.constructor.prototype.isUnit===!0||!1}function Kr(r){return typeof r=="string"}var fr=Array.isArray;function wr(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function lt(r){return Array.isArray(r)||wr(r)}function Mi(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Ni(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function on(r){return r&&r.constructor.prototype.isRange===!0||!1}function $e(r){return r&&r.constructor.prototype.isIndex===!0||!1}function bi(r){return typeof r=="boolean"}function sn(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function un(r){return r&&r.constructor.prototype.isHelp===!0||!1}function _i(r){return typeof r=="function"}function xi(r){return r instanceof Date}function Ei(r){return r instanceof RegExp}function Si(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!ut(r)&&!ft(r))}function Ai(r){return r===null}function Ci(r){return r===void 0}function Di(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Oi(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function Fi(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function zi(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function Bi(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ii(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ti(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Pi(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function $i(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function fn(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function qi(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ri(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ui(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Li(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function Wi(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function cn(r){return r&&r.constructor.prototype.isChain===!0||!1}function Vr(r){var e=typeof r;return e==="object"?r===null?"null":Array.isArray(r)?"Array":r instanceof Date?"Date":r instanceof RegExp?"RegExp":Sr(r)?"BigNumber":ut(r)?"Complex":ft(r)?"Fraction":wr(r)?"Matrix":ct(r)?"Unit":$e(r)?"Index":on(r)?"Range":sn(r)?"ResultSet":fn(r)?r.type:cn(r)?"Chain":un(r)?"Help":"Object":e==="function"?"Function":e}function mr(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(n){return mr(n)});if(r instanceof Date)return new Date(r.valueOf());if(Sr(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return Zi(r,mr)}function Zi(r,e){var n={};for(var t in r)Ne(r,t)&&(n[t]=e(r[t]));return n}function ht(r,e){for(var n in e)Ne(e,n)&&(r[n]=e[n]);return r}function De(r,e){var n,t,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(t=0,i=r.length;t<i;t++)if(!De(r[t],e[t]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in r)if(!(n in e)||!De(r[n],e[n]))return!1;for(n in e)if(!(n in r))return!1;return!0}else return r===e}}function Ne(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Vi(r,e){for(var n={},t=0;t<e.length;t++){var i=e[t],s=r[i];s!==void 0&&(n[i]=s)}return n}var Hi=["Matrix","Array"],Ji=["number","BigNumber","Fraction"],Yr=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(an)};ke(Yr,an,{MATRIX_OPTIONS:Hi,NUMBER_OPTIONS:Ji});var ln={exports:{}};(function(r,e){(function(n,t){r.exports=t()})(wi,function(){function n(){return!0}function t(){return!1}function i(){}function s(){var c=[{name:"number",test:function(N){return typeof N=="number"}},{name:"string",test:function(N){return typeof N=="string"}},{name:"boolean",test:function(N){return typeof N=="boolean"}},{name:"Function",test:function(N){return typeof N=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(N){return N instanceof Date}},{name:"RegExp",test:function(N){return N instanceof RegExp}},{name:"Object",test:function(N){return typeof N=="object"&&N!==null&&N.constructor===Object}},{name:"null",test:function(N){return N===null}},{name:"undefined",test:function(N){return N===void 0}}],h={name:"any",test:n},v=[],p=[],o={types:c,conversions:p,ignore:v};function a(N){var C=Fr(o.types,function(A){return A.name===N});if(C)return C;if(N==="any")return h;var F=Fr(o.types,function(A){return A.name.toLowerCase()===N.toLowerCase()});throw new TypeError('Unknown type "'+N+'"'+(F?'. Did you mean "'+F.name+'"?':""))}function u(N){return N===h?999:o.types.indexOf(N)}function l(N){var C=Fr(o.types,function(F){return F.test(N)});if(C)return C.name;throw new TypeError("Value has unknown type. Value: "+N)}function d(N,C){if(!N.signatures)throw new TypeError("Function is no typed-function");var F;if(typeof C=="string"){F=C.split(",");for(var A=0;A<F.length;A++)F[A]=F[A].trim()}else if(Array.isArray(C))F=C;else throw new TypeError("String array or a comma separated string expected");var $=F.join(","),J=N.signatures[$];if(J)return J;throw new TypeError("Signature not found (signature: "+(N.name||"unnamed")+"("+F.join(", ")+"))")}function f(N,C){var F=l(N);if(C===F)return N;for(var A=0;A<o.conversions.length;A++){var $=o.conversions[A];if($.from===F&&$.to===C)return $.convert(N)}throw new Error("Cannot convert from "+F+" to "+C)}function m(N){return N.map(function(C){var F=C.types.map(S);return(C.restParam?"...":"")+F.join("|")}).join(",")}function w(N,C){var F=N.indexOf("...")===0,A=F?N.length>3?N.slice(3):"any":N,$=A.split("|").map(yr).filter(ur).filter(dr),J=W(C,$),X=$.map(function(R){var j=a(R);return{name:R,typeIndex:u(j),test:j.test,conversion:null,conversionIndex:-1}}),V=J.map(function(R){var j=a(R.from);return{name:R.from,typeIndex:u(j),test:j.test,conversion:R,conversionIndex:C.indexOf(R)}});return{types:X.concat(V),restParam:F}}function x(N,C,F){var A=[];return N.trim()!==""&&(A=N.split(",").map(yr).map(function($,J,X){var V=w($,F);if(V.restParam&&J!==X.length-1)throw new SyntaxError('Unexpected rest parameter "'+$+'": only allowed for the last parameter');return V})),A.some(lr)?null:{params:A,fn:C}}function g(N){var C=Or(N);return C?C.restParam:!1}function b(N){return N.types.some(function(C){return C.conversion!=null})}function M(N){if(!N||N.types.length===0)return n;if(N.types.length===1)return a(N.types[0].name).test;if(N.types.length===2){var C=a(N.types[0].name).test,F=a(N.types[1].name).test;return function(J){return C(J)||F(J)}}else{var A=N.types.map(function($){return a($.name).test});return function(J){for(var X=0;X<A.length;X++)if(A[X](J))return!0;return!1}}}function y(N){var C,F,A;if(g(N)){C=or(N).map(M);var $=C.length,J=M(Or(N)),X=function(V){for(var R=$;R<V.length;R++)if(!J(V[R]))return!1;return!0};return function(R){for(var j=0;j<C.length;j++)if(!C[j](R[j]))return!1;return X(R)&&R.length>=$+1}}else return N.length===0?function(R){return R.length===0}:N.length===1?(F=M(N[0]),function(R){return F(R[0])&&R.length===1}):N.length===2?(F=M(N[0]),A=M(N[1]),function(R){return F(R[0])&&A(R[1])&&R.length===2}):(C=N.map(M),function(R){for(var j=0;j<C.length;j++)if(!C[j](R[j]))return!1;return R.length===C.length})}function E(N,C){return C<N.params.length?N.params[C]:g(N.params)?Or(N.params):null}function _(N,C,F){var A=E(N,C),$=A?F?A.types.filter(D):A.types:[];return $.map(S)}function S(N){return N.name}function D(N){return N.conversion===null||N.conversion===void 0}function z(N,C){var F=kr(Lr(N,function(A){return _(A,C,!1)}));return F.indexOf("any")!==-1?["any"]:F}function T(N,C,F){var A,$,J=N||"unnamed",X=F,V;for(V=0;V<C.length;V++){var R=X.filter(function(Wr){var He=M(E(Wr,V));return(V<Wr.params.length||g(Wr.params))&&He(C[V])});if(R.length===0){if($=z(X,V),$.length>0){var j=l(C[V]);return A=new TypeError("Unexpected type of argument in function "+J+" (expected: "+$.join(" or ")+", actual: "+j+", index: "+V+")"),A.data={category:"wrongType",fn:J,index:V,actual:j,expected:$},A}}else X=R}var Tr=X.map(function(Wr){return g(Wr.params)?1/0:Wr.params.length});if(C.length<Math.min.apply(null,Tr))return $=z(X,V),A=new TypeError("Too few arguments in function "+J+" (expected: "+$.join(" or ")+", index: "+C.length+")"),A.data={category:"tooFewArgs",fn:J,index:C.length,expected:$},A;var qr=Math.max.apply(null,Tr);return C.length>qr?(A=new TypeError("Too many arguments in function "+J+" (expected: "+qr+", actual: "+C.length+")"),A.data={category:"tooManyArgs",fn:J,index:C.length,expectedLength:qr},A):(A=new TypeError('Arguments of type "'+C.join(", ")+'" do not match any of the defined signatures of function '+J+"."),A.data={category:"mismatch",actual:C.map(l)},A)}function U(N){for(var C=999,F=0;F<N.types.length;F++)D(N.types[F])&&(C=Math.min(C,N.types[F].typeIndex));return C}function I(N){for(var C=999,F=0;F<N.types.length;F++)D(N.types[F])||(C=Math.min(C,N.types[F].conversionIndex));return C}function P(N,C){var F;return F=N.restParam-C.restParam,F!==0||(F=b(N)-b(C),F!==0)||(F=U(N)-U(C),F!==0)?F:I(N)-I(C)}function O(N,C){var F=Math.min(N.params.length,C.params.length),A,$;if($=N.params.some(b)-C.params.some(b),$!==0)return $;for(A=0;A<F;A++)if($=b(N.params[A])-b(C.params[A]),$!==0)return $;for(A=0;A<F;A++)if($=P(N.params[A],C.params[A]),$!==0)return $;return N.params.length-C.params.length}function W(N,C){var F={};return N.forEach(function(A){C.indexOf(A.from)===-1&&C.indexOf(A.to)!==-1&&!F[A.from]&&(F[A.from]=A)}),Object.keys(F).map(function(A){return F[A]})}function q(N,C){var F=C;if(N.some(b)){var A=g(N),$=N.map(L);F=function(){for(var R=[],j=A?arguments.length-1:arguments.length,Tr=0;Tr<j;Tr++)R[Tr]=$[Tr](arguments[Tr]);return A&&(R[j]=arguments[j].map($[j])),C.apply(this,R)}}var J=F;if(g(N)){var X=N.length-1;J=function(){return F.apply(this,br(arguments,0,X).concat([br(arguments,X)]))}}return J}function L(N){var C,F,A,$,J=[],X=[];switch(N.types.forEach(function(V){V.conversion&&(J.push(a(V.conversion.from).test),X.push(V.conversion.convert))}),X.length){case 0:return function(R){return R};case 1:return C=J[0],A=X[0],function(R){return C(R)?A(R):R};case 2:return C=J[0],F=J[1],A=X[0],$=X[1],function(R){return C(R)?A(R):F(R)?$(R):R};default:return function(R){for(var j=0;j<X.length;j++)if(J[j](R))return X[j](R);return R}}}function G(N){var C={};return N.forEach(function(F){F.params.some(b)||rr(F.params,!0).forEach(function(A){C[m(A)]=F.fn})}),C}function rr(N,C){function F(A,$,J){if($<A.length){var X=A[$],V=C?X.types.filter(D):X.types,R;if(X.restParam){var j=V.filter(D);R=j.length<V.length?[j,V]:[V]}else R=V.map(function(qr){return[qr]});return Lr(R,function(qr){return F(A,$+1,J.concat([qr]))})}else{var Tr=J.map(function(qr,Wr){return{types:qr,restParam:Wr===A.length-1&&g(A)}});return[Tr]}}return F(N,0,[])}function er(N,C){for(var F=Math.max(N.params.length,C.params.length),A=0;A<F;A++){var $=_(N,A,!0),J=_(C,A,!0);if(!_r($,J))return!1}var X=N.params.length,V=C.params.length,R=g(N.params),j=g(C.params);return R?j?X===V:V>=X:j?X>=V:X===V}function k(N,C){if(Object.keys(C).length===0)throw new SyntaxError("No signatures provided");var F=[];Object.keys(C).map(function(sr){return x(sr,C[sr],o.conversions)}).filter(Cr).forEach(function(sr){var Er=Fr(F,function(Zr){return er(Zr,sr)});if(Er)throw new TypeError('Conflicting signatures "'+m(Er.params)+'" and "'+m(sr.params)+'".');F.push(sr)});var A=Lr(F,function(sr){var Er=sr?rr(sr.params,!1):[];return Er.map(function(Zr){return{params:Zr,fn:sr.fn}})}).filter(Cr);A.sort(O);var $=A[0]&&A[0].params.length<=2&&!g(A[0].params),J=A[1]&&A[1].params.length<=2&&!g(A[1].params),X=A[2]&&A[2].params.length<=2&&!g(A[2].params),V=A[3]&&A[3].params.length<=2&&!g(A[3].params),R=A[4]&&A[4].params.length<=2&&!g(A[4].params),j=A[5]&&A[5].params.length<=2&&!g(A[5].params),Tr=$&&J&&X&&V&&R&&j,qr=A.map(function(sr){return y(sr.params)}),Wr=$?M(A[0].params[0]):t,He=J?M(A[1].params[0]):t,Jn=X?M(A[2].params[0]):t,Yn=V?M(A[3].params[0]):t,Gn=R?M(A[4].params[0]):t,Xn=j?M(A[5].params[0]):t,Kn=$?M(A[0].params[1]):t,Qn=J?M(A[1].params[1]):t,jn=X?M(A[2].params[1]):t,kn=V?M(A[3].params[1]):t,ri=R?M(A[4].params[1]):t,ei=j?M(A[5].params[1]):t,oe=A.map(function(sr){return q(sr.params,sr.fn)}),ti=$?oe[0]:i,ni=J?oe[1]:i,ii=X?oe[2]:i,ai=V?oe[3]:i,oi=R?oe[4]:i,si=j?oe[5]:i,ui=$?A[0].params.length:-1,fi=J?A[1].params.length:-1,ci=X?A[2].params.length:-1,li=V?A[3].params.length:-1,hi=R?A[4].params.length:-1,vi=j?A[5].params.length:-1,pi=Tr?6:0,di=A.length,mi=function(){for(var Er=pi;Er<di;Er++)if(qr[Er](arguments))return oe[Er].apply(this,arguments);return o.onMismatch(N,arguments,A)},Je=function sr(Er,Zr){return arguments.length===ui&&Wr(Er)&&Kn(Zr)?ti.apply(sr,arguments):arguments.length===fi&&He(Er)&&Qn(Zr)?ni.apply(sr,arguments):arguments.length===ci&&Jn(Er)&&jn(Zr)?ii.apply(sr,arguments):arguments.length===li&&Yn(Er)&&kn(Zr)?ai.apply(sr,arguments):arguments.length===hi&&Gn(Er)&&ri(Zr)?oi.apply(sr,arguments):arguments.length===vi&&Xn(Er)&&ei(Zr)?si.apply(sr,arguments):mi.apply(sr,arguments)};try{Object.defineProperty(Je,"name",{value:N})}catch{}return Je.signatures=G(A),Je}function pr(N,C,F){throw T(N,C,F)}function dr(N){return o.ignore.indexOf(N)===-1}function yr(N){return N.trim()}function ur(N){return!!N}function Cr(N){return N!==null}function lr(N){return N.types.length===0}function or(N){return N.slice(0,N.length-1)}function Or(N){return N[N.length-1]}function br(N,C,F){return Array.prototype.slice.call(N,C,F)}function ir(N,C){return N.indexOf(C)!==-1}function _r(N,C){for(var F=0;F<N.length;F++)if(ir(C,N[F]))return!0;return!1}function Fr(N,C){for(var F=0;F<N.length;F++)if(C(N[F]))return N[F]}function kr(N){for(var C={},F=0;F<N.length;F++)C[N[F]]=!0;return Object.keys(C)}function Lr(N,C){return Array.prototype.concat.apply([],N.map(C))}function fe(N){for(var C="",F=0;F<N.length;F++){var A=N[F];if((typeof A.signatures=="object"||typeof A.signature=="string")&&A.name!==""){if(C==="")C=A.name;else if(C!==A.name){var $=new Error("Function names do not match (expected: "+C+", actual: "+A.name+")");throw $.data={actual:A.name,expected:C},$}}}return C}function ae(N){var C,F={};function A(V,R){if(F.hasOwnProperty(V)&&R!==F[V])throw C=new Error('Signature "'+V+'" is defined twice'),C.data={signature:V},C}for(var $=0;$<N.length;$++){var J=N[$];if(typeof J.signatures=="object")for(var X in J.signatures)J.signatures.hasOwnProperty(X)&&(A(X,J.signatures[X]),F[X]=J.signatures[X]);else if(typeof J.signature=="string")A(J.signature,J),F[J.signature]=J;else throw C=new TypeError("Function is no typed-function (index: "+$+")"),C.data={index:$},C}return F}return o=k("typed",{"string, Object":k,Object:function(N){var C=[];for(var F in N)N.hasOwnProperty(F)&&C.push(N[F]);var A=fe(C);return k(A,N)},"...Function":function(N){return k(fe(N),ae(N))},"string, ...Function":function(N,C){return k(N,ae(C))}}),o.create=s,o.types=c,o.conversions=p,o.ignore=v,o.onMismatch=pr,o.throwMismatchError=pr,o.createError=T,o.convert=f,o.find=d,o.addType=function(N,C){if(!N||typeof N.name!="string"||typeof N.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if(C!==!1){for(var F=0;F<o.types.length;F++)if(o.types[F].name==="Object"){o.types.splice(F,0,N);return}}o.types.push(N)},o.addConversion=function(N){if(!N||typeof N.from!="string"||typeof N.to!="string"||typeof N.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");o.conversions.push(N)},o}return s()})})(ln);var Ct=ln.exports;function gr(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}function Ye(r,e,n){var t={2:"0b",8:"0o",16:"0x"},i=t[e],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!gr(n))throw new Error("size must be an integer");if(r>2**(n-1)-1||r<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!gr(r))throw new Error("Value must be an integer");r<0&&(r=r+2**n),s="i".concat(n)}var c="";return r<0&&(r=-r,c="-"),"".concat(c).concat(i).concat(r.toString(e)).concat(s)}function rt(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var n="auto",t,i;if(e&&(e.notation&&(n=e.notation),vr(e)?t=e:vr(e.precision)&&(t=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return hn(r,t);case"exponential":return vn(r,t);case"engineering":return Yi(r,t);case"bin":return Ye(r,2,i);case"oct":return Ye(r,8,i);case"hex":return Ye(r,16,i);case"auto":return Gi(r,t,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],c=arguments[4];return s!=="."?s+c:c});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function qe(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var n=e[1],t=e[2],i=parseFloat(e[4]||"0"),s=t.indexOf(".");i+=s!==-1?s-1:t.length-1;var c=t.replace(".","").replace(/^0*/,function(h){return i-=h.length,""}).replace(/0*$/,"").split("").map(function(h){return parseInt(h)});return c.length===0&&(c.push(0),i++),{sign:n,coefficients:c,exponent:i}}function Yi(r,e){if(isNaN(r)||!isFinite(r))return String(r);var n=qe(r),t=Re(n,e),i=t.exponent,s=t.coefficients,c=i%3===0?i:i<0?i-3-i%3:i-i%3;if(vr(e))for(;e>s.length||i-c+1>s.length;)s.push(0);else for(var h=Math.abs(i-c)-(s.length-1),v=0;v<h;v++)s.push(0);for(var p=Math.abs(i-c),o=1;p>0;)o++,p--;var a=s.slice(o).join(""),u=vr(e)&&a.length||a.match(/[1-9]/)?"."+a:"",l=s.slice(0,o).join("")+u+"e"+(i>=0?"+":"")+c.toString();return t.sign+l}function hn(r,e){if(isNaN(r)||!isFinite(r))return String(r);var n=qe(r),t=typeof e=="number"?Re(n,n.exponent+1+e):n,i=t.coefficients,s=t.exponent+1,c=s+(e||0);return i.length<c&&(i=i.concat(pe(c-i.length))),s<0&&(i=pe(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),t.sign+i.join("")}function vn(r,e){if(isNaN(r)||!isFinite(r))return String(r);var n=qe(r),t=e?Re(n,e):n,i=t.coefficients,s=t.exponent;i.length<e&&(i=i.concat(pe(e-i.length)));var c=i.shift();return t.sign+c+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Gi(r,e,n){if(isNaN(r)||!isFinite(r))return String(r);var t=n&&n.lowerExp!==void 0?n.lowerExp:-3,i=n&&n.upperExp!==void 0?n.upperExp:5,s=qe(r),c=e?Re(s,e):s;if(c.exponent<t||c.exponent>=i)return vn(r,e);var h=c.coefficients,v=c.exponent;h.length<e&&(h=h.concat(pe(e-h.length))),h=h.concat(pe(v-h.length+1+(h.length<e?e-h.length:0))),h=pe(-v).concat(h);var p=v>0?v:0;return p<h.length-1&&h.splice(p+1,0,"."),c.sign+h.join("")}function Re(r,e){for(var n={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},t=n.coefficients;e<=0;)t.unshift(0),n.exponent++,e++;if(t.length>e){var i=t.splice(e,t.length-e);if(i[0]>=5){var s=e-1;for(t[s]++;t[s]===10;)t.pop(),s===0&&(t.unshift(0),n.exponent++,s++),s--,t[s]++}}return n}function pe(r){for(var e=[],n=0;n<r;n++)e.push(0);return e}function Xi(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Ki=Number.EPSILON||2220446049250313e-31;function de(r,e,n){if(n==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var t=Math.abs(r-e);return t<Ki?!0:t<=Math.max(Math.abs(r),Math.abs(e))*n}return!1}function Ge(r,e,n){var t=r.constructor,i=new t(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!gr(n))throw new Error("size must be an integer");if(r.greaterThan(i.pow(n-1).sub(1))||r.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(n))),s="i".concat(n)}switch(e){case 2:return"".concat(r.toBinary()).concat(s);case 8:return"".concat(r.toOctal()).concat(s);case 16:return"".concat(r.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function Qi(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var n="auto",t,i;if(e!==void 0&&(e.notation&&(n=e.notation),typeof e=="number"?t=e:e.precision&&(t=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return ki(r,t);case"exponential":return Dt(r,t);case"engineering":return ji(r,t);case"bin":return Ge(r,2,i);case"oct":return Ge(r,8,i);case"hex":return Ge(r,16,i);case"auto":{var s=e&&e.lowerExp!==void 0?e.lowerExp:-3,c=e&&e.upperExp!==void 0?e.upperExp:5;if(r.isZero())return"0";var h,v=r.toSignificantDigits(t),p=v.e;return p>=s&&p<c?h=v.toFixed():h=Dt(r,t),h.replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],a=arguments[4];return o!=="."?o+a:a})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ji(r,e){var n=r.e,t=n%3===0?n:n<0?n-3-n%3:n-n%3,i=r.mul(Math.pow(10,-t)),s=i.toPrecision(e);return s.indexOf("e")!==-1&&(s=i.toString()),s+"e"+(n>=0?"+":"")+t.toString()}function Dt(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function ki(r,e){return r.toFixed(e)}function Mr(r,e){var n=ra(r,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function ra(r,e){if(typeof r=="number")return rt(r,e);if(Sr(r))return Qi(r,e);if(ea(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return pn(r,e);if(Kr(r))return'"'+r+'"';if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var n=Object.keys(r).map(t=>'"'+t+'": '+Mr(r[t],e));return"{"+n.join(", ")+"}"}return String(r)}function pn(r,e){if(Array.isArray(r)){for(var n="[",t=r.length,i=0;i<t;i++)i!==0&&(n+=", "),n+=pn(r[i],e);return n+="]",n}else return Mr(r,e)}function ea(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function tr(r,e,n){if(!(this instanceof tr))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}tr.prototype=new RangeError;tr.prototype.constructor=RangeError;tr.prototype.name="DimensionError";tr.prototype.isDimensionError=!0;function se(r,e,n){if(!(this instanceof se))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}se.prototype=new RangeError;se.prototype.constructor=RangeError;se.prototype.name="IndexError";se.prototype.isIndexError=!0;function Hr(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function dn(r,e,n){var t,i=r.length;if(i!==e[n])throw new tr(i,e[n]);if(n<e.length-1){var s=n+1;for(t=0;t<i;t++){var c=r[t];if(!Array.isArray(c))throw new tr(e.length-1,e.length,"<");dn(r[t],e,s)}}else for(t=0;t<i;t++)if(Array.isArray(r[t]))throw new tr(e.length+1,e.length,">")}function Ot(r,e){var n=e.length===0;if(n){if(Array.isArray(r))throw new tr(r.length,0)}else dn(r,e,0)}function cr(r,e){if(!vr(r)||!gr(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new se(r,e)}function Oe(r,e,n){if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!vr(i)||!gr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Mr(e)+")")});var t=n!==void 0?n:0;return et(r,e,0,t),r}function et(r,e,n,t){var i,s,c=r.length,h=e[n],v=Math.min(c,h);if(r.length=h,n<e.length-1){var p=n+1;for(i=0;i<v;i++)s=r[i],Array.isArray(s)||(s=[s],r[i]=s),et(s,e,p,t);for(i=v;i<h;i++)s=[],r[i]=s,et(s,e,p,t)}else{for(i=0;i<v;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=v;i<h;i++)r[i]=t}}function ta(r,e){var n=ia(r),t=n.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new tr(0,t,"!=");e=vt(e,t);var i=mn(e);if(t!==i)throw new tr(i,t,"!=");try{return na(n,e)}catch(s){throw s instanceof tr?new tr(i,t,"!="):s}}function vt(r,e){var n=mn(r),t=r.slice(),i=-1,s=r.indexOf(i),c=r.indexOf(i,s+1)>=0;if(c)throw new Error("More than one wildcard in sizes");var h=s>=0,v=e%n===0;if(h)if(v)t[s]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return t}function mn(r){return r.reduce((e,n)=>e*n,1)}function na(r,e){for(var n=r,t,i=e.length-1;i>0;i--){var s=e[i];t=[];for(var c=n.length/s,h=0;h<c;h++)t.push(n.slice(h*s,(h+1)*s));n=t}return n}function gn(r,e,n,t){var i=t||Hr(r);if(n)for(var s=0;s<n;s++)r=[r],i.unshift(1);for(r=wn(r,e,0);i.length<e;)i.push(1);return r}function wn(r,e,n){var t,i;if(Array.isArray(r)){var s=n+1;for(t=0,i=r.length;t<i;t++)r[t]=wn(r[t],e,s)}else for(var c=n;c<e;c++)r=[r];return r}function ia(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function n(t){Array.isArray(t)?t.forEach(n):e.push(t)}),e}function Fe(r,e){for(var n,t=0,i=0;i<r.length;i++){var s=r[i],c=Array.isArray(s);if(i===0&&c&&(t=s.length),c&&s.length!==t)return;var h=c?Fe(s,e):e(s);if(n===void 0)n=h;else if(n!==h)return"mixed"}return n}function K(r,e,n,t){function i(s){var c=Vi(s,e.map(sa));return aa(r,e,s),n(c)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),t&&(i.meta=t),i}function aa(r,e,n){var t=e.filter(s=>!oa(s)).every(s=>n[s]!==void 0);if(!t){var i=e.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function oa(r){return r&&r[0]==="?"}function sa(r){return r&&r[0]==="?"?r.slice(1):r}function ua(r,e){if(Mn(r)&&yn(r,e))return r[e];throw typeof r[e]=="function"&&la(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function fa(r,e,n){if(Mn(r)&&yn(r,e))return r[e]=n,n;throw new Error('No access to property "'+e+'"')}function ca(r,e){return e in r}function yn(r,e){return!r||typeof r!="object"?!1:Ne(ha,e)?!0:!(e in Object.prototype||e in Function.prototype)}function la(r,e){return r==null||typeof r[e]!="function"||Ne(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Ne(va,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Mn(r){return typeof r=="object"&&r&&r.constructor===Object}var ha={length:!0,name:!0},va={toString:!0,valueOf:!0,toLocaleString:!0};class pa{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return ua(this.wrappedObject,e)}set(e,n){return fa(this.wrappedObject,e,n),this}has(e){return ca(this.wrappedObject,e)}}function da(r){return r?r instanceof Map||r instanceof pa||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}var Nn=function(){return Nn=Ct.create,Ct},ma=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],ga=K("typed",ma,function(e){var{BigNumber:n,Complex:t,DenseMatrix:i,Fraction:s}=e,c=Nn();return c.types=[{name:"number",test:vr},{name:"Complex",test:ut},{name:"BigNumber",test:Sr},{name:"Fraction",test:ft},{name:"Unit",test:ct},{name:"string",test:Kr},{name:"Chain",test:cn},{name:"Array",test:fr},{name:"Matrix",test:wr},{name:"DenseMatrix",test:Mi},{name:"SparseMatrix",test:Ni},{name:"Range",test:on},{name:"Index",test:$e},{name:"boolean",test:bi},{name:"ResultSet",test:sn},{name:"Help",test:un},{name:"function",test:_i},{name:"Date",test:xi},{name:"RegExp",test:Ei},{name:"null",test:Ai},{name:"undefined",test:Ci},{name:"AccessorNode",test:Di},{name:"ArrayNode",test:Oi},{name:"AssignmentNode",test:Fi},{name:"BlockNode",test:zi},{name:"ConditionalNode",test:Bi},{name:"ConstantNode",test:Ii},{name:"FunctionNode",test:Pi},{name:"FunctionAssignmentNode",test:Ti},{name:"IndexNode",test:$i},{name:"Node",test:fn},{name:"ObjectNode",test:qi},{name:"OperatorNode",test:Ri},{name:"ParenthesisNode",test:Ui},{name:"RangeNode",test:Li},{name:"SymbolNode",test:Wi},{name:"Map",test:da},{name:"Object",test:Si}],c.conversions=[{from:"number",to:"BigNumber",convert:function(v){if(n||Xe(v),Xi(v)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+v+"). Use function bignumber(x) to convert to BigNumber.");return new n(v)}},{from:"number",to:"Complex",convert:function(v){return t||Ee(v),new t(v,0)}},{from:"number",to:"string",convert:function(v){return v+""}},{from:"BigNumber",to:"Complex",convert:function(v){return t||Ee(v),new t(v.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(v){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(v){return t||Ee(v),new t(v.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(v){s||Ke(v);var p=new s(v);if(p.valueOf()!==v)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+v+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(v){var p=Number(v);if(isNaN(p))throw new Error('Cannot convert "'+v+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(v){n||Xe(v);try{return new n(v)}catch{throw new Error('Cannot convert "'+v+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(v){s||Ke(v);try{return new s(v)}catch{throw new Error('Cannot convert "'+v+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(v){t||Ee(v);try{return new t(v)}catch{throw new Error('Cannot convert "'+v+'" to Complex')}}},{from:"boolean",to:"number",convert:function(v){return+v}},{from:"boolean",to:"BigNumber",convert:function(v){return n||Xe(v),new n(+v)}},{from:"boolean",to:"Fraction",convert:function(v){return s||Ke(v),new s(+v)}},{from:"boolean",to:"string",convert:function(v){return String(v)}},{from:"Array",to:"Matrix",convert:function(v){return i||wa(),new i(v)}},{from:"Matrix",to:"Array",convert:function(v){return v.valueOf()}}],c});function Xe(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function Ee(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function wa(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Ke(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var he=9e15,ne=1e9,tt="0123456789abcdef",ze="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Be="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",nt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-he,maxE:he,crypto:!1},bn,Qr,Q=!0,Ue="[DecimalError] ",te=Ue+"Invalid argument: ",_n=Ue+"Precision limit exceeded",xn=Ue+"crypto unavailable",En="[object Decimal]",Ar=Math.floor,Nr=Math.pow,ya=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Ma=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Na=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Sn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ur=1e7,Y=7,ba=9007199254740991,_a=ze.length-1,it=Be.length-1,B={toStringTag:En};B.absoluteValue=B.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),H(r)};B.ceil=function(){return H(new this.constructor(this),this.e+1,2)};B.clampedTo=B.clamp=function(r,e){var n,t=this,i=t.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(te+e);return n=t.cmp(r),n<0?r:t.cmp(e)>0?e:new i(t)};B.comparedTo=B.cmp=function(r){var e,n,t,i,s=this,c=s.d,h=(r=new s.constructor(r)).d,v=s.s,p=r.s;if(!c||!h)return!v||!p?NaN:v!==p?v:c===h?0:!c^v<0?1:-1;if(!c[0]||!h[0])return c[0]?v:h[0]?-p:0;if(v!==p)return v;if(s.e!==r.e)return s.e>r.e^v<0?1:-1;for(t=c.length,i=h.length,e=0,n=t<i?t:i;e<n;++e)if(c[e]!==h[e])return c[e]>h[e]^v<0?1:-1;return t===i?0:t>i^v<0?1:-1};B.cosine=B.cos=function(){var r,e,n=this,t=n.constructor;return n.d?n.d[0]?(r=t.precision,e=t.rounding,t.precision=r+Math.max(n.e,n.sd())+Y,t.rounding=1,n=xa(t,Fn(t,n)),t.precision=r,t.rounding=e,H(Qr==2||Qr==3?n.neg():n,r,e,!0)):new t(1):new t(NaN)};B.cubeRoot=B.cbrt=function(){var r,e,n,t,i,s,c,h,v,p,o=this,a=o.constructor;if(!o.isFinite()||o.isZero())return new a(o);for(Q=!1,s=o.s*Nr(o.s*o,1/3),!s||Math.abs(s)==1/0?(n=xr(o.d),r=o.e,(s=(r-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=Nr(n,1/3),r=Ar((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?n="5e"+r:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+r),t=new a(n),t.s=o.s):t=new a(s.toString()),c=(r=a.precision)+3;;)if(h=t,v=h.times(h).times(h),p=v.plus(o),t=ar(p.plus(o).times(h),p.plus(v),c+2,1),xr(h.d).slice(0,c)===(n=xr(t.d)).slice(0,c))if(n=n.slice(c-3,c+1),n=="9999"||!i&&n=="4999"){if(!i&&(H(h,r+1,0),h.times(h).times(h).eq(o))){t=h;break}c+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(H(t,r+1,1),e=!t.times(t).times(t).eq(o));break}return Q=!0,H(t,r,a.rounding,e)};B.decimalPlaces=B.dp=function(){var r,e=this.d,n=NaN;if(e){if(r=e.length-1,n=(r-Ar(this.e/Y))*Y,r=e[r],r)for(;r%10==0;r/=10)n--;n<0&&(n=0)}return n};B.dividedBy=B.div=function(r){return ar(this,new this.constructor(r))};B.dividedToIntegerBy=B.divToInt=function(r){var e=this,n=e.constructor;return H(ar(e,new n(r),0,1,1),n.precision,n.rounding)};B.equals=B.eq=function(r){return this.cmp(r)===0};B.floor=function(){return H(new this.constructor(this),this.e+1,3)};B.greaterThan=B.gt=function(r){return this.cmp(r)>0};B.greaterThanOrEqualTo=B.gte=function(r){var e=this.cmp(r);return e==1||e===0};B.hyperbolicCosine=B.cosh=function(){var r,e,n,t,i,s=this,c=s.constructor,h=new c(1);if(!s.isFinite())return new c(s.s?1/0:NaN);if(s.isZero())return h;n=c.precision,t=c.rounding,c.precision=n+Math.max(s.e,s.sd())+4,c.rounding=1,i=s.d.length,i<32?(r=Math.ceil(i/3),e=(1/We(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=me(c,1,s.times(e),new c(1),!0);for(var v,p=r,o=new c(8);p--;)v=s.times(s),s=h.minus(v.times(o.minus(v.times(o))));return H(s,c.precision=n,c.rounding=t,!0)};B.hyperbolicSine=B.sinh=function(){var r,e,n,t,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,t=i.d.length,t<3)i=me(s,2,i,i,!0);else{r=1.4*Math.sqrt(t),r=r>16?16:r|0,i=i.times(1/We(5,r)),i=me(s,2,i,i,!0);for(var c,h=new s(5),v=new s(16),p=new s(20);r--;)c=i.times(i),i=i.times(h.plus(c.times(v.times(c).plus(p))))}return s.precision=e,s.rounding=n,H(i,e,n,!0)};B.hyperbolicTangent=B.tanh=function(){var r,e,n=this,t=n.constructor;return n.isFinite()?n.isZero()?new t(n):(r=t.precision,e=t.rounding,t.precision=r+7,t.rounding=1,ar(n.sinh(),n.cosh(),t.precision=r,t.rounding=e)):new t(n.s)};B.inverseCosine=B.acos=function(){var r,e=this,n=e.constructor,t=e.abs().cmp(1),i=n.precision,s=n.rounding;return t!==-1?t===0?e.isNeg()?Rr(n,i,s):new n(0):new n(NaN):e.isZero()?Rr(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),r=Rr(n,i+4,s).times(.5),n.precision=i,n.rounding=s,r.minus(e))};B.inverseHyperbolicCosine=B.acosh=function(){var r,e,n=this,t=n.constructor;return n.lte(1)?new t(n.eq(1)?0:NaN):n.isFinite()?(r=t.precision,e=t.rounding,t.precision=r+Math.max(Math.abs(n.e),n.sd())+4,t.rounding=1,Q=!1,n=n.times(n).minus(1).sqrt().plus(n),Q=!0,t.precision=r,t.rounding=e,n.ln()):new t(n)};B.inverseHyperbolicSine=B.asinh=function(){var r,e,n=this,t=n.constructor;return!n.isFinite()||n.isZero()?new t(n):(r=t.precision,e=t.rounding,t.precision=r+2*Math.max(Math.abs(n.e),n.sd())+6,t.rounding=1,Q=!1,n=n.times(n).plus(1).sqrt().plus(n),Q=!0,t.precision=r,t.rounding=e,n.ln())};B.inverseHyperbolicTangent=B.atanh=function(){var r,e,n,t,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=s.precision,e=s.rounding,t=i.sd(),Math.max(t,r)<2*-i.e-1?H(new s(i),r,e,!0):(s.precision=n=t-i.e,i=ar(i.plus(1),new s(1).minus(i),n+r,1),s.precision=r+4,s.rounding=1,i=i.ln(),s.precision=r,s.rounding=e,i.times(.5))):new s(NaN)};B.inverseSine=B.asin=function(){var r,e,n,t,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),n=s.precision,t=s.rounding,e!==-1?e===0?(r=Rr(s,n+4,t).times(.5),r.s=i.s,r):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=t,i.times(2)))};B.inverseTangent=B.atan=function(){var r,e,n,t,i,s,c,h,v,p=this,o=p.constructor,a=o.precision,u=o.rounding;if(p.isFinite()){if(p.isZero())return new o(p);if(p.abs().eq(1)&&a+4<=it)return c=Rr(o,a+4,u).times(.25),c.s=p.s,c}else{if(!p.s)return new o(NaN);if(a+4<=it)return c=Rr(o,a+4,u).times(.5),c.s=p.s,c}for(o.precision=h=a+10,o.rounding=1,n=Math.min(28,h/Y+2|0),r=n;r;--r)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(Q=!1,e=Math.ceil(h/Y),t=1,v=p.times(p),c=new o(p),i=p;r!==-1;)if(i=i.times(v),s=c.minus(i.div(t+=2)),i=i.times(v),c=s.plus(i.div(t+=2)),c.d[e]!==void 0)for(r=e;c.d[r]===s.d[r]&&r--;);return n&&(c=c.times(2<<n-1)),Q=!0,H(c,o.precision=a,o.rounding=u,!0)};B.isFinite=function(){return!!this.d};B.isInteger=B.isInt=function(){return!!this.d&&Ar(this.e/Y)>this.d.length-2};B.isNaN=function(){return!this.s};B.isNegative=B.isNeg=function(){return this.s<0};B.isPositive=B.isPos=function(){return this.s>0};B.isZero=function(){return!!this.d&&this.d[0]===0};B.lessThan=B.lt=function(r){return this.cmp(r)<0};B.lessThanOrEqualTo=B.lte=function(r){return this.cmp(r)<1};B.logarithm=B.log=function(r){var e,n,t,i,s,c,h,v,p=this,o=p.constructor,a=o.precision,u=o.rounding,l=5;if(r==null)r=new o(10),e=!0;else{if(r=new o(r),n=r.d,r.s<0||!n||!n[0]||r.eq(1))return new o(NaN);e=r.eq(10)}if(n=p.d,p.s<0||!n||!n[0]||p.eq(1))return new o(n&&!n[0]?-1/0:p.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Q=!1,h=a+l,c=ee(p,h),t=e?Ie(o,h+10):ee(r,h),v=ar(c,t,h,1),be(v.d,i=a,u))do if(h+=10,c=ee(p,h),t=e?Ie(o,h+10):ee(r,h),v=ar(c,t,h,1),!s){+xr(v.d).slice(i+1,i+15)+1==1e14&&(v=H(v,a+1,0));break}while(be(v.d,i+=10,u));return Q=!0,H(v,a,u)};B.minus=B.sub=function(r){var e,n,t,i,s,c,h,v,p,o,a,u,l=this,d=l.constructor;if(r=new d(r),!l.d||!r.d)return!l.s||!r.s?r=new d(NaN):l.d?r.s=-r.s:r=new d(r.d||l.s!==r.s?l:NaN),r;if(l.s!=r.s)return r.s=-r.s,l.plus(r);if(p=l.d,u=r.d,h=d.precision,v=d.rounding,!p[0]||!u[0]){if(u[0])r.s=-r.s;else if(p[0])r=new d(l);else return new d(v===3?-0:0);return Q?H(r,h,v):r}if(n=Ar(r.e/Y),o=Ar(l.e/Y),p=p.slice(),s=o-n,s){for(a=s<0,a?(e=p,s=-s,c=u.length):(e=u,n=o,c=p.length),t=Math.max(Math.ceil(h/Y),c)+2,s>t&&(s=t,e.length=1),e.reverse(),t=s;t--;)e.push(0);e.reverse()}else{for(t=p.length,c=u.length,a=t<c,a&&(c=t),t=0;t<c;t++)if(p[t]!=u[t]){a=p[t]<u[t];break}s=0}for(a&&(e=p,p=u,u=e,r.s=-r.s),c=p.length,t=u.length-c;t>0;--t)p[c++]=0;for(t=u.length;t>s;){if(p[--t]<u[t]){for(i=t;i&&p[--i]===0;)p[i]=Ur-1;--p[i],p[t]+=Ur}p[t]-=u[t]}for(;p[--c]===0;)p.pop();for(;p[0]===0;p.shift())--n;return p[0]?(r.d=p,r.e=Le(p,n),Q?H(r,h,v):r):new d(v===3?-0:0)};B.modulo=B.mod=function(r){var e,n=this,t=n.constructor;return r=new t(r),!n.d||!r.s||r.d&&!r.d[0]?new t(NaN):!r.d||n.d&&!n.d[0]?H(new t(n),t.precision,t.rounding):(Q=!1,t.modulo==9?(e=ar(n,r.abs(),0,3,1),e.s*=r.s):e=ar(n,r,0,t.modulo,1),e=e.times(r),Q=!0,n.minus(e))};B.naturalExponential=B.exp=function(){return at(this)};B.naturalLogarithm=B.ln=function(){return ee(this)};B.negated=B.neg=function(){var r=new this.constructor(this);return r.s=-r.s,H(r)};B.plus=B.add=function(r){var e,n,t,i,s,c,h,v,p,o,a=this,u=a.constructor;if(r=new u(r),!a.d||!r.d)return!a.s||!r.s?r=new u(NaN):a.d||(r=new u(r.d||a.s===r.s?a:NaN)),r;if(a.s!=r.s)return r.s=-r.s,a.minus(r);if(p=a.d,o=r.d,h=u.precision,v=u.rounding,!p[0]||!o[0])return o[0]||(r=new u(a)),Q?H(r,h,v):r;if(s=Ar(a.e/Y),t=Ar(r.e/Y),p=p.slice(),i=s-t,i){for(i<0?(n=p,i=-i,c=o.length):(n=o,t=s,c=p.length),s=Math.ceil(h/Y),c=s>c?s+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=p.length,i=o.length,c-i<0&&(i=c,n=o,o=p,p=n),e=0;i;)e=(p[--i]=p[i]+o[i]+e)/Ur|0,p[i]%=Ur;for(e&&(p.unshift(e),++t),c=p.length;p[--c]==0;)p.pop();return r.d=p,r.e=Le(p,t),Q?H(r,h,v):r};B.precision=B.sd=function(r){var e,n=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(te+r);return n.d?(e=An(n.d),r&&n.e+1>e&&(e=n.e+1)):e=NaN,e};B.round=function(){var r=this,e=r.constructor;return H(new e(r),r.e+1,e.rounding)};B.sine=B.sin=function(){var r,e,n=this,t=n.constructor;return n.isFinite()?n.isZero()?new t(n):(r=t.precision,e=t.rounding,t.precision=r+Math.max(n.e,n.sd())+Y,t.rounding=1,n=Sa(t,Fn(t,n)),t.precision=r,t.rounding=e,H(Qr>2?n.neg():n,r,e,!0)):new t(NaN)};B.squareRoot=B.sqrt=function(){var r,e,n,t,i,s,c=this,h=c.d,v=c.e,p=c.s,o=c.constructor;if(p!==1||!h||!h[0])return new o(!p||p<0&&(!h||h[0])?NaN:h?c:1/0);for(Q=!1,p=Math.sqrt(+c),p==0||p==1/0?(e=xr(h),(e.length+v)%2==0&&(e+="0"),p=Math.sqrt(e),v=Ar((v+1)/2)-(v<0||v%2),p==1/0?e="5e"+v:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+v),t=new o(e)):t=new o(p.toString()),n=(v=o.precision)+3;;)if(s=t,t=s.plus(ar(c,s,n+2,1)).times(.5),xr(s.d).slice(0,n)===(e=xr(t.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(H(s,v+1,0),s.times(s).eq(c))){t=s;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(H(t,v+1,1),r=!t.times(t).eq(c));break}return Q=!0,H(t,v,o.rounding,r)};B.tangent=B.tan=function(){var r,e,n=this,t=n.constructor;return n.isFinite()?n.isZero()?new t(n):(r=t.precision,e=t.rounding,t.precision=r+10,t.rounding=1,n=n.sin(),n.s=1,n=ar(n,new t(1).minus(n.times(n)).sqrt(),r+10,0),t.precision=r,t.rounding=e,H(Qr==2||Qr==4?n.neg():n,r,e,!0)):new t(NaN)};B.times=B.mul=function(r){var e,n,t,i,s,c,h,v,p,o=this,a=o.constructor,u=o.d,l=(r=new a(r)).d;if(r.s*=o.s,!u||!u[0]||!l||!l[0])return new a(!r.s||u&&!u[0]&&!l||l&&!l[0]&&!u?NaN:!u||!l?r.s/0:r.s*0);for(n=Ar(o.e/Y)+Ar(r.e/Y),v=u.length,p=l.length,v<p&&(s=u,u=l,l=s,c=v,v=p,p=c),s=[],c=v+p,t=c;t--;)s.push(0);for(t=p;--t>=0;){for(e=0,i=v+t;i>t;)h=s[i]+l[t]*u[i-t-1]+e,s[i--]=h%Ur|0,e=h/Ur|0;s[i]=(s[i]+e)%Ur|0}for(;!s[--c];)s.pop();return e?++n:s.shift(),r.d=s,r.e=Le(s,n),Q?H(r,a.precision,a.rounding):r};B.toBinary=function(r,e){return pt(this,2,r,e)};B.toDecimalPlaces=B.toDP=function(r,e){var n=this,t=n.constructor;return n=new t(n),r===void 0?n:(Br(r,0,ne),e===void 0?e=t.rounding:Br(e,0,8),H(n,r+n.e+1,e))};B.toExponential=function(r,e){var n,t=this,i=t.constructor;return r===void 0?n=Jr(t,!0):(Br(r,0,ne),e===void 0?e=i.rounding:Br(e,0,8),t=H(new i(t),r+1,e),n=Jr(t,!0,r+1)),t.isNeg()&&!t.isZero()?"-"+n:n};B.toFixed=function(r,e){var n,t,i=this,s=i.constructor;return r===void 0?n=Jr(i):(Br(r,0,ne),e===void 0?e=s.rounding:Br(e,0,8),t=H(new s(i),r+i.e+1,e),n=Jr(t,!1,r+t.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};B.toFraction=function(r){var e,n,t,i,s,c,h,v,p,o,a,u,l=this,d=l.d,f=l.constructor;if(!d)return new f(l);if(p=n=new f(1),t=v=new f(0),e=new f(t),s=e.e=An(d)-l.e-1,c=s%Y,e.d[0]=Nr(10,c<0?Y+c:c),r==null)r=s>0?e:p;else{if(h=new f(r),!h.isInt()||h.lt(p))throw Error(te+h);r=h.gt(e)?s>0?e:p:h}for(Q=!1,h=new f(xr(d)),o=f.precision,f.precision=s=d.length*Y*2;a=ar(h,e,0,1,1),i=n.plus(a.times(t)),i.cmp(r)!=1;)n=t,t=i,i=p,p=v.plus(a.times(i)),v=i,i=e,e=h.minus(a.times(i)),h=i;return i=ar(r.minus(n),t,0,1,1),v=v.plus(i.times(p)),n=n.plus(i.times(t)),v.s=p.s=l.s,u=ar(p,t,s,1).minus(l).abs().cmp(ar(v,n,s,1).minus(l).abs())<1?[p,t]:[v,n],f.precision=o,Q=!0,u};B.toHexadecimal=B.toHex=function(r,e){return pt(this,16,r,e)};B.toNearest=function(r,e){var n=this,t=n.constructor;if(n=new t(n),r==null){if(!n.d)return n;r=new t(1),e=t.rounding}else{if(r=new t(r),e===void 0?e=t.rounding:Br(e,0,8),!n.d)return r.s?n:r;if(!r.d)return r.s&&(r.s=n.s),r}return r.d[0]?(Q=!1,n=ar(n,r,0,e,1).times(r),Q=!0,H(n)):(r.s=n.s,n=r),n};B.toNumber=function(){return+this};B.toOctal=function(r,e){return pt(this,8,r,e)};B.toPower=B.pow=function(r){var e,n,t,i,s,c,h=this,v=h.constructor,p=+(r=new v(r));if(!h.d||!r.d||!h.d[0]||!r.d[0])return new v(Nr(+h,p));if(h=new v(h),h.eq(1))return h;if(t=v.precision,s=v.rounding,r.eq(1))return H(h,t,s);if(e=Ar(r.e/Y),e>=r.d.length-1&&(n=p<0?-p:p)<=ba)return i=Cn(v,h,n,t),r.s<0?new v(1).div(i):H(i,t,s);if(c=h.s,c<0){if(e<r.d.length-1)return new v(NaN);if((r.d[e]&1)==0&&(c=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=c,h}return n=Nr(+h,p),e=n==0||!isFinite(n)?Ar(p*(Math.log("0."+xr(h.d))/Math.LN10+h.e+1)):new v(n+"").e,e>v.maxE+1||e<v.minE-1?new v(e>0?c/0:0):(Q=!1,v.rounding=h.s=1,n=Math.min(12,(e+"").length),i=at(r.times(ee(h,t+n)),t),i.d&&(i=H(i,t+5,1),be(i.d,t,s)&&(e=t+10,i=H(at(r.times(ee(h,e+n)),e),e+5,1),+xr(i.d).slice(t+1,t+15)+1==1e14&&(i=H(i,t+1,0)))),i.s=c,Q=!0,v.rounding=s,H(i,t,s))};B.toPrecision=function(r,e){var n,t=this,i=t.constructor;return r===void 0?n=Jr(t,t.e<=i.toExpNeg||t.e>=i.toExpPos):(Br(r,1,ne),e===void 0?e=i.rounding:Br(e,0,8),t=H(new i(t),r,e),n=Jr(t,r<=t.e||t.e<=i.toExpNeg,r)),t.isNeg()&&!t.isZero()?"-"+n:n};B.toSignificantDigits=B.toSD=function(r,e){var n=this,t=n.constructor;return r===void 0?(r=t.precision,e=t.rounding):(Br(r,1,ne),e===void 0?e=t.rounding:Br(e,0,8)),H(new t(n),r,e)};B.toString=function(){var r=this,e=r.constructor,n=Jr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+n:n};B.truncated=B.trunc=function(){return H(new this.constructor(this),this.e+1,1)};B.valueOf=B.toJSON=function(){var r=this,e=r.constructor,n=Jr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+n:n};function xr(r){var e,n,t,i=r.length-1,s="",c=r[0];if(i>0){for(s+=c,e=1;e<i;e++)t=r[e]+"",n=Y-t.length,n&&(s+=re(n)),s+=t;c=r[e],t=c+"",n=Y-t.length,n&&(s+=re(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}function Br(r,e,n){if(r!==~~r||r<e||r>n)throw Error(te+r)}function be(r,e,n,t){var i,s,c,h;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=Y,i=0):(i=Math.ceil((e+1)/Y),e%=Y),s=Nr(10,Y-e),h=r[i]%s|0,t==null?e<3?(e==0?h=h/100|0:e==1&&(h=h/10|0),c=n<4&&h==99999||n>3&&h==49999||h==5e4||h==0):c=(n<4&&h+1==s||n>3&&h+1==s/2)&&(r[i+1]/s/100|0)==Nr(10,e-2)-1||(h==s/2||h==0)&&(r[i+1]/s/100|0)==0:e<4?(e==0?h=h/1e3|0:e==1?h=h/100|0:e==2&&(h=h/10|0),c=(t||n<4)&&h==9999||!t&&n>3&&h==4999):c=((t||n<4)&&h+1==s||!t&&n>3&&h+1==s/2)&&(r[i+1]/s/1e3|0)==Nr(10,e-3)-1,c}function Ae(r,e,n){for(var t,i=[0],s,c=0,h=r.length;c<h;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=tt.indexOf(r.charAt(c++)),t=0;t<i.length;t++)i[t]>n-1&&(i[t+1]===void 0&&(i[t+1]=0),i[t+1]+=i[t]/n|0,i[t]%=n)}return i.reverse()}function xa(r,e){var n,t,i;if(e.isZero())return e;t=e.d.length,t<32?(n=Math.ceil(t/3),i=(1/We(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),r.precision+=n,e=me(r,1,e.times(i),new r(1));for(var s=n;s--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return r.precision-=n,e}var ar=function(){function r(t,i,s){var c,h=0,v=t.length;for(t=t.slice();v--;)c=t[v]*i+h,t[v]=c%s|0,h=c/s|0;return h&&t.unshift(h),t}function e(t,i,s,c){var h,v;if(s!=c)v=s>c?1:-1;else for(h=v=0;h<s;h++)if(t[h]!=i[h]){v=t[h]>i[h]?1:-1;break}return v}function n(t,i,s,c){for(var h=0;s--;)t[s]-=h,h=t[s]<i[s]?1:0,t[s]=h*c+t[s]-i[s];for(;!t[0]&&t.length>1;)t.shift()}return function(t,i,s,c,h,v){var p,o,a,u,l,d,f,m,w,x,g,b,M,y,E,_,S,D,z,T,U=t.constructor,I=t.s==i.s?1:-1,P=t.d,O=i.d;if(!P||!P[0]||!O||!O[0])return new U(!t.s||!i.s||(P?O&&P[0]==O[0]:!O)?NaN:P&&P[0]==0||!O?I*0:I/0);for(v?(l=1,o=t.e-i.e):(v=Ur,l=Y,o=Ar(t.e/l)-Ar(i.e/l)),z=O.length,S=P.length,w=new U(I),x=w.d=[],a=0;O[a]==(P[a]||0);a++);if(O[a]>(P[a]||0)&&o--,s==null?(y=s=U.precision,c=U.rounding):h?y=s+(t.e-i.e)+1:y=s,y<0)x.push(1),d=!0;else{if(y=y/l+2|0,a=0,z==1){for(u=0,O=O[0],y++;(a<S||u)&&y--;a++)E=u*v+(P[a]||0),x[a]=E/O|0,u=E%O|0;d=u||a<S}else{for(u=v/(O[0]+1)|0,u>1&&(O=r(O,u,v),P=r(P,u,v),z=O.length,S=P.length),_=z,g=P.slice(0,z),b=g.length;b<z;)g[b++]=0;T=O.slice(),T.unshift(0),D=O[0],O[1]>=v/2&&++D;do u=0,p=e(O,g,z,b),p<0?(M=g[0],z!=b&&(M=M*v+(g[1]||0)),u=M/D|0,u>1?(u>=v&&(u=v-1),f=r(O,u,v),m=f.length,b=g.length,p=e(f,g,m,b),p==1&&(u--,n(f,z<m?T:O,m,v))):(u==0&&(p=u=1),f=O.slice()),m=f.length,m<b&&f.unshift(0),n(g,f,b,v),p==-1&&(b=g.length,p=e(O,g,z,b),p<1&&(u++,n(g,z<b?T:O,b,v))),b=g.length):p===0&&(u++,g=[0]),x[a++]=u,p&&g[0]?g[b++]=P[_]||0:(g=[P[_]],b=1);while((_++<S||g[0]!==void 0)&&y--);d=g[0]!==void 0}x[0]||x.shift()}if(l==1)w.e=o,bn=d;else{for(a=1,u=x[0];u>=10;u/=10)a++;w.e=a+o*l-1,H(w,h?s+w.e+1:s,c,d)}return w}}();function H(r,e,n,t){var i,s,c,h,v,p,o,a,u,l=r.constructor;r:if(e!=null){if(a=r.d,!a)return r;for(i=1,h=a[0];h>=10;h/=10)i++;if(s=e-i,s<0)s+=Y,c=e,o=a[u=0],v=o/Nr(10,i-c-1)%10|0;else if(u=Math.ceil((s+1)/Y),h=a.length,u>=h)if(t){for(;h++<=u;)a.push(0);o=v=0,i=1,s%=Y,c=s-Y+1}else break r;else{for(o=h=a[u],i=1;h>=10;h/=10)i++;s%=Y,c=s-Y+i,v=c<0?0:o/Nr(10,i-c-1)%10|0}if(t=t||e<0||a[u+1]!==void 0||(c<0?o:o%Nr(10,i-c-1)),p=n<4?(v||t)&&(n==0||n==(r.s<0?3:2)):v>5||v==5&&(n==4||t||n==6&&(s>0?c>0?o/Nr(10,i-c):0:a[u-1])%10&1||n==(r.s<0?8:7)),e<1||!a[0])return a.length=0,p?(e-=r.e+1,a[0]=Nr(10,(Y-e%Y)%Y),r.e=-e||0):a[0]=r.e=0,r;if(s==0?(a.length=u,h=1,u--):(a.length=u+1,h=Nr(10,Y-s),a[u]=c>0?(o/Nr(10,i-c)%Nr(10,c)|0)*h:0),p)for(;;)if(u==0){for(s=1,c=a[0];c>=10;c/=10)s++;for(c=a[0]+=h,h=1;c>=10;c/=10)h++;s!=h&&(r.e++,a[0]==Ur&&(a[0]=1));break}else{if(a[u]+=h,a[u]!=Ur)break;a[u--]=0,h=1}for(s=a.length;a[--s]===0;)a.pop()}return Q&&(r.e>l.maxE?(r.d=null,r.e=NaN):r.e<l.minE&&(r.e=0,r.d=[0])),r}function Jr(r,e,n){if(!r.isFinite())return On(r);var t,i=r.e,s=xr(r.d),c=s.length;return e?(n&&(t=n-c)>0?s=s.charAt(0)+"."+s.slice(1)+re(t):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):i<0?(s="0."+re(-i-1)+s,n&&(t=n-c)>0&&(s+=re(t))):i>=c?(s+=re(i+1-c),n&&(t=n-i-1)>0&&(s=s+"."+re(t))):((t=i+1)<c&&(s=s.slice(0,t)+"."+s.slice(t)),n&&(t=n-c)>0&&(i+1===c&&(s+="."),s+=re(t))),s}function Le(r,e){var n=r[0];for(e*=Y;n>=10;n/=10)e++;return e}function Ie(r,e,n){if(e>_a)throw Q=!0,n&&(r.precision=n),Error(_n);return H(new r(ze),e,1,!0)}function Rr(r,e,n){if(e>it)throw Error(_n);return H(new r(Be),e,n,!0)}function An(r){var e=r.length-1,n=e*Y+1;if(e=r[e],e){for(;e%10==0;e/=10)n--;for(e=r[0];e>=10;e/=10)n++}return n}function re(r){for(var e="";r--;)e+="0";return e}function Cn(r,e,n,t){var i,s=new r(1),c=Math.ceil(t/Y+4);for(Q=!1;;){if(n%2&&(s=s.times(e),zt(s.d,c)&&(i=!0)),n=Ar(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}e=e.times(e),zt(e.d,c)}return Q=!0,s}function Ft(r){return r.d[r.d.length-1]&1}function Dn(r,e,n){for(var t,i=new r(e[0]),s=0;++s<e.length;)if(t=new r(e[s]),t.s)i[n](t)&&(i=t);else{i=t;break}return i}function at(r,e){var n,t,i,s,c,h,v,p=0,o=0,a=0,u=r.constructor,l=u.rounding,d=u.precision;if(!r.d||!r.d[0]||r.e>17)return new u(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:0/0);for(e==null?(Q=!1,v=d):v=e,h=new u(.03125);r.e>-2;)r=r.times(h),a+=5;for(t=Math.log(Nr(2,a))/Math.LN10*2+5|0,v+=t,n=s=c=new u(1),u.precision=v;;){if(s=H(s.times(r),v,1),n=n.times(++o),h=c.plus(ar(s,n,v,1)),xr(h.d).slice(0,v)===xr(c.d).slice(0,v)){for(i=a;i--;)c=H(c.times(c),v,1);if(e==null)if(p<3&&be(c.d,v-t,l,p))u.precision=v+=10,n=s=h=new u(1),o=0,p++;else return H(c,u.precision=d,l,Q=!0);else return u.precision=d,c}c=h}}function ee(r,e){var n,t,i,s,c,h,v,p,o,a,u,l=1,d=10,f=r,m=f.d,w=f.constructor,x=w.rounding,g=w.precision;if(f.s<0||!m||!m[0]||!f.e&&m[0]==1&&m.length==1)return new w(m&&!m[0]?-1/0:f.s!=1?NaN:m?0:f);if(e==null?(Q=!1,o=g):o=e,w.precision=o+=d,n=xr(m),t=n.charAt(0),Math.abs(s=f.e)<15e14){for(;t<7&&t!=1||t==1&&n.charAt(1)>3;)f=f.times(r),n=xr(f.d),t=n.charAt(0),l++;s=f.e,t>1?(f=new w("0."+n),s++):f=new w(t+"."+n.slice(1))}else return p=Ie(w,o+2,g).times(s+""),f=ee(new w(t+"."+n.slice(1)),o-d).plus(p),w.precision=g,e==null?H(f,g,x,Q=!0):f;for(a=f,v=c=f=ar(f.minus(1),f.plus(1),o,1),u=H(f.times(f),o,1),i=3;;){if(c=H(c.times(u),o,1),p=v.plus(ar(c,new w(i),o,1)),xr(p.d).slice(0,o)===xr(v.d).slice(0,o))if(v=v.times(2),s!==0&&(v=v.plus(Ie(w,o+2,g).times(s+""))),v=ar(v,new w(l),o,1),e==null)if(be(v.d,o-d,x,h))w.precision=o+=d,p=c=f=ar(a.minus(1),a.plus(1),o,1),u=H(f.times(f),o,1),i=h=1;else return H(v,w.precision=g,x,Q=!0);else return w.precision=g,v;v=p,i+=2}}function On(r){return String(r.s*r.s/0)}function ot(r,e){var n,t,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(t=e.search(/e/i))>0?(n<0&&(n=t),n+=+e.slice(t+1),e=e.substring(0,t)):n<0&&(n=e.length),t=0;e.charCodeAt(t)===48;t++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(t,i),e){if(i-=t,r.e=n=n-t-1,r.d=[],t=(n+1)%Y,n<0&&(t+=Y),t<i){for(t&&r.d.push(+e.slice(0,t)),i-=Y;t<i;)r.d.push(+e.slice(t,t+=Y));e=e.slice(t),t=Y-e.length}else t-=i;for(;t--;)e+="0";r.d.push(+e),Q&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function Ea(r,e){var n,t,i,s,c,h,v,p,o;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Sn.test(e))return ot(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(Ma.test(e))n=16,e=e.toLowerCase();else if(ya.test(e))n=2;else if(Na.test(e))n=8;else throw Error(te+e);for(s=e.search(/p/i),s>0?(v=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),c=s>=0,t=r.constructor,c&&(e=e.replace(".",""),h=e.length,s=h-s,i=Cn(t,new t(n),s,s*2)),p=Ae(e,n,Ur),o=p.length-1,s=o;p[s]===0;--s)p.pop();return s<0?new t(r.s*0):(r.e=Le(p,o),r.d=p,Q=!1,c&&(r=ar(r,i,h*4)),v&&(r=r.times(Math.abs(v)<54?Nr(2,v):ge.pow(2,v))),Q=!0,r)}function Sa(r,e){var n,t=e.d.length;if(t<3)return e.isZero()?e:me(r,2,e,e);n=1.4*Math.sqrt(t),n=n>16?16:n|0,e=e.times(1/We(5,n)),e=me(r,2,e,e);for(var i,s=new r(5),c=new r(16),h=new r(20);n--;)i=e.times(e),e=e.times(s.plus(i.times(c.times(i).minus(h))));return e}function me(r,e,n,t,i){var s,c,h,v,p=r.precision,o=Math.ceil(p/Y);for(Q=!1,v=n.times(n),h=new r(t);;){if(c=ar(h.times(v),new r(e++*e++),p,1),h=i?t.plus(c):t.minus(c),t=ar(c.times(v),new r(e++*e++),p,1),c=h.plus(t),c.d[o]!==void 0){for(s=o;c.d[s]===h.d[s]&&s--;);if(s==-1)break}s=h,h=t,t=c,c=s}return Q=!0,c.d.length=o+1,c}function We(r,e){for(var n=r;--e;)n*=r;return n}function Fn(r,e){var n,t=e.s<0,i=Rr(r,r.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return Qr=t?4:1,e;if(n=e.divToInt(i),n.isZero())Qr=t?3:2;else{if(e=e.minus(n.times(i)),e.lte(s))return Qr=Ft(n)?t?2:3:t?4:1,e;Qr=Ft(n)?t?1:4:t?3:2}return e.minus(i).abs()}function pt(r,e,n,t){var i,s,c,h,v,p,o,a,u,l=r.constructor,d=n!==void 0;if(d?(Br(n,1,ne),t===void 0?t=l.rounding:Br(t,0,8)):(n=l.precision,t=l.rounding),!r.isFinite())o=On(r);else{for(o=Jr(r),c=o.indexOf("."),d?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,c>=0&&(o=o.replace(".",""),u=new l(1),u.e=o.length-c,u.d=Ae(Jr(u),10,i),u.e=u.d.length),a=Ae(o,10,i),s=v=a.length;a[--v]==0;)a.pop();if(!a[0])o=d?"0p+0":"0";else{if(c<0?s--:(r=new l(r),r.d=a,r.e=s,r=ar(r,u,n,t,0,i),a=r.d,s=r.e,p=bn),c=a[n],h=i/2,p=p||a[n+1]!==void 0,p=t<4?(c!==void 0||p)&&(t===0||t===(r.s<0?3:2)):c>h||c===h&&(t===4||p||t===6&&a[n-1]&1||t===(r.s<0?8:7)),a.length=n,p)for(;++a[--n]>i-1;)a[n]=0,n||(++s,a.unshift(1));for(v=a.length;!a[v-1];--v);for(c=0,o="";c<v;c++)o+=tt.charAt(a[c]);if(d){if(v>1)if(e==16||e==8){for(c=e==16?4:3,--v;v%c;v++)o+="0";for(a=Ae(o,i,e),v=a.length;!a[v-1];--v);for(c=1,o="1.";c<v;c++)o+=tt.charAt(a[c])}else o=o.charAt(0)+"."+o.slice(1);o=o+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)o="0"+o;o="0."+o}else if(++s>v)for(s-=v;s--;)o+="0";else s<v&&(o=o.slice(0,s)+"."+o.slice(s))}o=(e==16?"0x":e==2?"0b":e==8?"0o":"")+o}return r.s<0?"-"+o:o}function zt(r,e){if(r.length>e)return r.length=e,!0}function Aa(r){return new this(r).abs()}function Ca(r){return new this(r).acos()}function Da(r){return new this(r).acosh()}function Oa(r,e){return new this(r).plus(e)}function Fa(r){return new this(r).asin()}function za(r){return new this(r).asinh()}function Ba(r){return new this(r).atan()}function Ia(r){return new this(r).atanh()}function Ta(r,e){r=new this(r),e=new this(e);var n,t=this.precision,i=this.rounding,s=t+4;return!r.s||!e.s?n=new this(NaN):!r.d&&!e.d?(n=Rr(this,s,1).times(e.s>0?.25:.75),n.s=r.s):!e.d||r.isZero()?(n=e.s<0?Rr(this,t,i):new this(0),n.s=r.s):!r.d||e.isZero()?(n=Rr(this,s,1).times(.5),n.s=r.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(ar(r,e,s,1)),e=Rr(this,s,1),this.precision=t,this.rounding=i,n=r.s<0?n.minus(e):n.plus(e)):n=this.atan(ar(r,e,s,1)),n}function Pa(r){return new this(r).cbrt()}function $a(r){return H(r=new this(r),r.e+1,2)}function qa(r,e,n){return new this(r).clamp(e,n)}function Ra(r){if(!r||typeof r!="object")throw Error(Ue+"Object expected");var e,n,t,i=r.defaults===!0,s=["precision",1,ne,"rounding",0,8,"toExpNeg",-he,0,"toExpPos",0,he,"maxE",0,he,"minE",-he,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],i&&(this[n]=nt[n]),(t=r[n])!==void 0)if(Ar(t)===t&&t>=s[e+1]&&t<=s[e+2])this[n]=t;else throw Error(te+n+": "+t);if(n="crypto",i&&(this[n]=nt[n]),(t=r[n])!==void 0)if(t===!0||t===!1||t===0||t===1)if(t)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(xn);else this[n]=!1;else throw Error(te+n+": "+t);return this}function Ua(r){return new this(r).cos()}function La(r){return new this(r).cosh()}function zn(r){var e,n,t;function i(s){var c,h,v,p=this;if(!(p instanceof i))return new i(s);if(p.constructor=i,Bt(s)){p.s=s.s,Q?!s.d||s.e>i.maxE?(p.e=NaN,p.d=null):s.e<i.minE?(p.e=0,p.d=[0]):(p.e=s.e,p.d=s.d.slice()):(p.e=s.e,p.d=s.d?s.d.slice():s.d);return}if(v=typeof s,v==="number"){if(s===0){p.s=1/s<0?-1:1,p.e=0,p.d=[0];return}if(s<0?(s=-s,p.s=-1):p.s=1,s===~~s&&s<1e7){for(c=0,h=s;h>=10;h/=10)c++;Q?c>i.maxE?(p.e=NaN,p.d=null):c<i.minE?(p.e=0,p.d=[0]):(p.e=c,p.d=[s]):(p.e=c,p.d=[s]);return}else if(s*0!==0){s||(p.s=NaN),p.e=NaN,p.d=null;return}return ot(p,s.toString())}else if(v!=="string")throw Error(te+s);return(h=s.charCodeAt(0))===45?(s=s.slice(1),p.s=-1):(h===43&&(s=s.slice(1)),p.s=1),Sn.test(s)?ot(p,s):Ea(p,s)}if(i.prototype=B,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Ra,i.clone=zn,i.isDecimal=Bt,i.abs=Aa,i.acos=Ca,i.acosh=Da,i.add=Oa,i.asin=Fa,i.asinh=za,i.atan=Ba,i.atanh=Ia,i.atan2=Ta,i.cbrt=Pa,i.ceil=$a,i.clamp=qa,i.cos=Ua,i.cosh=La,i.div=Wa,i.exp=Za,i.floor=Va,i.hypot=Ha,i.ln=Ja,i.log=Ya,i.log10=Xa,i.log2=Ga,i.max=Ka,i.min=Qa,i.mod=ja,i.mul=ka,i.pow=ro,i.random=eo,i.round=to,i.sign=no,i.sin=io,i.sinh=ao,i.sqrt=oo,i.sub=so,i.sum=uo,i.tan=fo,i.tanh=co,i.trunc=lo,r===void 0&&(r={}),r&&r.defaults!==!0)for(t=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<t.length;)r.hasOwnProperty(n=t[e++])||(r[n]=this[n]);return i.config(r),i}function Wa(r,e){return new this(r).div(e)}function Za(r){return new this(r).exp()}function Va(r){return H(r=new this(r),r.e+1,3)}function Ha(){var r,e,n=new this(0);for(Q=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Q=!0,new this(1/0);n=e}return Q=!0,n.sqrt()}function Bt(r){return r instanceof ge||r&&r.toStringTag===En||!1}function Ja(r){return new this(r).ln()}function Ya(r,e){return new this(r).log(e)}function Ga(r){return new this(r).log(2)}function Xa(r){return new this(r).log(10)}function Ka(){return Dn(this,arguments,"lt")}function Qa(){return Dn(this,arguments,"gt")}function ja(r,e){return new this(r).mod(e)}function ka(r,e){return new this(r).mul(e)}function ro(r,e){return new this(r).pow(e)}function eo(r){var e,n,t,i,s=0,c=new this(1),h=[];if(r===void 0?r=this.precision:Br(r,1,ne),t=Math.ceil(r/Y),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(t));s<t;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:h[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(t*=4);s<t;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(h.push(i%1e7),s+=4);s=t/4}else throw Error(xn);else for(;s<t;)h[s++]=Math.random()*1e7|0;for(t=h[--s],r%=Y,t&&r&&(i=Nr(10,Y-r),h[s]=(t/i|0)*i);h[s]===0;s--)h.pop();if(s<0)n=0,h=[0];else{for(n=-1;h[0]===0;n-=Y)h.shift();for(t=1,i=h[0];i>=10;i/=10)t++;t<Y&&(n-=Y-t)}return c.e=n,c.d=h,c}function to(r){return H(r=new this(r),r.e+1,this.rounding)}function no(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function io(r){return new this(r).sin()}function ao(r){return new this(r).sinh()}function oo(r){return new this(r).sqrt()}function so(r,e){return new this(r).sub(e)}function uo(){var r=0,e=arguments,n=new this(e[r]);for(Q=!1;n.s&&++r<e.length;)n=n.plus(e[r]);return Q=!0,H(n,this.precision,this.rounding)}function fo(r){return new this(r).tan()}function co(r){return new this(r).tanh()}function lo(r){return H(r=new this(r),r.e+1,1)}B[Symbol.for("nodejs.util.inspect.custom")]=B.toString;B[Symbol.toStringTag]="Decimal";var ge=B.constructor=zn(nt);ze=new ge(ze);Be=new ge(Be);var ho="BigNumber",vo=["?on","config"],po=K(ho,vo,r=>{var{on:e,config:n}=r,t=ge.clone({precision:n.precision,modulo:ge.EUCLID});return t.prototype=Object.create(t.prototype),t.prototype.type="BigNumber",t.prototype.isBigNumber=!0,t.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},t.fromJSON=function(i){return new t(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&t.config({precision:i.precision})}),t},{isClass:!0}),Bn={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(n){var t=Math.cosh||function(a){return Math.abs(a)<1e-9?1-a:(Math.exp(a)+Math.exp(-a))*.5},i=Math.sinh||function(a){return Math.abs(a)<1e-9?a:(Math.exp(a)-Math.exp(-a))*.5},s=function(a){var u=Math.PI/4;if(-u>a||a>u)return Math.cos(a)-1;var l=a*a;return l*(l*(l*(l*(l*(l*(l*(l/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},c=function(a,u){var l=Math.abs(a),d=Math.abs(u);return l<3e3&&d<3e3?Math.sqrt(l*l+d*d):(l<d?(l=d,d=a/u):d=u/a,l*Math.sqrt(1+d*d))},h=function(){throw SyntaxError("Invalid Param")};function v(a,u){var l=Math.abs(a),d=Math.abs(u);return a===0?Math.log(d):u===0?Math.log(l):l<3e3&&d<3e3?Math.log(a*a+u*u)*.5:(a=a/2,u=u/2,.5*Math.log(a*a+u*u)+Math.LN2)}var p=function(a,u){var l={re:0,im:0};if(a==null)l.re=l.im=0;else if(u!==void 0)l.re=a,l.im=u;else switch(typeof a){case"object":if("im"in a&&"re"in a)l.re=a.re,l.im=a.im;else if("abs"in a&&"arg"in a){if(!Number.isFinite(a.abs)&&Number.isFinite(a.arg))return o.INFINITY;l.re=a.abs*Math.cos(a.arg),l.im=a.abs*Math.sin(a.arg)}else if("r"in a&&"phi"in a){if(!Number.isFinite(a.r)&&Number.isFinite(a.phi))return o.INFINITY;l.re=a.r*Math.cos(a.phi),l.im=a.r*Math.sin(a.phi)}else a.length===2?(l.re=a[0],l.im=a[1]):h();break;case"string":l.im=l.re=0;var d=a.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),f=1,m=0;d===null&&h();for(var w=0;w<d.length;w++){var x=d[w];x===" "||x==="	"||x===`
`||(x==="+"?f++:x==="-"?m++:x==="i"||x==="I"?(f+m===0&&h(),d[w+1]!==" "&&!isNaN(d[w+1])?(l.im+=parseFloat((m%2?"-":"")+d[w+1]),w++):l.im+=parseFloat((m%2?"-":"")+"1"),f=m=0):((f+m===0||isNaN(x))&&h(),d[w+1]==="i"||d[w+1]==="I"?(l.im+=parseFloat((m%2?"-":"")+x),w++):l.re+=parseFloat((m%2?"-":"")+x),f=m=0))}f+m>0&&h();break;case"number":l.im=0,l.re=a;break;default:h()}return isNaN(l.re)||isNaN(l.im),l};function o(a,u){if(!(this instanceof o))return new o(a,u);var l=p(a,u);this.re=l.re,this.im=l.im}o.prototype={re:0,im:0,sign:function(){var a=this.abs();return new o(this.re/a,this.im/a)},add:function(a,u){var l=new o(a,u);return this.isInfinite()&&l.isInfinite()?o.NAN:this.isInfinite()||l.isInfinite()?o.INFINITY:new o(this.re+l.re,this.im+l.im)},sub:function(a,u){var l=new o(a,u);return this.isInfinite()&&l.isInfinite()?o.NAN:this.isInfinite()||l.isInfinite()?o.INFINITY:new o(this.re-l.re,this.im-l.im)},mul:function(a,u){var l=new o(a,u);return this.isInfinite()&&l.isZero()||this.isZero()&&l.isInfinite()?o.NAN:this.isInfinite()||l.isInfinite()?o.INFINITY:l.im===0&&this.im===0?new o(this.re*l.re,0):new o(this.re*l.re-this.im*l.im,this.re*l.im+this.im*l.re)},div:function(a,u){var l=new o(a,u);if(this.isZero()&&l.isZero()||this.isInfinite()&&l.isInfinite())return o.NAN;if(this.isInfinite()||l.isZero())return o.INFINITY;if(this.isZero()||l.isInfinite())return o.ZERO;a=this.re,u=this.im;var d=l.re,f=l.im,m,w;return f===0?new o(a/d,u/d):Math.abs(d)<Math.abs(f)?(w=d/f,m=d*w+f,new o((a*w+u)/m,(u*w-a)/m)):(w=f/d,m=f*w+d,new o((a+u*w)/m,(u-a*w)/m))},pow:function(a,u){var l=new o(a,u);if(a=this.re,u=this.im,l.isZero())return o.ONE;if(l.im===0){if(u===0&&a>0)return new o(Math.pow(a,l.re),0);if(a===0)switch((l.re%4+4)%4){case 0:return new o(Math.pow(u,l.re),0);case 1:return new o(0,Math.pow(u,l.re));case 2:return new o(-Math.pow(u,l.re),0);case 3:return new o(0,-Math.pow(u,l.re))}}if(a===0&&u===0&&l.re>0&&l.im>=0)return o.ZERO;var d=Math.atan2(u,a),f=v(a,u);return a=Math.exp(l.re*f-l.im*d),u=l.im*f+l.re*d,new o(a*Math.cos(u),a*Math.sin(u))},sqrt:function(){var a=this.re,u=this.im,l=this.abs(),d,f;if(a>=0){if(u===0)return new o(Math.sqrt(a),0);d=.5*Math.sqrt(2*(l+a))}else d=Math.abs(u)/Math.sqrt(2*(l-a));return a<=0?f=.5*Math.sqrt(2*(l-a)):f=Math.abs(u)/Math.sqrt(2*(l+a)),new o(d,u<0?-f:f)},exp:function(){var a=Math.exp(this.re);return this.im,new o(a*Math.cos(this.im),a*Math.sin(this.im))},expm1:function(){var a=this.re,u=this.im;return new o(Math.expm1(a)*Math.cos(u)+s(u),Math.exp(a)*Math.sin(u))},log:function(){var a=this.re,u=this.im;return new o(v(a,u),Math.atan2(u,a))},abs:function(){return c(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var a=this.re,u=this.im;return new o(Math.sin(a)*t(u),Math.cos(a)*i(u))},cos:function(){var a=this.re,u=this.im;return new o(Math.cos(a)*t(u),-Math.sin(a)*i(u))},tan:function(){var a=2*this.re,u=2*this.im,l=Math.cos(a)+t(u);return new o(Math.sin(a)/l,i(u)/l)},cot:function(){var a=2*this.re,u=2*this.im,l=Math.cos(a)-t(u);return new o(-Math.sin(a)/l,i(u)/l)},sec:function(){var a=this.re,u=this.im,l=.5*t(2*u)+.5*Math.cos(2*a);return new o(Math.cos(a)*t(u)/l,Math.sin(a)*i(u)/l)},csc:function(){var a=this.re,u=this.im,l=.5*t(2*u)-.5*Math.cos(2*a);return new o(Math.sin(a)*t(u)/l,-Math.cos(a)*i(u)/l)},asin:function(){var a=this.re,u=this.im,l=new o(u*u-a*a+1,-2*a*u).sqrt(),d=new o(l.re-u,l.im+a).log();return new o(d.im,-d.re)},acos:function(){var a=this.re,u=this.im,l=new o(u*u-a*a+1,-2*a*u).sqrt(),d=new o(l.re-u,l.im+a).log();return new o(Math.PI/2-d.im,d.re)},atan:function(){var a=this.re,u=this.im;if(a===0){if(u===1)return new o(0,1/0);if(u===-1)return new o(0,-1/0)}var l=a*a+(1-u)*(1-u),d=new o((1-u*u-a*a)/l,-2*a/l).log();return new o(-.5*d.im,.5*d.re)},acot:function(){var a=this.re,u=this.im;if(u===0)return new o(Math.atan2(1,a),0);var l=a*a+u*u;return l!==0?new o(a/l,-u/l).atan():new o(a!==0?a/0:0,u!==0?-u/0:0).atan()},asec:function(){var a=this.re,u=this.im;if(a===0&&u===0)return new o(0,1/0);var l=a*a+u*u;return l!==0?new o(a/l,-u/l).acos():new o(a!==0?a/0:0,u!==0?-u/0:0).acos()},acsc:function(){var a=this.re,u=this.im;if(a===0&&u===0)return new o(Math.PI/2,1/0);var l=a*a+u*u;return l!==0?new o(a/l,-u/l).asin():new o(a!==0?a/0:0,u!==0?-u/0:0).asin()},sinh:function(){var a=this.re,u=this.im;return new o(i(a)*Math.cos(u),t(a)*Math.sin(u))},cosh:function(){var a=this.re,u=this.im;return new o(t(a)*Math.cos(u),i(a)*Math.sin(u))},tanh:function(){var a=2*this.re,u=2*this.im,l=t(a)+Math.cos(u);return new o(i(a)/l,Math.sin(u)/l)},coth:function(){var a=2*this.re,u=2*this.im,l=t(a)-Math.cos(u);return new o(i(a)/l,-Math.sin(u)/l)},csch:function(){var a=this.re,u=this.im,l=Math.cos(2*u)-t(2*a);return new o(-2*i(a)*Math.cos(u)/l,2*t(a)*Math.sin(u)/l)},sech:function(){var a=this.re,u=this.im,l=Math.cos(2*u)+t(2*a);return new o(2*t(a)*Math.cos(u)/l,-2*i(a)*Math.sin(u)/l)},asinh:function(){var a=this.im;this.im=-this.re,this.re=a;var u=this.asin();return this.re=-this.im,this.im=a,a=u.re,u.re=-u.im,u.im=a,u},acosh:function(){var a=this.acos();if(a.im<=0){var u=a.re;a.re=-a.im,a.im=u}else{var u=a.im;a.im=-a.re,a.re=u}return a},atanh:function(){var a=this.re,u=this.im,l=a>1&&u===0,d=1-a,f=1+a,m=d*d+u*u,w=m!==0?new o((f*d-u*u)/m,(u*d+f*u)/m):new o(a!==-1?a/0:0,u!==0?u/0:0),x=w.re;return w.re=v(w.re,w.im)/2,w.im=Math.atan2(w.im,x)/2,l&&(w.im=-w.im),w},acoth:function(){var a=this.re,u=this.im;if(a===0&&u===0)return new o(0,Math.PI/2);var l=a*a+u*u;return l!==0?new o(a/l,-u/l).atanh():new o(a!==0?a/0:0,u!==0?-u/0:0).atanh()},acsch:function(){var a=this.re,u=this.im;if(u===0)return new o(a!==0?Math.log(a+Math.sqrt(a*a+1)):1/0,0);var l=a*a+u*u;return l!==0?new o(a/l,-u/l).asinh():new o(a!==0?a/0:0,u!==0?-u/0:0).asinh()},asech:function(){var a=this.re,u=this.im;if(this.isZero())return o.INFINITY;var l=a*a+u*u;return l!==0?new o(a/l,-u/l).acosh():new o(a!==0?a/0:0,u!==0?-u/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var a=this.re,u=this.im,l=a*a+u*u;return new o(a/l,-u/l)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(a){return a=Math.pow(10,a||0),new o(Math.ceil(this.re*a)/a,Math.ceil(this.im*a)/a)},floor:function(a){return a=Math.pow(10,a||0),new o(Math.floor(this.re*a)/a,Math.floor(this.im*a)/a)},round:function(a){return a=Math.pow(10,a||0),new o(Math.round(this.re*a)/a,Math.round(this.im*a)/a)},equals:function(a,u){var l=new o(a,u);return Math.abs(l.re-this.re)<=o.EPSILON&&Math.abs(l.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var a=this.re,u=this.im,l="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(a)<o.EPSILON&&(a=0),Math.abs(u)<o.EPSILON&&(u=0),u===0?l+a:(a!==0?(l+=a,l+=" ",u<0?(u=-u,l+="-"):l+="+",l+=" "):u<0&&(u=-u,l+="-"),u!==1&&(l+=u),l+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,r.exports=o})()})(Bn);var zr=yi(Bn.exports),mo="Complex",go=[],wo=K(mo,go,()=>(zr.prototype.type="Complex",zr.prototype.isComplex=!0,zr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},zr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},zr.prototype.format=function(r){var e="",n=this.im,t=this.re,i=rt(this.re,r),s=rt(this.im,r),c=vr(r)?r:r?r.precision:null;if(c!==null){var h=Math.pow(10,-c);Math.abs(t/n)<h&&(t=0),Math.abs(n/t)<h&&(n=0)}return n===0?e=i:t===0?n===1?e="i":n===-1?e="-i":e=s+"i":n<0?n===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+s+"i",e},zr.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return zr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],t=arguments[1];if(vr(n)){if(ct(t)&&t.hasBase("ANGLE")&&(t=t.toNumber("rad")),vr(t))return new zr({r:n,phi:t});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},zr.prototype.valueOf=zr.prototype.toString,zr.fromJSON=function(r){return new zr(r)},zr.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},zr),{isClass:!0});/**
 * @license Fraction.js v4.3.5 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var yo=2e3,Z={s:1,n:0,d:1};function Gr(r,e){if(isNaN(r=parseInt(r,10)))throw Ce();return r*e}function hr(r,e){if(e===0)throw dt();var n=Object.create(Ir.prototype);n.s=r<0?-1:1,r=r<0?-r:r;var t=ve(r,e);return n.n=r/t,n.d=e/t,n}function It(r){for(var e={},n=r,t=2,i=4;i<=n;){for(;n%t===0;)n/=t,e[t]=(e[t]||0)+1;i+=1+2*t++}return n!==r?n>1&&(e[n]=(e[n]||0)+1):e[r]=(e[r]||0)+1,e}var Pr=function(r,e){var n=0,t=1,i=1,s=0,c=0,h=0,v=1,p=1,o=0,a=1,u=1,l=1,d=1e7,f;if(r!=null)if(e!==void 0){if(n=r,t=e,i=n*t,n%1!==0||t%1!==0)throw _o()}else switch(typeof r){case"object":{if("d"in r&&"n"in r)n=r.n,t=r.d,"s"in r&&(n*=r.s);else if(0 in r)n=r[0],1 in r&&(t=r[1]);else throw Ce();i=n*t;break}case"number":{if(r<0&&(i=r,r=-r),r%1===0)n=r;else if(r>0){for(r>=1&&(p=Math.pow(10,Math.floor(1+Math.log(r)/Math.LN10)),r/=p);a<=d&&l<=d;)if(f=(o+u)/(a+l),r===f){a+l<=d?(n=o+u,t=a+l):l>a?(n=u,t=l):(n=o,t=a);break}else r>f?(o+=u,a+=l):(u+=o,l+=a),a>d?(n=u,t=l):(n=o,t=a);n*=p}else(isNaN(r)||isNaN(e))&&(t=n=NaN);break}case"string":{if(a=r.match(/\d+|./g),a===null)throw Ce();if(a[o]==="-"?(i=-1,o++):a[o]==="+"&&o++,a.length===o+1?c=Gr(a[o++],i):a[o+1]==="."||a[o]==="."?(a[o]!=="."&&(s=Gr(a[o++],i)),o++,(o+1===a.length||a[o+1]==="("&&a[o+3]===")"||a[o+1]==="'"&&a[o+3]==="'")&&(c=Gr(a[o],i),v=Math.pow(10,a[o].length),o++),(a[o]==="("&&a[o+2]===")"||a[o]==="'"&&a[o+2]==="'")&&(h=Gr(a[o+1],i),p=Math.pow(10,a[o+1].length)-1,o+=3)):a[o+1]==="/"||a[o+1]===":"?(c=Gr(a[o],i),v=Gr(a[o+2],1),o+=3):a[o+3]==="/"&&a[o+1]===" "&&(s=Gr(a[o],i),c=Gr(a[o+2],i),v=Gr(a[o+4],1),o+=5),a.length<=o){t=v*p,i=n=h+t*s+p*c;break}}default:throw Ce()}if(t===0)throw dt();Z.s=i<0?-1:1,Z.n=Math.abs(n),Z.d=Math.abs(t)};function Mo(r,e,n){for(var t=1;e>0;r=r*r%n,e>>=1)e&1&&(t=t*r%n);return t}function No(r,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var n=10%e,t=1;n!==1;t++)if(n=n*10%e,t>yo)return 0;return t}function bo(r,e,n){for(var t=1,i=Mo(10,n,e),s=0;s<300;s++){if(t===i)return s;t=t*10%e,i=i*10%e}return 0}function ve(r,e){if(!r)return e;if(!e)return r;for(;;){if(r%=e,!r)return e;if(e%=r,!e)return r}}function Ir(r,e){if(Pr(r,e),this instanceof Ir)r=ve(Z.d,Z.n),this.s=Z.s,this.n=Z.n/r,this.d=Z.d/r;else return hr(Z.s*Z.n,Z.d)}var dt=function(){return new Error("Division by Zero")},Ce=function(){return new Error("Invalid argument")},_o=function(){return new Error("Parameters must be integer")};Ir.prototype={s:1,n:0,d:1,abs:function(){return hr(this.n,this.d)},neg:function(){return hr(-this.s*this.n,this.d)},add:function(r,e){return Pr(r,e),hr(this.s*this.n*Z.d+Z.s*this.d*Z.n,this.d*Z.d)},sub:function(r,e){return Pr(r,e),hr(this.s*this.n*Z.d-Z.s*this.d*Z.n,this.d*Z.d)},mul:function(r,e){return Pr(r,e),hr(this.s*Z.s*this.n*Z.n,this.d*Z.d)},div:function(r,e){return Pr(r,e),hr(this.s*Z.s*this.n*Z.d,this.d*Z.n)},clone:function(){return hr(this.s*this.n,this.d)},mod:function(r,e){if(isNaN(this.n)||isNaN(this.d))return new Ir(NaN);if(r===void 0)return hr(this.s*this.n%this.d,1);if(Pr(r,e),Z.n===0&&this.d===0)throw dt();return hr(this.s*(Z.d*this.n)%(Z.n*this.d),Z.d*this.d)},gcd:function(r,e){return Pr(r,e),hr(ve(Z.n,this.n)*ve(Z.d,this.d),Z.d*this.d)},lcm:function(r,e){return Pr(r,e),Z.n===0&&this.n===0?hr(0,1):hr(Z.n*this.n,ve(Z.n,this.n)*ve(Z.d,this.d))},ceil:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Ir(NaN):hr(Math.ceil(r*this.s*this.n/this.d),r)},floor:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Ir(NaN):hr(Math.floor(r*this.s*this.n/this.d),r)},round:function(r){return r=Math.pow(10,r||0),isNaN(this.n)||isNaN(this.d)?new Ir(NaN):hr(Math.round(r*this.s*this.n/this.d),r)},inverse:function(){return hr(this.s*this.d,this.n)},pow:function(r,e){if(Pr(r,e),Z.d===1)return Z.s<0?hr(Math.pow(this.s*this.d,Z.n),Math.pow(this.n,Z.n)):hr(Math.pow(this.s*this.n,Z.n),Math.pow(this.d,Z.n));if(this.s<0)return null;var n=It(this.n),t=It(this.d),i=1,s=1;for(var c in n)if(c!=="1"){if(c==="0"){i=0;break}if(n[c]*=Z.n,n[c]%Z.d===0)n[c]/=Z.d;else return null;i*=Math.pow(c,n[c])}for(var c in t)if(c!=="1"){if(t[c]*=Z.n,t[c]%Z.d===0)t[c]/=Z.d;else return null;s*=Math.pow(c,t[c])}return Z.s<0?hr(s,i):hr(i,s)},equals:function(r,e){return Pr(r,e),this.s*this.n*Z.d===Z.s*Z.n*this.d},compare:function(r,e){Pr(r,e);var n=this.s*this.n*Z.d-Z.s*Z.n*this.d;return(0<n)-(n<0)},simplify:function(r){if(isNaN(this.n)||isNaN(this.d))return this;r=r||.001;for(var e=this.abs(),n=e.toContinued(),t=1;t<n.length;t++){for(var i=hr(n[t-1],1),s=t-2;s>=0;s--)i=i.inverse().add(n[s]);if(Math.abs(i.sub(e).valueOf())<r)return i.mul(this.s)}return this},divisible:function(r,e){return Pr(r,e),!(!(Z.n*this.d)||this.n*Z.d%(Z.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(r){var e,n="",t=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=t:(r&&(e=Math.floor(t/i))>0&&(n+=e,n+=" ",t%=i),n+=t,n+="/",n+=i),n},toLatex:function(r){var e,n="",t=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=t:(r&&(e=Math.floor(t/i))>0&&(n+=e,t%=i),n+="\\frac{",n+=t,n+="}{",n+=i,n+="}"),n},toContinued:function(){var r,e=this.n,n=this.d,t=[];if(isNaN(e)||isNaN(n))return t;do t.push(Math.floor(e/n)),r=e%n,e=n,n=r;while(e!==1);return t},toString:function(r){var e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";r=r||15;var t=No(e,n),i=bo(e,n,t),s=this.s<0?"-":"";if(s+=e/n|0,e%=n,e*=10,e&&(s+="."),t){for(var c=i;c--;)s+=e/n|0,e%=n,e*=10;s+="(";for(var c=t;c--;)s+=e/n|0,e%=n,e*=10;s+=")"}else for(var c=r;e&&c--;)s+=e/n|0,e%=n,e*=10;return s}};var xo="Fraction",Eo=[],So=K(xo,Eo,()=>(Ir.prototype.type="Fraction",Ir.prototype.isFraction=!0,Ir.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Ir.fromJSON=function(r){return new Ir(r)},Ir),{isClass:!0}),Ao="Matrix",Co=[],Do=K(Ao,Co,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,n,t){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,n,t){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0}),Oo="DenseMatrix",Fo=["Matrix"],zo=K(Oo,Fo,r=>{var{Matrix:e}=r;function n(o,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Kr(a))throw new Error("Invalid datatype: "+a);if(wr(o))o.type==="DenseMatrix"?(this._data=mr(o._data),this._size=mr(o._size),this._datatype=a||o._datatype):(this._data=o.toArray(),this._size=o.size(),this._datatype=a||o._datatype);else if(o&&fr(o.data)&&fr(o.size))this._data=o.data,this._size=o.size,Ot(this._data,this._size),this._datatype=a||o.datatype;else if(fr(o))this._data=p(o),this._size=Hr(this._data),Ot(this._data,this._size),this._datatype=a;else{if(o)throw new TypeError("Unsupported type of data ("+Vr(o)+")");this._data=[],this._size=[0],this._datatype=a}}n.prototype=new e,n.prototype.createDenseMatrix=function(o,a){return new n(o,a)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Fe(this._data,Vr)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(o,a){return new n(o,a)},n.prototype.subset=function(o,a,u){switch(arguments.length){case 1:return t(this,o);case 2:case 3:return s(this,o,a,u);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(o){if(!fr(o))throw new TypeError("Array expected");if(o.length!==this._size.length)throw new tr(o.length,this._size.length);for(var a=0;a<o.length;a++)cr(o[a],this._size[a]);for(var u=this._data,l=0,d=o.length;l<d;l++){var f=o[l];cr(f,u.length),u=u[f]}return u},n.prototype.set=function(o,a,u){if(!fr(o))throw new TypeError("Array expected");if(o.length<this._size.length)throw new tr(o.length,this._size.length,"<");var l,d,f,m=o.map(function(x){return x+1});v(this,m,u);var w=this._data;for(l=0,d=o.length-1;l<d;l++)f=o[l],cr(f,w.length),w=w[f];return f=o[o.length-1],cr(f,w.length),w[f]=a,this};function t(o,a){if(!$e(a))throw new TypeError("Invalid index");var u=a.isScalar();if(u)return o.get(a.min());var l=a.size();if(l.length!==o._size.length)throw new tr(l.length,o._size.length);for(var d=a.min(),f=a.max(),m=0,w=o._size.length;m<w;m++)cr(d[m],o._size[m]),cr(f[m],o._size[m]);return new n(i(o._data,a,l.length,0),o._datatype)}function i(o,a,u,l){var d=l===u-1,f=a.dimension(l);return d?f.map(function(m){return cr(m,o.length),o[m]}).valueOf():f.map(function(m){cr(m,o.length);var w=o[m];return i(w,a,u,l+1)}).valueOf()}function s(o,a,u,l){if(!a||a.isIndex!==!0)throw new TypeError("Invalid index");var d=a.size(),f=a.isScalar(),m;if(wr(u)?(m=u.size(),u=u.valueOf()):m=Hr(u),f){if(m.length!==0)throw new TypeError("Scalar expected");o.set(a.min(),u,l)}else{if(d.length<o._size.length)throw new tr(d.length,o._size.length,"<");if(m.length<d.length){for(var w=0,x=0;d[w]===1&&m[w]===1;)w++;for(;d[w]===1;)x++,w++;u=gn(u,d.length,x,m)}if(!De(d,m))throw new tr(d,m,">");var g=a.max().map(function(y){return y+1});v(o,g,l);var b=d.length,M=0;c(o._data,a,u,b,M)}return o}function c(o,a,u,l,d){var f=d===l-1,m=a.dimension(d);f?m.forEach(function(w,x){cr(w),o[w]=u[x[0]]}):m.forEach(function(w,x){cr(w),c(o[w],a,u[x[0]],l,d+1)})}n.prototype.resize=function(o,a,u){if(!lt(o))throw new TypeError("Array or Matrix expected");var l=o.valueOf().map(f=>Array.isArray(f)&&f.length===1?f[0]:f),d=u?this.clone():this;return h(d,l,a)};function h(o,a,u){if(a.length===0){for(var l=o._data;fr(l);)l=l[0];return l}return o._size=a.slice(0),o._data=Oe(o._data,o._size,u),o}n.prototype.reshape=function(o,a){var u=a?this.clone():this;u._data=ta(u._data,o);var l=u._size.reduce((d,f)=>d*f);return u._size=vt(o,l),u};function v(o,a,u){for(var l=o._size.slice(0),d=!1;l.length<a.length;)l.push(0),d=!0;for(var f=0,m=a.length;f<m;f++)a[f]>l[f]&&(l[f]=a[f],d=!0);d&&h(o,l,u)}n.prototype.clone=function(){var o=new n({data:mr(this._data),size:mr(this._size),datatype:this._datatype});return o},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(o){var a=this,u=function f(m,w){return fr(m)?m.map(function(x,g){return f(x,w.concat(g))}):o(m,w,a)},l=u(this._data,[]),d=this._datatype!==void 0?Fe(l,Vr):void 0;return new n(l,d)},n.prototype.forEach=function(o){var a=this,u=function l(d,f){fr(d)?d.forEach(function(m,w){l(m,f.concat(w))}):o(d,f,a)};u(this._data,[])},n.prototype[Symbol.iterator]=function*(){var o=function*a(u,l){if(fr(u))for(var d=0;d<u.length;d++)yield*a(u[d],l.concat(d));else yield{value:u,index:l}};yield*o(this._data,[])},n.prototype.rows=function(){var o=[],a=this.size();if(a.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var u=this._data;for(var l of u)o.push(new n([l],this._datatype));return o},n.prototype.columns=function(){var o=this,a=[],u=this.size();if(u.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var l=this._data,d=function(w){var x=l.map(g=>[g[w]]);a.push(new n(x,o._datatype))},f=0;f<u[1];f++)d(f);return a},n.prototype.toArray=function(){return mr(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(o){return Mr(this._data,o)},n.prototype.toString=function(){return Mr(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(o){if(o){if(Sr(o)&&(o=o.toNumber()),!vr(o)||!gr(o))throw new TypeError("The parameter k must be an integer number")}else o=0;for(var a=o>0?o:0,u=o<0?-o:0,l=this._size[0],d=this._size[1],f=Math.min(l-u,d-a),m=[],w=0;w<f;w++)m[w]=this._data[w+u][w+a];return new n({data:m,size:[f],datatype:this._datatype})},n.diagonal=function(o,a,u,l){if(!fr(o))throw new TypeError("Array expected, size parameter");if(o.length!==2)throw new Error("Only two dimensions matrix are supported");if(o=o.map(function(E){if(Sr(E)&&(E=E.toNumber()),!vr(E)||!gr(E)||E<1)throw new Error("Size values must be positive integers");return E}),u){if(Sr(u)&&(u=u.toNumber()),!vr(u)||!gr(u))throw new TypeError("The parameter k must be an integer number")}else u=0;var d=u>0?u:0,f=u<0?-u:0,m=o[0],w=o[1],x=Math.min(m-f,w-d),g;if(fr(a)){if(a.length!==x)throw new Error("Invalid value array length");g=function(_){return a[_]}}else if(wr(a)){var b=a.size();if(b.length!==1||b[0]!==x)throw new Error("Invalid matrix length");g=function(_){return a.get([_])}}else g=function(){return a};l||(l=Sr(g(0))?g(0).mul(0):0);var M=[];if(o.length>0){M=Oe(M,o,l);for(var y=0;y<x;y++)M[y+f][y+d]=g(y)}return new n({data:M,size:[m,w]})},n.fromJSON=function(o){return new n(o)},n.prototype.swapRows=function(o,a){if(!vr(o)||!gr(o)||!vr(a)||!gr(a))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return cr(o,this._size[0]),cr(a,this._size[0]),n._swapRows(o,a,this._data),this},n._swapRows=function(o,a,u){var l=u[o];u[o]=u[a],u[a]=l};function p(o){for(var a=0,u=o.length;a<u;a++){var l=o[a];fr(l)?o[a]=p(l):l&&l.isMatrix===!0&&(o[a]=p(l.valueOf()))}return o}return n},{isClass:!0});function Bo(r){var e=r.length,n=r[0].length,t,i,s=[];for(i=0;i<n;i++){var c=[];for(t=0;t<e;t++)c.push(r[t][i]);s.push(c)}return s}function mt(r){for(var e=0;e<r.length;e++)if(lt(r[e]))return!0;return!1}function Ze(r,e){wr(r)&&(r=r.valueOf());for(var n=0,t=r.length;n<t;n++){var i=r[n];Array.isArray(i)?Ze(i,e):e(i)}}function jr(r,e,n){return r&&typeof r.map=="function"?r.map(function(t){return jr(t,e)}):e(r)}function gt(r,e,n){var t=Array.isArray(r)?Hr(r):r.size();if(e<0||e>=t.length)throw new se(e,t.length);return wr(r)?r.create(Te(r.valueOf(),e,n)):Te(r,e,n)}function Te(r,e,n){var t,i,s,c;if(e<=0)if(Array.isArray(r[0])){for(c=Bo(r),i=[],t=0;t<c.length;t++)i[t]=Te(c[t],e-1,n);return i}else{for(s=r[0],t=1;t<r.length;t++)s=n(s,r[t]);return s}else{for(i=[],t=0;t<r.length;t++)i[t]=Te(r[t],e-1,n);return i}}var In="number",Tn="number, number";function Pn(r){return Math.abs(r)}Pn.signature=In;function $n(r,e){return r+e}$n.signature=Tn;function qn(r,e){return r*e}qn.signature=Tn;function Rn(r){return-r}Rn.signature=In;function Tt(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!gr(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(hn(r,e))}var Io="number";function Un(r){return r===0}Un.signature=Io;var Pt="isZero",To=["typed"],Po=K(Pt,To,r=>{var{typed:e}=r;return e(Pt,{number:Un,BigNumber:function(t){return t.isZero()},Complex:function(t){return t.re===0&&t.im===0},Fraction:function(t){return t.d===1&&t.n===0},Unit:function(t){return this(t.value)},"Array | Matrix":function(t){return jr(t,this)}})});function wt(r,e,n){if(n==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var t=r.minus(e).abs();if(t.isZero())return!0;var i=r.constructor.max(r.abs(),e.abs());return t.lte(i.times(n))}return!1}function $o(r,e,n){return de(r.re,e.re,n)&&de(r.im,e.im,n)}var Pe="equalScalar",qo=["typed","config"],Ro=K(Pe,qo,r=>{var{typed:e,config:n}=r;return e(Pe,{"boolean, boolean":function(i,s){return i===s},"number, number":function(i,s){return de(i,s,n.epsilon)},"BigNumber, BigNumber":function(i,s){return i.eq(s)||wt(i,s,n.epsilon)},"Fraction, Fraction":function(i,s){return i.equals(s)},"Complex, Complex":function(i,s){return $o(i,s,n.epsilon)},"Unit, Unit":function(i,s){if(!i.equalBase(s))throw new Error("Cannot compare units with different base");return this(i.value,s.value)}})});K(Pe,["typed","config"],r=>{var{typed:e,config:n}=r;return e(Pe,{"number, number":function(i,s){return de(i,s,n.epsilon)}})});var Uo="SparseMatrix",Lo=["typed","equalScalar","Matrix"],Wo=K(Uo,Lo,r=>{var{typed:e,equalScalar:n,Matrix:t}=r;function i(f,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Kr(m))throw new Error("Invalid datatype: "+m);if(wr(f))s(this,f,m);else if(f&&fr(f.index)&&fr(f.ptr)&&fr(f.size))this._values=f.values,this._index=f.index,this._ptr=f.ptr,this._size=f.size,this._datatype=m||f.datatype;else if(fr(f))c(this,f,m);else{if(f)throw new TypeError("Unsupported type of data ("+Vr(f)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function s(f,m,w){m.type==="SparseMatrix"?(f._values=m._values?mr(m._values):void 0,f._index=mr(m._index),f._ptr=mr(m._ptr),f._size=mr(m._size),f._datatype=w||m._datatype):c(f,m.valueOf(),w||m._datatype)}function c(f,m,w){f._values=[],f._index=[],f._ptr=[],f._datatype=w;var x=m.length,g=0,b=n,M=0;if(Kr(w)&&(b=e.find(n,[w,w])||n,M=e.convert(0,w)),x>0){var y=0;do{f._ptr.push(f._index.length);for(var E=0;E<x;E++){var _=m[E];if(fr(_)){if(y===0&&g<_.length&&(g=_.length),y<_.length){var S=_[y];b(S,M)||(f._values.push(S),f._index.push(E))}}else y===0&&g<1&&(g=1),b(_,M)||(f._values.push(_),f._index.push(E))}y++}while(y<g)}f._ptr.push(f._index.length),f._size=[x,g]}i.prototype=new t,i.prototype.createSparseMatrix=function(f,m){return new i(f,m)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Fe(this._values,Vr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(f,m){return new i(f,m)},i.prototype.density=function(){var f=this._size[0],m=this._size[1];return f!==0&&m!==0?this._index.length/(f*m):0},i.prototype.subset=function(f,m,w){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return h(this,f);case 2:case 3:return v(this,f,m,w);default:throw new SyntaxError("Wrong number of arguments")}};function h(f,m){if(!$e(m))throw new TypeError("Invalid index");var w=m.isScalar();if(w)return f.get(m.min());var x=m.size();if(x.length!==f._size.length)throw new tr(x.length,f._size.length);var g,b,M,y,E=m.min(),_=m.max();for(g=0,b=f._size.length;g<b;g++)cr(E[g],f._size[g]),cr(_[g],f._size[g]);var S=f._values,D=f._index,z=f._ptr,T=m.dimension(0),U=m.dimension(1),I=[],P=[];T.forEach(function(L,G){P[L]=G[0],I[L]=!0});var O=S?[]:void 0,W=[],q=[];return U.forEach(function(L){for(q.push(W.length),M=z[L],y=z[L+1];M<y;M++)g=D[M],I[g]===!0&&(W.push(P[g]),O&&O.push(S[M]))}),q.push(W.length),new i({values:O,index:W,ptr:q,size:x,datatype:f._datatype})}function v(f,m,w,x){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var g=m.size(),b=m.isScalar(),M;if(wr(w)?(M=w.size(),w=w.toArray()):M=Hr(w),b){if(M.length!==0)throw new TypeError("Scalar expected");f.set(m.min(),w,x)}else{if(g.length!==1&&g.length!==2)throw new tr(g.length,f._size.length,"<");if(M.length<g.length){for(var y=0,E=0;g[y]===1&&M[y]===1;)y++;for(;g[y]===1;)E++,y++;w=gn(w,g.length,E,M)}if(!De(g,M))throw new tr(g,M,">");if(g.length===1){var _=m.dimension(0);_.forEach(function(z,T){cr(z),f.set([z,0],w[T[0]],x)})}else{var S=m.dimension(0),D=m.dimension(1);S.forEach(function(z,T){cr(z),D.forEach(function(U,I){cr(U),f.set([z,U],w[T[0]][I[0]],x)})})}}return f}i.prototype.get=function(f){if(!fr(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new tr(f.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=f[0],w=f[1];cr(m,this._size[0]),cr(w,this._size[1]);var x=p(m,this._ptr[w],this._ptr[w+1],this._index);return x<this._ptr[w+1]&&this._index[x]===m?this._values[x]:0},i.prototype.set=function(f,m,w){if(!fr(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new tr(f.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var x=f[0],g=f[1],b=this._size[0],M=this._size[1],y=n,E=0;Kr(this._datatype)&&(y=e.find(n,[this._datatype,this._datatype])||n,E=e.convert(0,this._datatype)),(x>b-1||g>M-1)&&(u(this,Math.max(x+1,b),Math.max(g+1,M),w),b=this._size[0],M=this._size[1]),cr(x,b),cr(g,M);var _=p(x,this._ptr[g],this._ptr[g+1],this._index);return _<this._ptr[g+1]&&this._index[_]===x?y(m,E)?o(_,g,this._values,this._index,this._ptr):this._values[_]=m:a(_,x,g,m,this._values,this._index,this._ptr),this};function p(f,m,w,x){if(w-m===0)return w;for(var g=m;g<w;g++)if(x[g]===f)return g;return m}function o(f,m,w,x,g){w.splice(f,1),x.splice(f,1);for(var b=m+1;b<g.length;b++)g[b]--}function a(f,m,w,x,g,b,M){g.splice(f,0,x),b.splice(f,0,m);for(var y=w+1;y<M.length;y++)M[y]++}i.prototype.resize=function(f,m,w){if(!lt(f))throw new TypeError("Array or Matrix expected");var x=f.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b);if(x.length!==2)throw new Error("Only two dimensions matrix are supported");x.forEach(function(b){if(!vr(b)||!gr(b)||b<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Mr(x)+")")});var g=w?this.clone():this;return u(g,x[0],x[1],m)};function u(f,m,w,x){var g=x||0,b=n,M=0;Kr(f._datatype)&&(b=e.find(n,[f._datatype,f._datatype])||n,M=e.convert(0,f._datatype),g=e.convert(g,f._datatype));var y=!b(g,M),E=f._size[0],_=f._size[1],S,D,z;if(w>_){for(D=_;D<w;D++)if(f._ptr[D]=f._values.length,y)for(S=0;S<E;S++)f._values.push(g),f._index.push(S);f._ptr[w]=f._values.length}else w<_&&(f._ptr.splice(w+1,_-w),f._values.splice(f._ptr[w],f._values.length),f._index.splice(f._ptr[w],f._index.length));if(_=w,m>E){if(y){var T=0;for(D=0;D<_;D++){f._ptr[D]=f._ptr[D]+T,z=f._ptr[D+1]+T;var U=0;for(S=E;S<m;S++,U++)f._values.splice(z+U,0,g),f._index.splice(z+U,0,S),T++}f._ptr[_]=f._values.length}}else if(m<E){var I=0;for(D=0;D<_;D++){f._ptr[D]=f._ptr[D]-I;var P=f._ptr[D],O=f._ptr[D+1]-I;for(z=P;z<O;z++)S=f._index[z],S>m-1&&(f._values.splice(z,1),f._index.splice(z,1),I++)}f._ptr[D]=f._values.length}return f._size[0]=m,f._size[1]=w,f}i.prototype.reshape=function(f,m){if(!fr(f))throw new TypeError("Array expected");if(f.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");f.forEach(function(L){if(!vr(L)||!gr(L)||L<=-2||L===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Mr(f)+")")});var w=this._size[0]*this._size[1];f=vt(f,w);var x=f[0]*f[1];if(w!==x)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=m?this.clone():this;if(this._size[0]===f[0]&&this._size[1]===f[1])return g;for(var b=[],M=0;M<g._ptr.length;M++)for(var y=0;y<g._ptr[M+1]-g._ptr[M];y++)b.push(M);for(var E=g._values.slice(),_=g._index.slice(),S=0;S<g._index.length;S++){var D=_[S],z=b[S],T=D*g._size[1]+z;b[S]=T%f[1],_[S]=Math.floor(T/f[1])}g._values.length=0,g._index.length=0,g._ptr.length=f[1]+1,g._size=f.slice();for(var U=0;U<g._ptr.length;U++)g._ptr[U]=0;for(var I=0;I<E.length;I++){var P=_[I],O=b[I],W=E[I],q=p(P,g._ptr[O],g._ptr[O+1],g._index);a(q,P,O,W,g._values,g._index,g._ptr)}return g},i.prototype.clone=function(){var f=new i({values:this._values?mr(this._values):void 0,index:mr(this._index),ptr:mr(this._ptr),size:mr(this._size),datatype:this._datatype});return f},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(f,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var w=this,x=this._size[0],g=this._size[1],b=function(y,E,_){return f(y,[E,_],w)};return l(this,0,x-1,0,g-1,b,m)};function l(f,m,w,x,g,b,M){var y=[],E=[],_=[],S=n,D=0;Kr(f._datatype)&&(S=e.find(n,[f._datatype,f._datatype])||n,D=e.convert(0,f._datatype));for(var z=function(k,pr,dr){k=b(k,pr,dr),S(k,D)||(y.push(k),E.push(pr))},T=x;T<=g;T++){_.push(y.length);var U=f._ptr[T],I=f._ptr[T+1];if(M)for(var P=U;P<I;P++){var O=f._index[P];O>=m&&O<=w&&z(f._values[P],O-m,T-x)}else{for(var W={},q=U;q<I;q++){var L=f._index[q];W[L]=f._values[q]}for(var G=m;G<=w;G++){var rr=G in W?W[G]:0;z(rr,G-m,T-x)}}}return _.push(y.length),new i({values:y,index:E,ptr:_,size:[w-m+1,g-x+1]})}i.prototype.forEach=function(f,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var w=this,x=this._size[0],g=this._size[1],b=0;b<g;b++){var M=this._ptr[b],y=this._ptr[b+1];if(m)for(var E=M;E<y;E++){var _=this._index[E];f(this._values[E],[_,b],w)}else{for(var S={},D=M;D<y;D++){var z=this._index[D];S[z]=this._values[D]}for(var T=0;T<x;T++){var U=T in S?S[T]:0;f(U,[T,b],w)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var f=this._size[1],m=0;m<f;m++)for(var w=this._ptr[m],x=this._ptr[m+1],g=w;g<x;g++){var b=this._index[g];yield{value:this._values[g],index:[b,m]}}},i.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)};function d(f,m,w,x,g){var b=x[0],M=x[1],y=[],E,_;for(E=0;E<b;E++)for(y[E]=[],_=0;_<M;_++)y[E][_]=0;for(_=0;_<M;_++)for(var S=w[_],D=w[_+1],z=S;z<D;z++)E=m[z],y[E][_]=f?g?mr(f[z]):f[z]:1;return y}return i.prototype.format=function(f){for(var m=this._size[0],w=this._size[1],x=this.density(),g="Sparse Matrix ["+Mr(m,f)+" x "+Mr(w,f)+"] density: "+Mr(x,f)+`
`,b=0;b<w;b++)for(var M=this._ptr[b],y=this._ptr[b+1],E=M;E<y;E++){var _=this._index[E];g+=`
    (`+Mr(_,f)+", "+Mr(b,f)+") ==> "+(this._values?Mr(this._values[E],f):"X")}return g},i.prototype.toString=function(){return Mr(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(f){if(f){if(Sr(f)&&(f=f.toNumber()),!vr(f)||!gr(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var m=f>0?f:0,w=f<0?-f:0,x=this._size[0],g=this._size[1],b=Math.min(x-w,g-m),M=[],y=[],E=[];E[0]=0;for(var _=m;_<g&&M.length<b;_++)for(var S=this._ptr[_],D=this._ptr[_+1],z=S;z<D;z++){var T=this._index[z];if(T===_-m+w){M.push(this._values[z]),y[M.length-1]=T-w;break}}return E.push(M.length),new i({values:M,index:y,ptr:E,size:[b,1]})},i.fromJSON=function(f){return new i(f)},i.diagonal=function(f,m,w,x,g){if(!fr(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(L){if(Sr(L)&&(L=L.toNumber()),!vr(L)||!gr(L)||L<1)throw new Error("Size values must be positive integers");return L}),w){if(Sr(w)&&(w=w.toNumber()),!vr(w)||!gr(w))throw new TypeError("The parameter k must be an integer number")}else w=0;var b=n,M=0;Kr(g)&&(b=e.find(n,[g,g])||n,M=e.convert(0,g));var y=w>0?w:0,E=w<0?-w:0,_=f[0],S=f[1],D=Math.min(_-E,S-y),z;if(fr(m)){if(m.length!==D)throw new Error("Invalid value array length");z=function(G){return m[G]}}else if(wr(m)){var T=m.size();if(T.length!==1||T[0]!==D)throw new Error("Invalid matrix length");z=function(G){return m.get([G])}}else z=function(){return m};for(var U=[],I=[],P=[],O=0;O<S;O++){P.push(U.length);var W=O-y;if(W>=0&&W<D){var q=z(W);b(q,M)||(I.push(W+E),U.push(q))}}return P.push(U.length),new i({values:U,index:I,ptr:P,size:[_,S]})},i.prototype.swapRows=function(f,m){if(!vr(f)||!gr(f)||!vr(m)||!gr(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return cr(f,this._size[0]),cr(m,this._size[0]),i._swapRows(f,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(f,m,w,x,g){for(var b=x[f],M=x[f+1],y=b;y<M;y++)g(w[y],m[y])},i._swapRows=function(f,m,w,x,g,b){for(var M=0;M<w;M++){var y=b[M],E=b[M+1],_=p(f,y,E,g),S=p(m,y,E,g);if(_<E&&S<E&&g[_]===f&&g[S]===m){if(x){var D=x[_];x[_]=x[S],x[S]=D}continue}if(_<E&&g[_]===f&&(S>=E||g[S]!==m)){var z=x?x[_]:void 0;g.splice(S,0,m),x&&x.splice(S,0,z),g.splice(S<=_?_+1:_,1),x&&x.splice(S<=_?_+1:_,1);continue}if(S<E&&g[S]===m&&(_>=E||g[_]!==f)){var T=x?x[S]:void 0;g.splice(_,0,f),x&&x.splice(_,0,T),g.splice(_<=S?S+1:S,1),x&&x.splice(_<=S?S+1:S,1)}}},i},{isClass:!0}),Zo="number",Vo=["typed"];function Ho(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],t=e[2],i=e[3];return{input:r,radix:n,integerPart:t,fractionalPart:i}}else return null}function Jo(r){for(var e=parseInt(r.integerPart,r.radix),n=0,t=0;t<r.fractionalPart.length;t++){var i=parseInt(r.fractionalPart[t],r.radix);n+=i/Math.pow(r.radix,t+1)}var s=e+n;if(isNaN(s))throw new SyntaxError('String "'+r.input+'" is no valid number');return s}var Yo=K(Zo,Vo,r=>{var{typed:e}=r,n=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=Ho(i);if(s)return Jo(s);var c=0,h=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);h&&(c=Number(h[2]),i=h[1]);var v=Number(i);if(isNaN(v))throw new SyntaxError('String "'+i+'" is no valid number');if(h){if(v>2**c-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));v>=2**(c-1)&&(v=v-2**c)}return v},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:function(i){throw new Error("Second argument with valueless unit expected")},null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":function(i){return jr(i,this)}});return n.fromJSON=function(t){return parseFloat(t.value)},n}),Go="bignumber",Xo=["typed","BigNumber"],Ko=K(Go,Xo,r=>{var{typed:e,BigNumber:n}=r;return e("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var c=s[2],h=n(s[1]),v=new n(2).pow(Number(c));if(h.gt(v.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var p=new n(2).pow(Number(c)-1);return h.gte(p)?h.sub(v):h}return new n(i)},BigNumber:function(i){return i},Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":function(i){return jr(i,this)}})}),Qo="fraction",jo=["typed","Fraction"],ko=K(Qo,jo,r=>{var{typed:e,Fraction:n}=r;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,s){return new n(i,s)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},Fraction:function(i){return i},Object:function(i){return new n(i)},"Array | Matrix":function(i){return jr(i,this)}})}),$t="matrix",rs=["typed","Matrix","DenseMatrix","SparseMatrix"],es=K($t,rs,r=>{var{typed:e,Matrix:n,DenseMatrix:t,SparseMatrix:i}=r;return e($t,{"":function(){return s([])},string:function(h){return s([],h)},"string, string":function(h,v){return s([],h,v)},Array:function(h){return s(h)},Matrix:function(h){return s(h,h.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(c,h,v){if(h==="dense"||h==="default"||h===void 0)return new t(c,v);if(h==="sparse")return new i(c,v);throw new TypeError("Unknown matrix type "+JSON.stringify(h)+".")}}),qt="unaryMinus",ts=["typed"],ns=K(qt,ts,r=>{var{typed:e}=r;return e(qt,{number:Rn,Complex:function(t){return t.neg()},BigNumber:function(t){return t.neg()},Fraction:function(t){return t.neg()},Unit:function(t){var i=t.clone();return i.value=this(t.value),i},"Array | Matrix":function(t){return jr(t,this)}})}),Rt="abs",is=["typed"],as=K(Rt,is,r=>{var{typed:e}=r;return e(Rt,{number:Pn,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},Fraction:function(t){return t.abs()},"Array | Matrix":function(t){return jr(t,this)},Unit:function(t){return t.abs()}})}),Ut="addScalar",os=["typed"],ss=K(Ut,os,r=>{var{typed:e}=r;return e(Ut,{"number, number":$n,"Complex, Complex":function(t,i){return t.add(i)},"BigNumber, BigNumber":function(t,i){return t.plus(i)},"Fraction, Fraction":function(t,i){return t.add(i)},"Unit, Unit":function(t,i){if(t.value===null||t.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(i))throw new Error("Units do not match");var s=t.clone();return s.value=this(s.value,i.value),s.fixPrefix=!1,s}})}),us="algorithm11",fs=["typed","equalScalar"],yt=K(us,fs,r=>{var{typed:e,equalScalar:n}=r;return function(i,s,c,h){var v=i._values,p=i._index,o=i._ptr,a=i._size,u=i._datatype;if(!v)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l=a[0],d=a[1],f,m=n,w=0,x=c;typeof u=="string"&&(f=u,m=e.find(n,[f,f]),w=e.convert(0,f),s=e.convert(s,f),x=e.find(c,[f,f]));for(var g=[],b=[],M=[],y=0;y<d;y++){M[y]=b.length;for(var E=o[y],_=o[y+1],S=E;S<_;S++){var D=p[S],z=h?x(s,v[S]):x(v[S],s);m(z,w)||(b.push(D),g.push(z))}}return M[d]=b.length,i.createSparseMatrix({values:g,index:b,ptr:M,size:[l,d],datatype:f})}}),cs="algorithm12",ls=["typed","DenseMatrix"],Mt=K(cs,ls,r=>{var{typed:e,DenseMatrix:n}=r;return function(i,s,c,h){var v=i._values,p=i._index,o=i._ptr,a=i._size,u=i._datatype;if(!v)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l=a[0],d=a[1],f,m=c;typeof u=="string"&&(f=u,s=e.convert(s,f),m=e.find(c,[f,f]));for(var w=[],x=[],g=[],b=0;b<d;b++){for(var M=b+1,y=o[b],E=o[b+1],_=y;_<E;_++){var S=p[_];x[S]=v[_],g[S]=M}for(var D=0;D<l;D++)b===0&&(w[D]=[]),g[D]===M?w[D][b]=h?m(s,x[D]):m(x[D],s):w[D][b]=h?m(s,0):m(0,s)}return new n({data:w,size:[l,d],datatype:f})}}),hs="algorithm14",vs=["typed"],ue=K(hs,vs,r=>{var{typed:e}=r;return function(i,s,c,h){var v=i._data,p=i._size,o=i._datatype,a,u=c;typeof o=="string"&&(a=o,s=e.convert(s,a),u=e.find(c,[a,a]));var l=p.length>0?n(u,0,p,p[0],v,s,h):[];return i.createDenseMatrix({data:l,size:mr(p),datatype:a})};function n(t,i,s,c,h,v,p){var o=[];if(i===s.length-1)for(var a=0;a<c;a++)o[a]=p?t(v,h[a]):t(h[a],v);else for(var u=0;u<c;u++)o[u]=n(t,i+1,s,s[i+1],h[u],v,p);return o}}),ps="algorithm01",ds=["typed"],Ln=K(ps,ds,r=>{var{typed:e}=r;return function(t,i,s,c){var h=t._data,v=t._size,p=t._datatype,o=i._values,a=i._index,u=i._ptr,l=i._size,d=i._datatype;if(v.length!==l.length)throw new tr(v.length,l.length);if(v[0]!==l[0]||v[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+v+") must match Matrix B ("+l+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f=v[0],m=v[1],w=typeof p=="string"&&p===d?p:void 0,x=w?e.find(s,[w,w]):s,g,b,M=[];for(g=0;g<f;g++)M[g]=[];var y=[],E=[];for(b=0;b<m;b++){for(var _=b+1,S=u[b],D=u[b+1],z=S;z<D;z++)g=a[z],y[g]=c?x(o[z],h[g][b]):x(h[g][b],o[z]),E[g]=_;for(g=0;g<f;g++)E[g]===_?M[g][b]=y[g]:M[g][b]=h[g][b]}return t.createDenseMatrix({data:M,size:[f,m],datatype:w})}}),ms="algorithm04",gs=["typed","equalScalar"],ws=K(ms,gs,r=>{var{typed:e,equalScalar:n}=r;return function(i,s,c){var h=i._values,v=i._index,p=i._ptr,o=i._size,a=i._datatype,u=s._values,l=s._index,d=s._ptr,f=s._size,m=s._datatype;if(o.length!==f.length)throw new tr(o.length,f.length);if(o[0]!==f[0]||o[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+f+")");var w=o[0],x=o[1],g,b=n,M=0,y=c;typeof a=="string"&&a===m&&(g=a,b=e.find(n,[g,g]),M=e.convert(0,g),y=e.find(c,[g,g]));var E=h&&u?[]:void 0,_=[],S=[],D=h&&u?[]:void 0,z=h&&u?[]:void 0,T=[],U=[],I,P,O,W,q;for(P=0;P<x;P++){S[P]=_.length;var L=P+1;for(W=p[P],q=p[P+1],O=W;O<q;O++)I=v[O],_.push(I),T[I]=L,D&&(D[I]=h[O]);for(W=d[P],q=d[P+1],O=W;O<q;O++)if(I=l[O],T[I]===L){if(D){var G=y(D[I],u[O]);b(G,M)?T[I]=null:D[I]=G}}else _.push(I),U[I]=L,z&&(z[I]=u[O]);if(D&&z)for(O=S[P];O<_.length;)I=_[O],T[I]===L?(E[O]=D[I],O++):U[I]===L?(E[O]=z[I],O++):_.splice(O,1)}return S[x]=_.length,i.createSparseMatrix({values:E,index:_,ptr:S,size:[w,x],datatype:g})}}),ys="algorithm10",Ms=["typed","DenseMatrix"],Wn=K(ys,Ms,r=>{var{typed:e,DenseMatrix:n}=r;return function(i,s,c,h){var v=i._values,p=i._index,o=i._ptr,a=i._size,u=i._datatype;if(!v)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l=a[0],d=a[1],f,m=c;typeof u=="string"&&(f=u,s=e.convert(s,f),m=e.find(c,[f,f]));for(var w=[],x=[],g=[],b=0;b<d;b++){for(var M=b+1,y=o[b],E=o[b+1],_=y;_<E;_++){var S=p[_];x[S]=v[_],g[S]=M}for(var D=0;D<l;D++)b===0&&(w[D]=[]),g[D]===M?w[D][b]=h?m(s,x[D]):m(x[D],s):w[D][b]=s}return new n({data:w,size:[l,d],datatype:f})}}),Ns="algorithm13",bs=["typed"],Ve=K(Ns,bs,r=>{var{typed:e}=r;return function(i,s,c){var h=i._data,v=i._size,p=i._datatype,o=s._data,a=s._size,u=s._datatype,l=[];if(v.length!==a.length)throw new tr(v.length,a.length);for(var d=0;d<v.length;d++){if(v[d]!==a[d])throw new RangeError("Dimension mismatch. Matrix A ("+v+") must match Matrix B ("+a+")");l[d]=v[d]}var f,m=c;typeof p=="string"&&p===u&&(f=p,m=e.find(c,[f,f]));var w=l.length>0?n(m,0,l,l[0],h,o):[];return i.createDenseMatrix({data:w,size:l,datatype:f})};function n(t,i,s,c,h,v){var p=[];if(i===s.length-1)for(var o=0;o<c;o++)p[o]=t(h[o],v[o]);else for(var a=0;a<c;a++)p[a]=n(t,i+1,s,s[i+1],h[a],v[a]);return p}}),_s="algorithm03",xs=["typed"],Nt=K(_s,xs,r=>{var{typed:e}=r;return function(t,i,s,c){var h=t._data,v=t._size,p=t._datatype,o=i._values,a=i._index,u=i._ptr,l=i._size,d=i._datatype;if(v.length!==l.length)throw new tr(v.length,l.length);if(v[0]!==l[0]||v[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+v+") must match Matrix B ("+l+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f=v[0],m=v[1],w,x=0,g=s;typeof p=="string"&&p===d&&(w=p,x=e.convert(0,w),g=e.find(s,[w,w]));for(var b=[],M=0;M<f;M++)b[M]=[];for(var y=[],E=[],_=0;_<m;_++){for(var S=_+1,D=u[_],z=u[_+1],T=D;T<z;T++){var U=a[T];y[U]=c?g(o[T],h[U][_]):g(h[U][_],o[T]),E[U]=S}for(var I=0;I<f;I++)E[I]===S?b[I][_]=y[I]:b[I][_]=c?g(x,h[I][_]):g(h[I][_],x)}return t.createDenseMatrix({data:b,size:[f,m],datatype:w})}}),Es="algorithm05",Ss=["typed","equalScalar"],As=K(Es,Ss,r=>{var{typed:e,equalScalar:n}=r;return function(i,s,c){var h=i._values,v=i._index,p=i._ptr,o=i._size,a=i._datatype,u=s._values,l=s._index,d=s._ptr,f=s._size,m=s._datatype;if(o.length!==f.length)throw new tr(o.length,f.length);if(o[0]!==f[0]||o[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+f+")");var w=o[0],x=o[1],g,b=n,M=0,y=c;typeof a=="string"&&a===m&&(g=a,b=e.find(n,[g,g]),M=e.convert(0,g),y=e.find(c,[g,g]));var E=h&&u?[]:void 0,_=[],S=[],D=E?[]:void 0,z=E?[]:void 0,T=[],U=[],I,P,O,W;for(P=0;P<x;P++){S[P]=_.length;var q=P+1;for(O=p[P],W=p[P+1];O<W;O++)I=v[O],_.push(I),T[I]=q,D&&(D[I]=h[O]);for(O=d[P],W=d[P+1];O<W;O++)I=l[O],T[I]!==q&&_.push(I),U[I]=q,z&&(z[I]=u[O]);if(E)for(O=S[P];O<_.length;){I=_[O];var L=T[I],G=U[I];if(L===q||G===q){var rr=L===q?D[I]:M,er=G===q?z[I]:M,k=y(rr,er);b(k,M)?_.splice(O,1):(E.push(k),O++)}}}return S[x]=_.length,i.createSparseMatrix({values:E,index:_,ptr:S,size:[w,x],datatype:g})}}),Cs="multiplyScalar",Ds=["typed"],Os=K(Cs,Ds,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":qn,"Complex, Complex":function(t,i){return t.mul(i)},"BigNumber, BigNumber":function(t,i){return t.times(i)},"Fraction, Fraction":function(t,i){return t.mul(i)},"number | Fraction | BigNumber | Complex, Unit":function(t,i){var s=i.clone();return s.value=s.value===null?s._normalize(t):this(s.value,t),s},"Unit, number | Fraction | BigNumber | Complex":function(t,i){var s=t.clone();return s.value=s.value===null?s._normalize(i):this(s.value,i),s},"Unit, Unit":function(t,i){return t.multiply(i)}})}),Lt="multiply",Fs=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],zs=K(Lt,Fs,r=>{var{typed:e,matrix:n,addScalar:t,multiplyScalar:i,equalScalar:s,dot:c}=r,h=yt({typed:e,equalScalar:s}),v=ue({typed:e});function p(M,y){switch(M.length){case 1:switch(y.length){case 1:if(M[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(M[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+M[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(M[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+M[1]+") must match Vector length ("+y[0]+")");break;case 2:if(M[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+M[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+M.length+" dimensions)")}}function o(M,y,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return c(M,y)}function a(M,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return u(M,y)}function u(M,y){var E=M._data,_=M._size,S=M._datatype,D=y._data,z=y._size,T=y._datatype,U=_[0],I=z[1],P,O=t,W=i;S&&T&&S===T&&typeof S=="string"&&(P=S,O=e.find(t,[P,P]),W=e.find(i,[P,P]));for(var q=[],L=0;L<I;L++){for(var G=W(E[0],D[0][L]),rr=1;rr<U;rr++)G=O(G,W(E[rr],D[rr][L]));q[L]=G}return M.createDenseMatrix({data:q,size:[I],datatype:P})}var l=e("_multiplyMatrixVector",{"DenseMatrix, any":f,"SparseMatrix, any":x}),d=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":w,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":b});function f(M,y){var E=M._data,_=M._size,S=M._datatype,D=y._data,z=y._datatype,T=_[0],U=_[1],I,P=t,O=i;S&&z&&S===z&&typeof S=="string"&&(I=S,P=e.find(t,[I,I]),O=e.find(i,[I,I]));for(var W=[],q=0;q<T;q++){for(var L=E[q],G=O(L[0],D[0]),rr=1;rr<U;rr++)G=P(G,O(L[rr],D[rr]));W[q]=G}return M.createDenseMatrix({data:W,size:[T],datatype:I})}function m(M,y){var E=M._data,_=M._size,S=M._datatype,D=y._data,z=y._size,T=y._datatype,U=_[0],I=_[1],P=z[1],O,W=t,q=i;S&&T&&S===T&&typeof S=="string"&&(O=S,W=e.find(t,[O,O]),q=e.find(i,[O,O]));for(var L=[],G=0;G<U;G++){var rr=E[G];L[G]=[];for(var er=0;er<P;er++){for(var k=q(rr[0],D[0][er]),pr=1;pr<I;pr++)k=W(k,q(rr[pr],D[pr][er]));L[G][er]=k}}return M.createDenseMatrix({data:L,size:[U,P],datatype:O})}function w(M,y){var E=M._data,_=M._size,S=M._datatype,D=y._values,z=y._index,T=y._ptr,U=y._size,I=y._datatype;if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var P=_[0],O=U[1],W,q=t,L=i,G=s,rr=0;S&&I&&S===I&&typeof S=="string"&&(W=S,q=e.find(t,[W,W]),L=e.find(i,[W,W]),G=e.find(s,[W,W]),rr=e.convert(0,W));for(var er=[],k=[],pr=[],dr=y.createSparseMatrix({values:er,index:k,ptr:pr,size:[P,O],datatype:W}),yr=0;yr<O;yr++){pr[yr]=k.length;var ur=T[yr],Cr=T[yr+1];if(Cr>ur)for(var lr=0,or=0;or<P;or++){for(var Or=or+1,br=void 0,ir=ur;ir<Cr;ir++){var _r=z[ir];lr!==Or?(br=L(E[or][_r],D[ir]),lr=Or):br=q(br,L(E[or][_r],D[ir]))}lr===Or&&!G(br,rr)&&(k.push(or),er.push(br))}}return pr[O]=k.length,dr}function x(M,y){var E=M._values,_=M._index,S=M._ptr,D=M._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var z=y._data,T=y._datatype,U=M._size[0],I=y._size[0],P=[],O=[],W=[],q,L=t,G=i,rr=s,er=0;D&&T&&D===T&&typeof D=="string"&&(q=D,L=e.find(t,[q,q]),G=e.find(i,[q,q]),rr=e.find(s,[q,q]),er=e.convert(0,q));var k=[],pr=[];W[0]=0;for(var dr=0;dr<I;dr++){var yr=z[dr];if(!rr(yr,er))for(var ur=S[dr],Cr=S[dr+1],lr=ur;lr<Cr;lr++){var or=_[lr];pr[or]?k[or]=L(k[or],G(yr,E[lr])):(pr[or]=!0,O.push(or),k[or]=G(yr,E[lr]))}}for(var Or=O.length,br=0;br<Or;br++){var ir=O[br];P[br]=k[ir]}return W[1]=O.length,M.createSparseMatrix({values:P,index:O,ptr:W,size:[U,1],datatype:q})}function g(M,y){var E=M._values,_=M._index,S=M._ptr,D=M._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var z=y._data,T=y._datatype,U=M._size[0],I=y._size[0],P=y._size[1],O,W=t,q=i,L=s,G=0;D&&T&&D===T&&typeof D=="string"&&(O=D,W=e.find(t,[O,O]),q=e.find(i,[O,O]),L=e.find(s,[O,O]),G=e.convert(0,O));for(var rr=[],er=[],k=[],pr=M.createSparseMatrix({values:rr,index:er,ptr:k,size:[U,P],datatype:O}),dr=[],yr=[],ur=0;ur<P;ur++){k[ur]=er.length;for(var Cr=ur+1,lr=0;lr<I;lr++){var or=z[lr][ur];if(!L(or,G))for(var Or=S[lr],br=S[lr+1],ir=Or;ir<br;ir++){var _r=_[ir];yr[_r]!==Cr?(yr[_r]=Cr,er.push(_r),dr[_r]=q(or,E[ir])):dr[_r]=W(dr[_r],q(or,E[ir]))}}for(var Fr=k[ur],kr=er.length,Lr=Fr;Lr<kr;Lr++){var fe=er[Lr];rr[Lr]=dr[fe]}}return k[P]=er.length,pr}function b(M,y){var E=M._values,_=M._index,S=M._ptr,D=M._datatype,z=y._values,T=y._index,U=y._ptr,I=y._datatype,P=M._size[0],O=y._size[1],W=E&&z,q,L=t,G=i;D&&I&&D===I&&typeof D=="string"&&(q=D,L=e.find(t,[q,q]),G=e.find(i,[q,q]));for(var rr=W?[]:void 0,er=[],k=[],pr=M.createSparseMatrix({values:rr,index:er,ptr:k,size:[P,O],datatype:q}),dr=W?[]:void 0,yr=[],ur,Cr,lr,or,Or,br,ir,_r,Fr=0;Fr<O;Fr++){k[Fr]=er.length;var kr=Fr+1;for(Or=U[Fr],br=U[Fr+1],or=Or;or<br;or++)if(_r=T[or],W)for(Cr=S[_r],lr=S[_r+1],ur=Cr;ur<lr;ur++)ir=_[ur],yr[ir]!==kr?(yr[ir]=kr,er.push(ir),dr[ir]=G(z[or],E[ur])):dr[ir]=L(dr[ir],G(z[or],E[ur]));else for(Cr=S[_r],lr=S[_r+1],ur=Cr;ur<lr;ur++)ir=_[ur],yr[ir]!==kr&&(yr[ir]=kr,er.push(ir));if(W)for(var Lr=k[Fr],fe=er.length,ae=Lr;ae<fe;ae++){var N=er[ae];rr[ae]=dr[N]}}return k[O]=er.length,pr}return e(Lt,ht({"Array, Array":function(y,E){p(Hr(y),Hr(E));var _=this(n(y),n(E));return wr(_)?_.valueOf():_},"Matrix, Matrix":function(y,E){var _=y.size(),S=E.size();return p(_,S),_.length===1?S.length===1?o(y,E,_[0]):a(y,E):S.length===1?l(y,E):d(y,E)},"Matrix, Array":function(y,E){return this(y,n(E))},"Array, Matrix":function(y,E){return this(n(y,E.storage()),E)},"SparseMatrix, any":function(y,E){return h(y,E,i,!1)},"DenseMatrix, any":function(y,E){return v(y,E,i,!1)},"any, SparseMatrix":function(y,E){return h(E,y,i,!0)},"any, DenseMatrix":function(y,E){return v(E,y,i,!0)},"Array, any":function(y,E){return v(n(y),E,i,!1).valueOf()},"any, Array":function(y,E){return v(n(E),y,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(y,E,_){for(var S=this(y,E),D=0;D<_.length;D++)S=this(S,_[D]);return S}},i.signatures))}),Wt="subtract",Bs=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],Is=K(Wt,Bs,r=>{var{typed:e,matrix:n,equalScalar:t,addScalar:i,unaryMinus:s,DenseMatrix:c}=r,h=Ln({typed:e}),v=Nt({typed:e}),p=As({typed:e,equalScalar:t}),o=Wn({typed:e,DenseMatrix:c}),a=Ve({typed:e}),u=ue({typed:e});return e(Wt,{"number, number":function(d,f){return d-f},"Complex, Complex":function(d,f){return d.sub(f)},"BigNumber, BigNumber":function(d,f){return d.minus(f)},"Fraction, Fraction":function(d,f){return d.sub(f)},"Unit, Unit":function(d,f){if(d.value===null)throw new Error("Parameter x contains a unit with undefined value");if(f.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!d.equalBase(f))throw new Error("Units do not match");var m=d.clone();return m.value=this(m.value,f.value),m.fixPrefix=!1,m},"SparseMatrix, SparseMatrix":function(d,f){return Se(d,f),p(d,f,this)},"SparseMatrix, DenseMatrix":function(d,f){return Se(d,f),v(f,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,f){return Se(d,f),h(d,f,this,!1)},"DenseMatrix, DenseMatrix":function(d,f){return Se(d,f),a(d,f,this)},"Array, Array":function(d,f){return this(n(d),n(f)).valueOf()},"Array, Matrix":function(d,f){return this(n(d),f)},"Matrix, Array":function(d,f){return this(d,n(f))},"SparseMatrix, any":function(d,f){return o(d,s(f),i)},"DenseMatrix, any":function(d,f){return u(d,f,this)},"any, SparseMatrix":function(d,f){return o(f,d,this,!0)},"any, DenseMatrix":function(d,f){return u(f,d,this,!0)},"Array, any":function(d,f){return u(n(d),f,this,!1).valueOf()},"any, Array":function(d,f){return u(n(f),d,this,!0).valueOf()}})});function Se(r,e){var n=r.size(),t=e.size();if(n.length!==t.length)throw new tr(n.length,t.length)}var Ts="algorithm07",Ps=["typed","DenseMatrix"],Zn=K(Ts,Ps,r=>{var{typed:e,DenseMatrix:n}=r;return function(s,c,h){var v=s._size,p=s._datatype,o=c._size,a=c._datatype;if(v.length!==o.length)throw new tr(v.length,o.length);if(v[0]!==o[0]||v[1]!==o[1])throw new RangeError("Dimension mismatch. Matrix A ("+v+") must match Matrix B ("+o+")");var u=v[0],l=v[1],d,f=0,m=h;typeof p=="string"&&p===a&&(d=p,f=e.convert(0,d),m=e.find(h,[d,d]));var w,x,g=[];for(w=0;w<u;w++)g[w]=[];var b=[],M=[],y=[],E=[];for(x=0;x<l;x++){var _=x+1;for(t(s,x,y,b,_),t(c,x,E,M,_),w=0;w<u;w++){var S=y[w]===_?b[w]:f,D=E[w]===_?M[w]:f;g[w][x]=m(S,D)}}return new n({data:g,size:[u,l],datatype:d})};function t(i,s,c,h,v){for(var p=i._values,o=i._index,a=i._ptr,u=a[s],l=a[s+1];u<l;u++){var d=o[u];c[d]=v,h[d]=p[u]}}}),Zt="conj",$s=["typed"],qs=K(Zt,$s,r=>{var{typed:e}=r;return e(Zt,{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.conjugate()},"Array | Matrix":function(t){return jr(t,this)}})}),Vt="identity",Rs=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Us=K(Vt,Rs,r=>{var{typed:e,config:n,matrix:t,BigNumber:i,DenseMatrix:s,SparseMatrix:c}=r;return e(Vt,{"":function(){return n.matrix==="Matrix"?t([]):[]},string:function(o){return t(o)},"number | BigNumber":function(o){return v(o,o,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(o,a){return v(o,o,a)},"number | BigNumber, number | BigNumber":function(o,a){return v(o,a,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(o,a,u){return v(o,a,u)},Array:function(o){return h(o)},"Array, string":function(o,a){return h(o,a)},Matrix:function(o){return h(o.valueOf(),o.storage())},"Matrix, string":function(o,a){return h(o.valueOf(),a)}});function h(p,o){switch(p.length){case 0:return o?t(o):[];case 1:return v(p[0],p[0],o);case 2:return v(p[0],p[1],o);default:throw new Error("Vector containing two values expected")}}function v(p,o,a){var u=Sr(p)||Sr(o)?i:null;if(Sr(p)&&(p=p.toNumber()),Sr(o)&&(o=o.toNumber()),!gr(p)||p<1)throw new Error("Parameters in function identity must be positive integers");if(!gr(o)||o<1)throw new Error("Parameters in function identity must be positive integers");var l=u?new i(1):1,d=u?new u(0):0,f=[p,o];if(a){if(a==="sparse")return c.diagonal(f,l,0,d);if(a==="dense")return s.diagonal(f,l,0,d);throw new TypeError('Unknown matrix type "'.concat(a,'"'))}for(var m=Oe([],f,d),w=p<o?p:o,x=0;x<w;x++)m[x][x]=l;return m}});function Ls(){throw new Error('No "bignumber" implementation available')}function Ws(){throw new Error('No "fraction" implementation available')}function Zs(){throw new Error('No "matrix" implementation available')}var Ht="size",Vs=["typed","config","?matrix"],Hs=K(Ht,Vs,r=>{var{typed:e,config:n,matrix:t}=r;return e(Ht,{Matrix:function(s){return s.create(s.size())},Array:Hr,string:function(s){return n.matrix==="Array"?[s.length]:t([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:t?t([]):Zs()}})}),Jt="zeros",Js=["typed","config","matrix","BigNumber"],Ys=K(Jt,Js,r=>{var{typed:e,config:n,matrix:t,BigNumber:i}=r;return e(Jt,{"":function(){return n.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(p){var o=p[p.length-1];if(typeof o=="string"){var a=p.pop();return s(p,a)}else return n.matrix==="Array"?s(p):s(p,"default")},Array:s,Matrix:function(p){var o=p.storage();return s(p.valueOf(),o)},"Array | Matrix, string":function(p,o){return s(p.valueOf(),o)}});function s(v,p){var o=c(v),a=o?new i(0):0;if(h(v),p){var u=t(p);return v.length>0?u.resize(v,a):u}else{var l=[];return v.length>0?Oe(l,v,a):l}}function c(v){var p=!1;return v.forEach(function(o,a,u){Sr(o)&&(p=!0,u[a]=o.toNumber())}),p}function h(v){v.forEach(function(p){if(typeof p!="number"||!gr(p)||p<0)throw new Error("Parameters in function zeros must be positive integers")})}});function we(r,e,n){var t;return String(r).indexOf("Unexpected type")!==-1?(t=arguments.length>2?" (type: "+Vr(n)+", value: "+JSON.stringify(n)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+t)):String(r).indexOf("complex numbers")!==-1?(t=arguments.length>2?" (type: "+Vr(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+t)):r}var Gs="numeric",Xs=["number","?bignumber","?fraction"],Ks=K(Gs,Xs,r=>{var{number:e,bignumber:n,fraction:t}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:c=>e(c),BigNumber:n?c=>n(c):Ls,Fraction:t?c=>t(c):Ws};return function(h,v){var p=Vr(h);if(!(p in i))throw new TypeError("Cannot convert "+h+' of type "'+p+'"; valid input types are '+Object.keys(i).join(", "));if(!(v in s))throw new TypeError("Cannot convert "+h+' to type "'+v+'"; valid output types are '+Object.keys(s).join(", "));return v===p?h:s[v](h)}}),Yt="divideScalar",Qs=["typed","numeric"],js=K(Yt,Qs,r=>{var{typed:e,numeric:n}=r;return e(Yt,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Fraction | BigNumber":function(i,s){var c=i.clone(),h=n(1,Vr(s));return c.value=this(c.value===null?c._normalize(h):c.value,s),c},"number | Fraction | BigNumber, Unit":function(i,s){var c=s.clone();c=c.pow(-1);var h=n(1,Vr(i));return c.value=this(i,s.value===null?s._normalize(h):s.value),c},"Unit, Unit":function(i,s){return i.divide(s)}})}),le="Number of decimals in function round must be an integer",Gt="round",ks=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],ru=K(Gt,ks,r=>{var{typed:e,matrix:n,equalScalar:t,zeros:i,BigNumber:s,DenseMatrix:c}=r,h=yt({typed:e,equalScalar:t}),v=Mt({typed:e,DenseMatrix:c}),p=ue({typed:e});return e(Gt,{number:Tt,"number, number":Tt,"number, BigNumber":function(a,u){if(!u.isInteger())throw new TypeError(le);return new s(a).toDecimalPlaces(u.toNumber())},Complex:function(a){return a.round()},"Complex, number":function(a,u){if(u%1)throw new TypeError(le);return a.round(u)},"Complex, BigNumber":function(a,u){if(!u.isInteger())throw new TypeError(le);var l=u.toNumber();return a.round(l)},BigNumber:function(a){return a.toDecimalPlaces(0)},"BigNumber, BigNumber":function(a,u){if(!u.isInteger())throw new TypeError(le);return a.toDecimalPlaces(u.toNumber())},Fraction:function(a){return a.round()},"Fraction, number":function(a,u){if(u%1)throw new TypeError(le);return a.round(u)},"Fraction, BigNumber":function(a,u){if(!u.isInteger())throw new TypeError(le);return a.round(u.toNumber())},"Array | Matrix":function(a){return jr(a,this)},"SparseMatrix, number | BigNumber":function(a,u){return h(a,u,this,!1)},"DenseMatrix, number | BigNumber":function(a,u){return p(a,u,this,!1)},"Array, number | BigNumber":function(a,u){return p(n(a),u,this,!1).valueOf()},"number | Complex | BigNumber | Fraction, SparseMatrix":function(a,u){return t(a,0)?i(u.size(),u.storage()):v(u,a,this,!0)},"number | Complex | BigNumber | Fraction, DenseMatrix":function(a,u){return t(a,0)?i(u.size(),u.storage()):p(u,a,this,!0)},"number | Complex | BigNumber | Fraction, Array":function(a,u){return p(n(u),a,this,!0).valueOf()}})}),Xt="smaller",eu=["typed","config","matrix","DenseMatrix"],tu=K(Xt,eu,r=>{var{typed:e,config:n,matrix:t,DenseMatrix:i}=r,s=Nt({typed:e}),c=Zn({typed:e,DenseMatrix:i}),h=Mt({typed:e,DenseMatrix:i}),v=Ve({typed:e}),p=ue({typed:e});return e(Xt,{"boolean, boolean":function(a,u){return a<u},"number, number":function(a,u){return a<u&&!de(a,u,n.epsilon)},"BigNumber, BigNumber":function(a,u){return a.lt(u)&&!wt(a,u,n.epsilon)},"Fraction, Fraction":function(a,u){return a.compare(u)===-1},"Complex, Complex":function(a,u){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(a,u){if(!a.equalBase(u))throw new Error("Cannot compare units with different base");return this(a.value,u.value)},"SparseMatrix, SparseMatrix":function(a,u){return c(a,u,this)},"SparseMatrix, DenseMatrix":function(a,u){return s(u,a,this,!0)},"DenseMatrix, SparseMatrix":function(a,u){return s(a,u,this,!1)},"DenseMatrix, DenseMatrix":function(a,u){return v(a,u,this)},"Array, Array":function(a,u){return this(t(a),t(u)).valueOf()},"Array, Matrix":function(a,u){return this(t(a),u)},"Matrix, Array":function(a,u){return this(a,t(u))},"SparseMatrix, any":function(a,u){return h(a,u,this,!1)},"DenseMatrix, any":function(a,u){return p(a,u,this,!1)},"any, SparseMatrix":function(a,u){return h(u,a,this,!0)},"any, DenseMatrix":function(a,u){return p(u,a,this,!0)},"Array, any":function(a,u){return p(t(a),u,this,!1).valueOf()},"any, Array":function(a,u){return p(t(u),a,this,!0).valueOf()}})}),Kt="larger",nu=["typed","config","matrix","DenseMatrix"],iu=K(Kt,nu,r=>{var{typed:e,config:n,matrix:t,DenseMatrix:i}=r,s=Nt({typed:e}),c=Zn({typed:e,DenseMatrix:i}),h=Mt({typed:e,DenseMatrix:i}),v=Ve({typed:e}),p=ue({typed:e});return e(Kt,{"boolean, boolean":function(a,u){return a>u},"number, number":function(a,u){return a>u&&!de(a,u,n.epsilon)},"BigNumber, BigNumber":function(a,u){return a.gt(u)&&!wt(a,u,n.epsilon)},"Fraction, Fraction":function(a,u){return a.compare(u)===1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(a,u){if(!a.equalBase(u))throw new Error("Cannot compare units with different base");return this(a.value,u.value)},"SparseMatrix, SparseMatrix":function(a,u){return c(a,u,this)},"SparseMatrix, DenseMatrix":function(a,u){return s(u,a,this,!0)},"DenseMatrix, SparseMatrix":function(a,u){return s(a,u,this,!1)},"DenseMatrix, DenseMatrix":function(a,u){return v(a,u,this)},"Array, Array":function(a,u){return this(t(a),t(u)).valueOf()},"Array, Matrix":function(a,u){return this(t(a),u)},"Matrix, Array":function(a,u){return this(a,t(u))},"SparseMatrix, any":function(a,u){return h(a,u,this,!1)},"DenseMatrix, any":function(a,u){return p(a,u,this,!1)},"any, SparseMatrix":function(a,u){return h(u,a,this,!0)},"any, DenseMatrix":function(a,u){return p(u,a,this,!0)},"Array, any":function(a,u){return p(t(a),u,this,!1).valueOf()},"any, Array":function(a,u){return p(t(u),a,this,!0).valueOf()}})}),Qt="max",au=["typed","config","numeric","larger"],ou=K(Qt,au,r=>{var{typed:e,config:n,numeric:t,larger:i}=r;return e(Qt,{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(v,p){return gt(v,p.valueOf(),s)},"...":function(v){if(mt(v))throw new TypeError("Scalar values expected in function max");return c(v)}});function s(h,v){try{return i(h,v)?h:v}catch(p){throw we(p,"max",v)}}function c(h){var v;if(Ze(h,function(p){try{isNaN(p)&&typeof p=="number"?v=NaN:(v===void 0||i(p,v))&&(v=p)}catch(o){throw we(o,"max",p)}}),v===void 0)throw new Error("Cannot calculate max of an empty array");return typeof v=="string"&&(v=t(v,n.number)),v}}),jt="min",su=["typed","config","numeric","smaller"],uu=K(jt,su,r=>{var{typed:e,config:n,numeric:t,smaller:i}=r;return e(jt,{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(v,p){return gt(v,p.valueOf(),s)},"...":function(v){if(mt(v))throw new TypeError("Scalar values expected in function min");return c(v)}});function s(h,v){try{return i(h,v)?h:v}catch(p){throw we(p,"min",v)}}function c(h){var v;if(Ze(h,function(p){try{isNaN(p)&&typeof p=="number"?v=NaN:(v===void 0||i(p,v))&&(v=p)}catch(o){throw we(o,"min",p)}}),v===void 0)throw new Error("Cannot calculate min of an empty array");return typeof v=="string"&&(v=t(v,n.number)),v}}),kt="add",fu=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],cu=K(kt,fu,r=>{var{typed:e,matrix:n,addScalar:t,equalScalar:i,DenseMatrix:s,SparseMatrix:c}=r,h=Ln({typed:e}),v=ws({typed:e,equalScalar:i}),p=Wn({typed:e,DenseMatrix:s}),o=Ve({typed:e}),a=ue({typed:e});return e(kt,ht({"DenseMatrix, DenseMatrix":function(l,d){return o(l,d,t)},"DenseMatrix, SparseMatrix":function(l,d){return h(l,d,t,!1)},"SparseMatrix, DenseMatrix":function(l,d){return h(d,l,t,!0)},"SparseMatrix, SparseMatrix":function(l,d){return v(l,d,t)},"Array, Array":function(l,d){return this(n(l),n(d)).valueOf()},"Array, Matrix":function(l,d){return this(n(l),d)},"Matrix, Array":function(l,d){return this(l,n(d))},"DenseMatrix, any":function(l,d){return a(l,d,t,!1)},"SparseMatrix, any":function(l,d){return p(l,d,t,!1)},"any, DenseMatrix":function(l,d){return a(d,l,t,!0)},"any, SparseMatrix":function(l,d){return p(d,l,t,!0)},"Array, any":function(l,d){return a(n(l),d,t,!1).valueOf()},"any, Array":function(l,d){return a(n(d),l,t,!0).valueOf()},"any, any":t,"any, any, ...any":function(l,d,f){for(var m=this(l,d),w=0;w<f.length;w++)m=this(m,f[w]);return m}},t.signatures))}),rn="dot",lu=["typed","addScalar","multiplyScalar","conj","size"],hu=K(rn,lu,r=>{var{typed:e,addScalar:n,multiplyScalar:t,conj:i,size:s}=r;return e(rn,{"Array | DenseMatrix, Array | DenseMatrix":h,"SparseMatrix, SparseMatrix":v});function c(o,a){var u=p(o),l=p(a),d,f;if(u.length===1)d=u[0];else if(u.length===2&&u[1]===1)d=u[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+u.join(", ")+")");if(l.length===1)f=l[0];else if(l.length===2&&l[1]===1)f=l[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+l.join(", ")+")");if(d!==f)throw new RangeError("Vectors must have equal length ("+d+" != "+f+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function h(o,a){var u=c(o,a),l=wr(o)?o._data:o,d=wr(o)?o._datatype:void 0,f=wr(a)?a._data:a,m=wr(a)?a._datatype:void 0,w=p(o).length===2,x=p(a).length===2,g=n,b=t;if(d&&m&&d===m&&typeof d=="string"){var M=d;g=e.find(n,[M,M]),b=e.find(t,[M,M])}if(!w&&!x){for(var y=b(i(l[0]),f[0]),E=1;E<u;E++)y=g(y,b(i(l[E]),f[E]));return y}if(!w&&x){for(var _=b(i(l[0]),f[0][0]),S=1;S<u;S++)_=g(_,b(i(l[S]),f[S][0]));return _}if(w&&!x){for(var D=b(i(l[0][0]),f[0]),z=1;z<u;z++)D=g(D,b(i(l[z][0]),f[z]));return D}if(w&&x){for(var T=b(i(l[0][0]),f[0][0]),U=1;U<u;U++)T=g(T,b(i(l[U][0]),f[U][0]));return T}}function v(o,a){c(o,a);for(var u=o._index,l=o._values,d=a._index,f=a._values,m=0,w=n,x=t,g=0,b=0;g<u.length&&b<d.length;){var M=u[g],y=d[b];if(M<y){g++;continue}if(M>y){b++;continue}M===y&&(m=w(m,x(l[g],f[b])),g++,b++)}return m}function p(o){return wr(o)?o.size():s(o)}}),en="det",vu=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],pu=K(en,vu,r=>{var{typed:e,matrix:n,subtract:t,multiply:i,divideScalar:s,isZero:c,unaryMinus:h}=r;return e(en,{any:function(o){return mr(o)},"Array | Matrix":function(o){var a;switch(wr(o)?a=o.size():Array.isArray(o)?(o=n(o),a=o.size()):a=[],a.length){case 0:return mr(o);case 1:if(a[0]===1)return mr(o.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Mr(a)+")");case 2:{var u=a[0],l=a[1];if(u===l)return v(o.clone().valueOf(),u);throw new RangeError("Matrix must be square (size: "+Mr(a)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Mr(a)+")")}}});function v(p,o,a){if(o===1)return mr(p[0][0]);if(o===2)return t(i(p[0][0],p[1][1]),i(p[1][0],p[0][1]));for(var u=!1,l=new Array(o).fill(0).map((E,_)=>_),d=0;d<o;d++){var f=l[d];if(c(p[f][d])){var m=void 0;for(m=d+1;m<o;m++)if(!c(p[l[m]][d])){f=l[m],l[m]=l[d],l[d]=f,u=!u;break}if(m===o)return p[f][d]}for(var w=p[f][d],x=d===0?1:p[l[d-1]][d-1],g=d+1;g<o;g++)for(var b=l[g],M=d+1;M<o;M++)p[b][M]=s(t(i(p[b][M],w),i(p[b][d],p[f][M])),x)}var y=p[l[o-1]][o-1];return u?h(y):y}}),tn="inv",du=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],mu=K(tn,du,r=>{var{typed:e,matrix:n,divideScalar:t,addScalar:i,multiply:s,unaryMinus:c,det:h,identity:v,abs:p}=r;return e(tn,{"Array | Matrix":function(u){var l=wr(u)?u.size():Hr(u);switch(l.length){case 1:if(l[0]===1)return wr(u)?n([t(1,u.valueOf()[0])]):[t(1,u[0])];throw new RangeError("Matrix must be square (size: "+Mr(l)+")");case 2:{var d=l[0],f=l[1];if(d===f)return wr(u)?n(o(u.valueOf(),d,f),u.storage()):o(u,d,f);throw new RangeError("Matrix must be square (size: "+Mr(l)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Mr(l)+")")}},any:function(u){return t(1,u)}});function o(a,u,l){var d,f,m,w,x;if(u===1){if(w=a[0][0],w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[t(1,w)]]}else if(u===2){var g=h(a);if(g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[t(a[1][1],g),t(c(a[0][1]),g)],[t(c(a[1][0]),g),t(a[0][0],g)]]}else{var b=a.concat();for(d=0;d<u;d++)b[d]=b[d].concat();for(var M=v(u).valueOf(),y=0;y<l;y++){var E=p(b[y][y]),_=y;for(d=y+1;d<u;)p(b[d][y])>E&&(E=p(b[d][y]),_=d),d++;if(E===0)throw Error("Cannot calculate inverse, determinant is zero");d=_,d!==y&&(x=b[y],b[y]=b[d],b[d]=x,x=M[y],M[y]=M[d],M[d]=x);var S=b[y],D=M[y];for(d=0;d<u;d++){var z=b[d],T=M[d];if(d!==y){if(z[y]!==0){for(m=t(c(z[y]),S[y]),f=y;f<l;f++)z[f]=i(z[f],s(m,S[f]));for(f=0;f<l;f++)T[f]=i(T[f],s(m,D[f]))}}else{for(m=S[y],f=y;f<l;f++)z[f]=t(z[f],m);for(f=0;f<l;f++)T[f]=t(T[f],m)}}}return M}}}),gu="divide",wu=["typed","matrix","multiply","equalScalar","divideScalar","inv"],yu=K(gu,wu,r=>{var{typed:e,matrix:n,multiply:t,equalScalar:i,divideScalar:s,inv:c}=r,h=yt({typed:e,equalScalar:i}),v=ue({typed:e});return e("divide",ht({"Array | Matrix, Array | Matrix":function(o,a){return t(o,c(a))},"DenseMatrix, any":function(o,a){return v(o,a,s,!1)},"SparseMatrix, any":function(o,a){return h(o,a,s,!1)},"Array, any":function(o,a){return v(n(o),a,s,!1).valueOf()},"any, Array | Matrix":function(o,a){return t(o,c(a))}},s.signatures))}),nn="mean",Mu=["typed","add","divide"],Nu=K(nn,Mu,r=>{var{typed:e,add:n,divide:t}=r;return e(nn,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(h){if(mt(h))throw new TypeError("Scalar values expected in function mean");return s(h)}});function i(c,h){try{var v=gt(c,h,n),p=Array.isArray(c)?Hr(c):c.size();return t(v,p[h])}catch(o){throw we(o,"mean")}}function s(c){var h,v=0;if(Ze(c,function(p){try{h=h===void 0?p:n(h,p),v++}catch(o){throw we(o,"mean",p)}}),v===0)throw new Error("Cannot calculate the mean of an empty array");return t(h,v)}}),_e=po({config:Yr}),bu=wo({}),Vn=So({}),bt=Do({}),ie=zo({Matrix:bt}),nr=ga({BigNumber:_e,Complex:bu,DenseMatrix:ie,Fraction:Vn}),_u=as({typed:nr}),xe=ss({typed:nr}),xu=Ko({BigNumber:_e,typed:nr}),Eu=qs({typed:nr}),ye=Ro({config:Yr,typed:nr}),Su=Po({typed:nr}),Hn=Os({typed:nr}),Au=Yo({typed:nr}),_t=Wo({Matrix:bt,equalScalar:ye,typed:nr}),xt=ns({typed:nr}),Cu=ko({Fraction:Vn,typed:nr}),$r=es({DenseMatrix:ie,Matrix:bt,SparseMatrix:_t,typed:nr}),Et=Ks({bignumber:xu,fraction:Cu,number:Au}),Du=Hs({matrix:$r,config:Yr,typed:nr}),Ou=tu({DenseMatrix:ie,config:Yr,matrix:$r,typed:nr}),Me=Is({DenseMatrix:ie,addScalar:xe,equalScalar:ye,matrix:$r,typed:nr,unaryMinus:xt}),Fu=Ys({BigNumber:_e,config:Yr,matrix:$r,typed:nr}),St=js({numeric:Et,typed:nr}),Qe=uu({config:Yr,numeric:Et,smaller:Ou,typed:nr}),Dr=ru({BigNumber:_e,DenseMatrix:ie,equalScalar:ye,matrix:$r,typed:nr,zeros:Fu}),zu=cu({DenseMatrix:ie,SparseMatrix:_t,addScalar:xe,equalScalar:ye,matrix:$r,typed:nr}),Bu=hu({addScalar:xe,conj:Eu,multiplyScalar:Hn,size:Du,typed:nr}),Iu=Us({BigNumber:_e,DenseMatrix:ie,SparseMatrix:_t,config:Yr,matrix:$r,typed:nr}),st=iu({DenseMatrix:ie,config:Yr,matrix:$r,typed:nr}),At=zs({addScalar:xe,dot:Bu,equalScalar:ye,matrix:$r,multiplyScalar:Hn,typed:nr}),Tu=pu({divideScalar:St,isZero:Su,matrix:$r,multiply:At,subtract:Me,typed:nr,unaryMinus:xt}),je=ou({config:Yr,larger:st,numeric:Et,typed:nr}),Pu=mu({abs:_u,addScalar:xe,det:Tu,divideScalar:St,identity:Iu,matrix:$r,multiply:At,typed:nr,unaryMinus:xt}),$u=yu({divideScalar:St,equalScalar:ye,inv:Pu,matrix:$r,multiply:At,typed:nr}),Xr=Nu({add:zu,divide:$u,typed:nr});class qu{async calcRateData({assignments:e,projectCrafts:n}){const t=n;for(let i=0;i<t.length;i++){const s=[];t[i].classifications.forEach(o=>{const a=e.filter(m=>m[56]===o[3]);for(let m=0;m<a.length;m++){const w=ce(a[m].offer[28].$d),g=ce(a[m][1].$d).diff(w);Object.assign(a[m],{offerToArrival:{dayjs:ce.duration(g),ms:g,format:`${Dr(ce.duration(g).asDays(),2)} days`}}),s.push(a[m])}const u=a.length===0?0:a.length===1?a[0][116]:Dr(Xr(a.map(m=>m[116])),2),l=o.fixedRate>0?o.fixedRate:0,d=a.length===0?0:a.length===1?a[0].offerToArrival.ms:Dr(Xr(a.map(m=>m.offerToArrival.ms)),2),f=l===0?0:a.filter(m=>m[116]>l).length;Object.assign(o,{analytics:{roster:a,avgWage:u,minWage:a.length===0?0:a.length===1?a[0][116]:Qe(a.map(m=>m[116])),maxWage:a.length===0?0:a.length===1?a[0][116]:je(a.map(m=>m[116])),fixedWage:l,highWages:f>0,diff:Dr(Me(u,l),2),averageTimeToArrive:{dayjs:ce.duration(d),ms:d,format:`${Dr(ce.duration(d).asDays(),2)} days`}},expanded:!1})});const c=t[i].classifications.filter(o=>o.analytics.avgWage>0&&o.isCraft).length===0?0:t[i].classifications.filter(o=>o.analytics.avgWage>0&&o.isCraft).length===1?t[i].classifications.filter(o=>o.analytics.avgWage>0&&o.isCraft)[0].analytics.avgWage:Xr(t[i].classifications.filter(o=>o.analytics.avgWage>0&&o.isCraft).map(o=>o.analytics.avgWage)),h=t[i].classifications.filter(o=>o.analytics.fixedWage>0&&o.isCraft).length===0?0:t[i].classifications.filter(o=>o.analytics.fixedWage>0&&o.isCraft).length===1?t[i].classifications.filter(o=>o.analytics.fixedWage>0&&o.isCraft)[0].analytics.fixedWage:Xr(t[i].classifications.filter(o=>o.analytics.fixedWage>0&&o.isCraft).map(o=>o.analytics.fixedWage)),v=t[i].classifications.filter(o=>o.analytics.avgWage>0).length===0?0:t[i].classifications.filter(o=>o.analytics.avgWage>0).length===1?t[i].classifications.filter(o=>o.analytics.avgWage>0)[0].analytics.avgWage:Xr(t[i].classifications.filter(o=>o.analytics.avgWage>0).map(o=>o.analytics.avgWage)),p=t[i].classifications.filter(o=>o.analytics.fixedWage>0).length===0?0:t[i].classifications.filter(o=>o.analytics.fixedWage>0).length===1?t[i].classifications.filter(o=>o.analytics.fixedWage>0)[0].analytics.fixedWage:Xr(t[i].classifications.filter(o=>o.analytics.fixedWage>0).map(o=>o.analytics.fixedWage));Object.assign(t[i],{highWages:t[i].classifications.filter(o=>o.analytics.highWages).length>0,highWageCount:t[i].classifications.filter(o=>o.analytics.highWages).length,avgCraftWorkerWage:Dr(c,2),fixedCraftWorkerAvg:Dr(h,2),avgWage:Dr(v,2),fixedAvg:Dr(p,2),diff:Dr(Me(v,p),2),craftRoster:s}),t[i].classifications.sort((o,a)=>o.order>a.order||o.order===a.order&&o.fixedRate>a.fixedRate?-1:1)}return t.sort((i,s)=>i.order>s.order?1:-1)}async calcRateDataDeprecated({assignments:e,projectCrafts:n}){const t=[...new Map(e.map(i=>[i[124],{id:i[124],name:i[68]}])).values()];for(let i=0;i<t.length;i++){const s=n.find(o=>o[3]===t[i].id),c=s===void 0?[]:s.classifications.filter(o=>o.isCraft&&o.fixedRate>0),h=e.filter(o=>o[124]===t[i].id),v=h.length>0?Dr(Xr(h.map(o=>o[116])),2):0,p=c.length===0?0:Dr(Xr(c.map(o=>o.fixedRate)),2);Object.assign(t[i],{avgWage:v,maxWage:h.length===0?0:h.length===1?h[0][116]:je(h.map(o=>o[116])),minWage:h.length===0?0:h.length===1?h[0][116]:Qe(h.map(o=>o[116])),fixedAvg:p,highWages:p>0?st(v,p):!1,diff:Dr(Me(v,p),2),fixedRateJobs:c,roster:h,expanded:!1})}return t}async compileJobRateData({assignments:e,fixedRateJobs:n}){for(let t=0;t<n.length;t++){const i=e.filter(h=>h[56]===n[t][3]),s=i.length>0?Dr(Xr(i.map(h=>h[116])),2):0,c=n[t].fixedRate;Object.assign(n[t],{roster:i,avgWage:s,fixedWage:c,maxWage:i.length>0?je(i.map(h=>h[116])):0,minWage:i.length>0?Qe(i.map(h=>h[116])):0,highWages:c>0?st(s,c):!1,diff:Dr(Me(s,c),2)}),delete n[t].avgRate,delete n[t].fixedRate}return n}}function Ru(){return{analytics:new qu}}const{analytics:Uu}=Ru();var Vu=gi(({app:r})=>{r.config.globalProperties.$analytics=Uu});export{Uu as analytics,Vu as default};
