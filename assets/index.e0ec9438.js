import{Q as U}from"./QPage.d83c4250.js";import{u as D}from"./use-quasar.cb503685.js";import{l as g,bT as N,c as u,_ as C,y as d,z as _,d as a,bq as b,cV as k,B as P,bV as F,bN as A,r as T,b4 as E,cU as B,F as z,b3 as G,ap as j,cT as H,aq as J}from"./index.8e33b0c3.js";import{q as K}from"./app.b339b179.js";import{a as O}from"./useQuerySaver.d29ff9ee.js";import{u as Q}from"./dataStore.876ce2d7.js";import{a as I,c as m}from"./array.164cfe36.js";import{a as L,u as p}from"./vee-validate.esm.f6f18325.js";import{Q as W}from"./QForm.43a2c7ab.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.5512aee7.js";import"./localForage.aedf7e5a.js";import"./index.04bc0a32.js";import"./i18n.3befcc18.js";const X=g({components:{},props:{columns:Array},setup(e,{emit:r}){const o=N(),{getViewedProjects:n,updateViewedProjects:i}=Q(),t=u(()=>o.params.id?o.params.id:null),s=u(()=>t.value?n(t.value):null),c=u(()=>s.value&&s.value.crafts?s.value.crafts:[]),f=I({ssn:m().required().length(9).matches("^[0-9]*$").label("Social Security Number"),first:m().required().label("First Name"),last:m().required().label("Last Name")}),{errors:l,handleSubmit:y,handleReset:v}=L({validationSchema:f}),q=y(async R=>{console.log(R)}),{value:$}=p("ssn"),{value:S}=p("first"),{value:w}=p("last");return{crafts:c,ssn:$,first:S,last:w,formErrors:l,submit:q,handleReset:v}}}),Y={class:"q-pa-none q-ma-none",style:{display:"inline-block"}};function Z(e,r,o,n,i,t){return d(),_("div",null,[a(W,{onSubmit:A(e.submit,["prevent"])},{default:b(()=>[a(k,{style:{display:"inline-block"},dense:"",modelValue:e.ssn,"onUpdate:modelValue":r[0]||(r[0]=s=>e.ssn=s),square:"",outlined:"",label:"Social Security Number","stack-label":"",error:!!e.formErrors.ssn,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),a(k,{style:{display:"inline-block"},dense:"",modelValue:e.first,"onUpdate:modelValue":r[1]||(r[1]=s=>e.first=s),square:"",outlined:"",label:"First Name","stack-label":"",error:!!e.formErrors.first,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),a(k,{style:{display:"inline-block"},dense:"",modelValue:e.last,"onUpdate:modelValue":r[2]||(r[2]=s=>e.last=s),square:"",outlined:"",label:"Last Name","stack-label":"",error:!!e.formErrors.last,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),P("div",Y,[a(F,{class:"q-my-none q-py-none",color:"info",label:"Submit",type:"submit",dense:"",onClick:e.submit},null,8,["onClick"]),a(F,{class:"q-my-none q-py-none",color:"secondary",label:"Reset",dense:"",onClick:e.handleReset},null,8,["onClick"])])]),_:1},8,["onSubmit"])])}var x=C(X,[["render",Z]]);const ee=g({components:{RosterRow:x},props:{},setup(e,{emit:r}){const o=N(),n=T([]),{getViewedProjects:i,updateViewedProjects:t}=Q(),s=u(()=>o.params.id?o.params.id:null),c=u(()=>s.value?i(s.value):null),f=I({ssn:m().required().length(9).matches("^[0-9]*$").label("Social Security Number"),first:m().required(),last:m().required()}),{errors:l,handleSubmit:y}=L({validationSchema:f}),v=y(async h=>{console.log(h)}),{value:q}=p("ssn"),{value:$}=p("first"),{value:S}=p("last"),w=u(()=>[{label:"Social Security Number",type:"input",model:q,error:!!l.ssn,errorMessage:l.ssn},{label:"First Name",type:"input",model:$,error:!!l.first,errorMessage:l.first},{label:"Last Name",type:"input",model:S,error:!!l.last,errorMessage:l.last}]);return(()=>{for(let V=0;V<25;V++){const M={key:V};n.value.push(M)}})(),{project:c,columns:w,submit:v,rows:n}}}),se=P("div",{class:"text-h6 font-weight-bold"},"Roster Setup",-1);function re(e,r,o,n,i,t){const s=E("roster-row");return d(),_("div",null,[a(H,null,{default:b(()=>[a(B,null,{default:b(()=>[se]),_:1}),a(B,null,{default:b(()=>[(d(!0),_(z,null,G(e.rows,c=>(d(),j(s,{key:c.key,class:"q-ma-none q-pa-none"}))),128))]),_:1})]),_:1})])}var te=C(ee,[["render",re]]);const oe=g({name:"Setup",components:{RosterSetup:te},setup(){const e=D(),r=N(),{getViewedProjects:o,updateViewedProjects:n,setViewedProjects:i}=Q(),t=u(()=>r.params.id?r.params.id:null),s=u(()=>t.value?o(t.value):null);return(async()=>{if(e.loading.show(),t.value&&!s.value){const{data:f}=await K.fetchFromProjectsApp({fields:[O({type:"projects",id:t.value})]});i({id:t.value,data:f})}e.loading.hide()})(),{project:s}}}),ae={class:"q-pa-md"};function ne(e,r,o,n,i,t){const s=E("roster-setup");return d(),j(U,{style:{"max-width":"100vw"}},{default:b(()=>[P("div",ae,[e.project?(d(),j(s,{key:0})):J("",!0)])]),_:1})}var we=C(oe,[["render",ne]]);export{we as default};
