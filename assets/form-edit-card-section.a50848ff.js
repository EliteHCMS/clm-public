import{l as O,r as v,c as S,_ as q,y as u,z as f,d as t,bq as r,B as g,ab as w,bV as d,aq as p,cV as F,bN as L}from"./index.8e33b0c3.js";import{a as B}from"./QSelect.8316c945.js";import{Q}from"./QForm.43a2c7ab.js";import{a as A,u as D}from"./vee-validate.esm.f6f18325.js";import{a as M}from"./array.164cfe36.js";const U=O({emits:["closeEdit"],components:{},props:{config:Object},setup(e,{emit:o}){const s=v(null),i=v(null),c=v(!1),y=async()=>{const{type:n,initialValue:a}=e.config;if(n==="options"){const{getter:b}=e.config;i.value=await b(),s.value=i.value,m.value=a(s.value)}else m.value=a},l=S(()=>M({entry:e.config.formRules})),{meta:k,errors:$,handleSubmit:V}=A({validationSchema:l}),{value:m}=D("entry"),C=(n,a)=>{const{filter:b}=e.config;n===""&&a(()=>{s.value=i.value}),a(()=>{const h=n.toLowerCase();s.value=b(i.value,h)})},E=n=>{c.value=!1,i.value.push(n),s.value.push(n),m.value=n},N=V(async n=>{const{setter:a}=e.config;await a(n.entry),o("closeEdit")});return y(),{rawOptions:i,options:s,entry:m,formErrors:$,formMeta:k,submit:N,filterOptions:C,addNew:c,newOptionAdded:E}}}),j={key:0,class:"q-pr-xl"},z={class:"text-caption"},I={key:0,class:"text-center bg-info"},R={key:0,class:"text-center bg-info"},G={key:1,class:"q-pr-xl"},H={class:"text-caption"};function J(e,o,s,i,c,y){return u(),f("div",null,[t(Q,{onSubmit:L(e.submit,["prevent"])},{default:r(()=>[e.config.type==="options"?(u(),f("div",j,[t(B,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":o[3]||(o[3]=l=>e.entry=l),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"",behavior:e.$q.platform.is.ios===!0?"dialog":"menu","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:r(()=>[g("div",z,w(e.formErrors.entry),1)]),after:r(()=>[t(d,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),t(d,{color:"dark",icon:"close",dense:"",onClick:o[0]||(o[0]=l=>e.$emit("closeEdit"))})]),"after-options":r(()=>[e.config.allowNew&&e.options&&e.options.length>0?(u(),f("div",I,[t(d,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:o[1]||(o[1]=l=>e.addNew=!0)},null,8,["label"])])):p("",!0)]),"no-option":r(()=>[e.config.allowNew?(u(),f("div",R,[t(d,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:o[2]||(o[2]=l=>e.addNew=!0)},null,8,["label"])])):p("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","behavior","onFilter","loading","disable"])])):p("",!0),e.config.type==="input"?(u(),f("div",G,[t(F,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":o[5]||(o[5]=l=>e.entry=l),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:r(()=>[g("div",H,w(e.formErrors.entry),1)]),after:r(()=>[t(d,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),t(d,{color:"dark",icon:"close",dense:"",onClick:o[4]||(o[4]=l=>e.$emit("closeEdit"))})]),_:1},8,["label","modelValue","error"])])):p("",!0)]),_:1},8,["onSubmit"])])}var Y=q(U,[["render",J]]);export{Y as E};
